!function(e){var t={};function r(n){if(t[n])return t[n].exports;var s=t[n]={i:n,l:!1,exports:{}};return e[n].call(s.exports,s,s.exports,r),s.l=!0,s.exports}r.m=e,r.c=t,r.d=function(e,t,n){r.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:n})},r.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},r.t=function(e,t){if(1&t&&(e=r(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var n=Object.create(null);if(r.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var s in e)r.d(n,s,function(t){return e[t]}.bind(null,s));return n},r.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return r.d(t,"a",t),t},r.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},r.p="",r(r.s=27)}([function(e,t,r){"use strict";const n=r(4),s=r(5),o=r(6),i=r(7),a=r(28),c={};t.clone=function(e,r){if("object"!=typeof e||null===e)return e;const n=(r=r||new Map).get(e);if(n)return n;let s,o=!1;if(Array.isArray(e))s=[],o=!0;else if(Buffer.isBuffer(e))s=Buffer.from(e);else if(e instanceof Date)s=new Date(e.getTime());else if(e instanceof RegExp)s=new RegExp(e);else{const t=Object.getPrototypeOf(e);t&&t.isImmutable?s=e:(s=Object.create(t),o=!0)}if(r.set(e,s),o){const n=Object.getOwnPropertyNames(e);for(let o=0;o<n.length;++o){const i=n[o],a=Object.getOwnPropertyDescriptor(e,i);a&&(a.get||a.set)?Object.defineProperty(s,i,a):s[i]=t.clone(e[i],r)}}return s},t.merge=function(e,r,n,s){if(t.assert(e&&"object"==typeof e,"Invalid target value: must be an object"),t.assert(null==r||"object"==typeof r,"Invalid source value: must be null, undefined, or an object"),!r)return e;if(Array.isArray(r)){t.assert(Array.isArray(e),"Cannot merge array onto an object"),!1===s&&(e.length=0);for(let n=0;n<r.length;++n)e.push(t.clone(r[n]));return e}const o=Object.keys(r);for(let i=0;i<o.length;++i){const a=o[i];if("__proto__"===a)continue;const c=r[a];c&&"object"==typeof c?!e[a]||"object"!=typeof e[a]||Array.isArray(e[a])!==Array.isArray(c)||c instanceof Date||Buffer.isBuffer(c)||c instanceof RegExp?e[a]=t.clone(c):t.merge(e[a],c,n,s):null!=c?e[a]=c:!1!==n&&(e[a]=c)}return e},t.applyToDefaults=function(e,r,n){if(t.assert(e&&"object"==typeof e,"Invalid defaults value: must be an object"),t.assert(!r||!0===r||"object"==typeof r,"Invalid options value: must be true, falsy or an object"),!r)return null;const s=t.clone(e);return!0===r?s:t.merge(s,r,!0===n,!1)},t.cloneWithShallow=function(e,r){if(!e||"object"!=typeof e)return e;const n=c.store(e,r),s=t.clone(e);return c.restore(s,e,n),s},c.store=function(e,r){const n={};for(let s=0;s<r.length;++s){const o=r[s],i=t.reach(e,o);void 0!==i&&(n[o]=i,c.reachSet(e,o,void 0))}return n},c.restore=function(e,t,r){const n=Object.keys(r);for(let s=0;s<n.length;++s){const o=n[s];c.reachSet(e,o,r[o]),c.reachSet(t,o,r[o])}},c.reachSet=function(e,t,r){const n=t.split(".");let s=e;for(let e=0;e<n.length;++e){const t=n[e];e+1===n.length&&(s[t]=r),s=s[t]}},t.applyToDefaultsWithShallow=function(e,r,n){if(t.assert(e&&"object"==typeof e,"Invalid defaults value: must be an object"),t.assert(!r||!0===r||"object"==typeof r,"Invalid options value: must be true, falsy or an object"),t.assert(n&&Array.isArray(n),"Invalid keys"),!r)return null;const s=t.cloneWithShallow(e,n);if(!0===r)return s;const o=c.store(r,n);return t.merge(s,r,!1,!1),c.restore(s,r,o),s},t.deepEqual=function(e,r,n,s){if(e===r)return 0!==e||1/e==1/r;n=n||{prototype:!0};const o=typeof e;if(o!==typeof r)return!1;if("object"!==o||null===e||null===r)return e!=e&&r!=r;if(-1!==(s=s||[]).indexOf(e))return!0;if(s.push(e),Array.isArray(e)){if(!Array.isArray(r))return!1;if(!n.part&&e.length!==r.length)return!1;for(let s=0;s<e.length;++s){if(n.part){let o=!1;for(let i=0;i<r.length;++i)if(t.deepEqual(e[s],r[i],n)){o=!0;break}return o}if(!t.deepEqual(e[s],r[s],n))return!1}return!0}if(Buffer.isBuffer(e)){if(!Buffer.isBuffer(r))return!1;if(e.length!==r.length)return!1;for(let t=0;t<e.length;++t)if(e[t]!==r[t])return!1;return!0}if(e instanceof Date)return r instanceof Date&&e.getTime()===r.getTime();if(e instanceof RegExp)return r instanceof RegExp&&e.toString()===r.toString();if(n.prototype&&Object.getPrototypeOf(e)!==Object.getPrototypeOf(r))return!1;const i=Object.getOwnPropertyNames(e);if(!n.part&&i.length!==Object.getOwnPropertyNames(r).length)return!1;for(let o=0;o<i.length;++o){const a=i[o],c=Object.getOwnPropertyDescriptor(e,a);if(c.get){if(!t.deepEqual(c,Object.getOwnPropertyDescriptor(r,a),n,s))return!1}else if(!t.deepEqual(e[a],r[a],n,s))return!1}return!0},t.unique=((e,t)=>{let r;if(t){r=[];const n=new Set;e.forEach(e=>{const s=e[t];n.has(s)||(n.add(s),r.push(e))})}else r=Array.from(new Set(e));return r}),t.mapToObject=function(e,t){if(!e)return null;const r={};for(let n=0;n<e.length;++n)t?e[n][t]&&(r[e[n][t]]=!0):r[e[n]]=!0;return r},t.intersect=function(e,r,n){if(!e||!r)return[];const s=[],o=Array.isArray(e)?t.mapToObject(e):e,i={};for(let e=0;e<r.length;++e)if(o[r[e]]&&!i[r[e]]){if(n)return r[e];s.push(r[e]),i[r[e]]=!0}return n?null:s},t.contain=function(e,r,n){let s,o,i=null;if("object"!=typeof e||"object"!=typeof r||Array.isArray(e)||Array.isArray(r)?r=[].concat(r):(i=r,r=Object.keys(r)),n=n||{},t.assert("string"==typeof e||"object"==typeof e,"Reference must be string or an object"),t.assert(r.length,"Values array cannot be empty"),n.deep){s=t.deepEqual;const e=n.hasOwnProperty("only"),r=n.hasOwnProperty("part");o={prototype:e?n.only:!!r&&!n.part,part:e?!n.only:!r||n.part}}else s=((e,t)=>e===t);let a=!1;const c=new Array(r.length);for(let e=0;e<c.length;++e)c[e]=0;if("string"==typeof e){let n="(";for(let e=0;e<r.length;++e){const s=r[e];t.assert("string"==typeof s,"Cannot compare string reference to non-string value"),n+=(e?"|":"")+t.escapeRegex(s)}const s=new RegExp(n+")","g");a=!!e.replace(s,(e,t)=>{const n=r.indexOf(t);return++c[n],""})}else if(Array.isArray(e))for(let t=0;t<e.length;++t){let n=!1;for(let i=0;i<r.length&&!1===n;++i)n=s(r[i],e[t],o)&&i;!1!==n?++c[n]:a=!0}else{const t=Object.getOwnPropertyNames(e);for(let n=0;n<t.length;++n){const l=t[n],u=r.indexOf(l);if(-1!==u){if(i&&!s(i[l],e[l],o))return!1;++c[u]}else a=!0}}let l=!1;for(let e=0;e<c.length;++e)if(l=l||!!c[e],n.once&&c[e]>1||!n.part&&!c[e])return!1;return(!n.only||!a)&&l},t.flatten=function(e,r){const n=r||[];for(let r=0;r<e.length;++r)Array.isArray(e[r])?t.flatten(e[r],n):n.push(e[r]);return n},t.reach=function(e,r,n){if(!1===r||null==r)return e;"string"==typeof(n=n||{})&&(n={separator:n});const s=r.split(n.separator||".");let o=e;for(let e=0;e<s.length;++e){let i=s[e];if("-"===i[0]&&Array.isArray(o)&&(i=i.slice(1,i.length),i=o.length-i),!o||"object"!=typeof o&&"function"!=typeof o||!(i in o)||"object"!=typeof o&&!1===n.functions){t.assert(!n.strict||e+1===s.length,"Missing segment",i,"in reach path ",r),t.assert("object"==typeof o||!0===n.functions||"function"!=typeof o,"Invalid segment",i,"in reach path ",r),o=n.default;break}o=o[i]}return o},t.reachTemplate=function(e,r,n){return r.replace(/{([^}]+)}/g,(r,s)=>{const o=t.reach(e,s,n);return null==o?"":o})},t.formatStack=function(e){const t=[];for(let r=0;r<e.length;++r){const n=e[r];t.push([n.getFileName(),n.getLineNumber(),n.getColumnNumber(),n.getFunctionName(),n.isConstructor()])}return t},t.formatTrace=function(e){const t=[];for(let r=0;r<e.length;++r){const n=e[r];t.push((n[4]?"new ":"")+n[3]+" ("+n[0]+":"+n[1]+":"+n[2]+")")}return t},t.callStack=function(e){const r=Error.prepareStackTrace;Error.prepareStackTrace=function(e,t){return t};const n={};Error.captureStackTrace(n,this);const s=n.stack;return Error.prepareStackTrace=r,t.formatStack(s).slice(1+e)},t.displayStack=function(e){const r=t.callStack(void 0===e?1:e+1);return t.formatTrace(r)},t.abortThrow=!1,t.abort=function(e,r){if(!0===t.abortThrow)throw new Error(e||"Unknown error");let n="";r||(n=t.displayStack(1).join("\n\t")),console.log("ABORT: "+e+"\n\t"+n),process.exit(1)},t.assert=function(e,...r){if(e)return;if(1===r.length&&r[0]instanceof Error)throw r[0];const s=r.filter(e=>""!==e).map(e=>"string"==typeof e?e:e instanceof Error?e.message:t.stringify(e));throw new n.AssertionError({message:s.join(" ")||"Unknown error",actual:!1,expected:!0,operator:"==",stackStartFunction:t.assert})},t.Bench=function(){this.ts=0,this.reset()},t.Bench.prototype.reset=function(){this.ts=t.Bench.now()},t.Bench.prototype.elapsed=function(){return t.Bench.now()-this.ts},t.Bench.now=function(){const e=process.hrtime();return 1e3*e[0]+e[1]/1e6},t.escapeRegex=function(e){return e.replace(/[\^\$\.\*\+\-\?\=\!\:\|\\\/\(\)\[\]\{\}\,]/g,"\\$&")},t.base64urlEncode=function(e,r){return t.assert("string"==typeof e||Buffer.isBuffer(e),"value must be string or buffer"),(Buffer.isBuffer(e)?e:Buffer.from(e,r||"binary")).toString("base64").replace(/\+/g,"-").replace(/\//g,"_").replace(/\=/g,"")},t.base64urlDecode=function(e,t){if("string"!=typeof e)throw new Error("Value not a string");if(!/^[\w\-]*$/.test(e))throw new Error("Invalid character");const r=Buffer.from(e,"base64");return"buffer"===t?r:r.toString(t||"binary")},t.escapeHeaderAttribute=function(e){return t.assert(/^[ \w\!#\$%&'\(\)\*\+,\-\.\/\:;<\=>\?@\[\]\^`\{\|\}~\"\\]*$/.test(e),"Bad attribute value ("+e+")"),e.replace(/\\/g,"\\\\").replace(/\"/g,'\\"')},t.escapeHtml=function(e){return a.escapeHtml(e)},t.escapeJavaScript=function(e){return a.escapeJavaScript(e)},t.escapeJson=function(e){return a.escapeJson(e)},t.once=function(e){if(e._hoekOnce)return e;let t=!1;const r=function(...r){t||(t=!0,e.apply(null,r))};return r._hoekOnce=!0,r},t.isInteger=Number.isSafeInteger,t.ignore=function(){},t.inherits=i.inherits,t.format=i.format,t.transform=function(e,r,n){t.assert(null==e||"object"==typeof e||Array.isArray(e),"Invalid source object: must be null, undefined, an object, or an array");const s="object"==typeof n&&null!==n&&n.separator||".";if(Array.isArray(e)){const s=[];for(let o=0;o<e.length;++o)s.push(t.transform(e[o],r,n));return s}const o={},i=Object.keys(r);for(let a=0;a<i.length;++a){const c=i[a],l=c.split(s),u=r[c];let f;t.assert("string"==typeof u,'All mappings must be "." delineated strings');let p=o;for(;l.length>1;)p[f=l.shift()]||(p[f]={}),p=p[f];p[f=l.shift()]=t.reach(e,u,n)}return o},t.uniqueFilename=function(e,t){t=t?"."!==t[0]?"."+t:t:"",e=o.resolve(e);const r=[Date.now(),process.pid,s.randomBytes(8).toString("hex")].join("-")+t;return o.join(e,r)},t.stringify=function(...e){try{return JSON.stringify.apply(null,e)}catch(e){return"[Cannot display object: "+e.message+"]"}},t.shallow=function(e){return Object.assign({},e)},t.wait=function(e){return new Promise(t=>setTimeout(t,e))},t.block=function(){return new Promise(t.ignore)}},function(e,t,r){"use strict";const n=r(0),s=r(13),o=r(2),i=r(10);let a=null,c=null;const l={Set:r(14),defaults:{abortEarly:!0,convert:!0,allowUnknown:!1,skipFunctions:!1,stripUnknown:!1,language:{},presence:"optional",strip:!1,noDefaults:!1,escapeHtml:!1}};e.exports=l.Any=class{constructor(){c=c||r(3),this.isJoi=!0,this._type="any",this._settings=null,this._valids=new l.Set,this._invalids=new l.Set,this._tests=[],this._refs=[],this._flags={},this._description=null,this._unit=null,this._notes=[],this._tags=[],this._examples=[],this._meta=[],this._inner={}}_init(){return this}get schemaType(){return this._type}createError(e,t,r,n,s=this._flags){return i.create(e,t,r,n,s)}createOverrideError(e,t,r,n,s,o){return i.create(e,t,r,n,this._flags,s,o)}checkOptions(e){const t=r(30).options.validate(e);if(t.error)throw new Error(t.error.details[0].message)}clone(){const e=Object.create(Object.getPrototypeOf(this));e.isJoi=!0,e._currentJoi=this._currentJoi,e._type=this._type,e._settings=this._settings,e._baseType=this._baseType,e._valids=this._valids.slice(),e._invalids=this._invalids.slice(),e._tests=this._tests.slice(),e._refs=this._refs.slice(),e._flags=n.clone(this._flags),e._description=this._description,e._unit=this._unit,e._notes=this._notes.slice(),e._tags=this._tags.slice(),e._examples=this._examples.slice(),e._meta=this._meta.slice(),e._inner={};const t=Object.keys(this._inner);for(let r=0;r<t.length;++r){const n=t[r];e._inner[n]=this._inner[n]?this._inner[n].slice():null}return e}concat(e){n.assert(e instanceof l.Any,"Invalid schema object"),n.assert("any"===this._type||"any"===e._type||e._type===this._type,"Cannot merge type",this._type,"with another type:",e._type);let t=this.clone();if("any"===this._type&&"any"!==e._type){const r=e.clone(),n=["_settings","_valids","_invalids","_tests","_refs","_flags","_description","_unit","_notes","_tags","_examples","_meta","_inner"];for(let e=0;e<n.length;++e)r[n[e]]=t[n[e]];t=r}t._settings=t._settings?s.concat(t._settings,e._settings):e._settings,t._valids.merge(e._valids,e._invalids),t._invalids.merge(e._invalids,e._valids),t._tests=t._tests.concat(e._tests),t._refs=t._refs.concat(e._refs),n.merge(t._flags,e._flags),t._description=e._description||t._description,t._unit=e._unit||t._unit,t._notes=t._notes.concat(e._notes),t._tags=t._tags.concat(e._tags),t._examples=t._examples.concat(e._examples),t._meta=t._meta.concat(e._meta);const r=Object.keys(e._inner),o="object"===t._type;for(let n=0;n<r.length;++n){const s=r[n],i=e._inner[s];if(i){const e=t._inner[s];if(e)if(o&&"children"===s){const t={};for(let r=0;r<e.length;++r)t[e[r].key]=r;for(let r=0;r<i.length;++r){const n=i[r].key;t[n]>=0?e[t[n]]={key:n,schema:e[t[n]].schema.concat(i[r].schema)}:e.push(i[r])}}else t._inner[s]=t._inner[s].concat(i);else t._inner[s]=i.slice()}}return t}_test(e,t,r,n){const s=this.clone();return s._tests.push({func:r,name:e,arg:t,options:n}),s}options(e){n.assert(!e.context,"Cannot override context"),this.checkOptions(e);const t=this.clone();return t._settings=s.concat(t._settings,e),t}strict(e){const t=this.clone(),r=void 0!==e&&!e;return t._settings=s.concat(t._settings,{convert:r}),t}raw(e){const t=void 0===e||e;if(this._flags.raw===t)return this;const r=this.clone();return r._flags.raw=t,r}error(e){n.assert(e&&(e instanceof Error||"function"==typeof e),"Must provide a valid Error object or a function");const t=this.clone();return t._flags.error=e,t}allow(...e){const t=this.clone();e=n.flatten(e);for(let r=0;r<e.length;++r){const s=e[r];n.assert(void 0!==s,"Cannot call allow/valid/invalid with undefined"),t._invalids.remove(s),t._valids.add(s,t._refs)}return t}valid(...e){const t=this.allow(...e);return t._flags.allowOnly=!0,t}invalid(...e){const t=this.clone();e=n.flatten(e);for(let r=0;r<e.length;++r){const s=e[r];n.assert(void 0!==s,"Cannot call allow/valid/invalid with undefined"),t._valids.remove(s),t._invalids.add(s,t._refs)}return t}required(){if("required"===this._flags.presence)return this;const e=this.clone();return e._flags.presence="required",e}optional(){if("optional"===this._flags.presence)return this;const e=this.clone();return e._flags.presence="optional",e}forbidden(){if("forbidden"===this._flags.presence)return this;const e=this.clone();return e._flags.presence="forbidden",e}strip(){if(this._flags.strip)return this;const e=this.clone();return e._flags.strip=!0,e}applyFunctionToChildren(e,t,r,n){if(1!==(e=[].concat(e)).length||""!==e[0]){n=n?n+".":"";const t=(""===e[0]?e.slice(1):e).map(e=>n+e);throw new Error("unknown key(s) "+t.join(", "))}return this[t].apply(this,r)}default(e,t){"function"!=typeof e||o.isRef(e)||(!e.description&&t&&(e.description=t),this._flags.func||n.assert("string"==typeof e.description&&e.description.length>0,"description must be provided when default value is a function"));const r=this.clone();return r._flags.default=e,o.push(r._refs,e),r}empty(e){const t=this.clone();return void 0===e?delete t._flags.empty:t._flags.empty=c.schema(this._currentJoi,e),t}when(e,t){n.assert(t&&"object"==typeof t,"Invalid options"),n.assert(void 0!==t.then||void 0!==t.otherwise,'options must have at least one of "then" or "otherwise"');const s=t.hasOwnProperty("then")?this.concat(c.schema(this._currentJoi,t.then)):void 0,o=t.hasOwnProperty("otherwise")?this.concat(c.schema(this._currentJoi,t.otherwise)):void 0;a=a||r(15);const i={then:s,otherwise:o};Object.prototype.hasOwnProperty.call(t,"is")&&(i.is=t.is);const l=a.when(e,i);return l._flags.presence="ignore",l._baseType=this,l}description(e){n.assert(e&&"string"==typeof e,"Description must be a non-empty string");const t=this.clone();return t._description=e,t}notes(e){n.assert(e&&("string"==typeof e||Array.isArray(e)),"Notes must be a non-empty string or array");const t=this.clone();return t._notes=t._notes.concat(e),t}tags(e){n.assert(e&&("string"==typeof e||Array.isArray(e)),"Tags must be a non-empty string or array");const t=this.clone();return t._tags=t._tags.concat(e),t}meta(e){n.assert(void 0!==e,"Meta cannot be undefined");const t=this.clone();return t._meta=t._meta.concat(e),t}example(...e){n.assert(1===e.length,"Missing example");const t=e[0],r=this.clone();return r._examples.push(t),r}unit(e){n.assert(e&&"string"==typeof e,"Unit name must be a non-empty string");const t=this.clone();return t._unit=e,t}_prepareEmptyValue(e){return"string"==typeof e&&this._flags.trim?e.trim():e}_validate(e,t,r,a){const c=e;t=t||{key:"",path:[],parent:null,reference:a},this._settings&&(r=s.concat(r,this._settings));let u=[];const f=()=>{let s;if(void 0!==e)s=this._flags.raw?c:e;else if(r.noDefaults)s=e;else if(o.isRef(this._flags.default))s=this._flags.default(t.parent,r);else if("function"!=typeof this._flags.default||this._flags.func&&!this._flags.default.description)s=n.clone(this._flags.default);else{let e;null!==t.parent&&this._flags.default.length>0&&(e=[n.clone(t.parent),r]);const o=l._try(this._flags.default,e);s=o.value,o.error&&u.push(this.createError("any.default",{error:o.error},t,r))}if(u.length&&"function"==typeof this._flags.error){const e=this._flags.error.call(this,u);u="string"==typeof e?[this.createOverrideError("override",{reason:u},t,r,e)]:[].concat(e).map(e=>e instanceof Error?e:this.createOverrideError(e.type||"override",e.context,t,r,e.message,e.template))}return{value:this._flags.strip?void 0:s,finalValue:s,errors:u.length?u:null}};if(this._coerce){const n=this._coerce.call(this,e,t,r);if(n.errors)return e=n.value,u=u.concat(n.errors),f();e=n.value}this._flags.empty&&!this._flags.empty._validate(this._prepareEmptyValue(e),null,l.defaults).errors&&(e=void 0);const p=this._flags.presence||r.presence;if("optional"===p){if(void 0===e){if(!(this._flags.hasOwnProperty("default")&&void 0===this._flags.default)||"object"!==this._type)return f();e={}}}else{if("required"===p&&void 0===e)return u.push(this.createError("any.required",null,t,r)),f();if("forbidden"===p)return void 0===e?f():(u.push(this.createError("any.unknown",null,t,r)),f())}if(this._valids.has(e,t,r,this._flags.insensitive))return f();if(this._invalids.has(e,t,r,this._flags.insensitive)&&(u.push(this.createError(""===e?"any.empty":"any.invalid",{value:e,invalids:this._invalids.values({stripUndefined:!0})},t,r)),r.abortEarly||void 0===e))return f();if(this._base){const n=this._base.call(this,e,t,r);if(n.errors)return e=n.value,u=u.concat(n.errors),f();if(n.value!==e){if(e=n.value,this._valids.has(e,t,r,this._flags.insensitive))return f();if(this._invalids.has(e,t,r,this._flags.insensitive)&&(u.push(this.createError(""===e?"any.empty":"any.invalid",{value:e,invalids:this._invalids.values({stripUndefined:!0})},t,r)),r.abortEarly))return f()}}if(this._flags.allowOnly&&(u.push(this.createError("any.allowOnly",{value:e,valids:this._valids.values({stripUndefined:!0})},t,r)),r.abortEarly))return f();for(let n=0;n<this._tests.length;++n){const s=this._tests[n].func.call(this,e,t,r);if(s instanceof i.Err){if(u.push(s),r.abortEarly)return f()}else e=s}return f()}_validateWithOptions(e,t,r){t&&this.checkOptions(t);const n=s.concat(l.defaults,t),o=this._validate(e,null,n),a=i.process(o.errors,e);return r?r(a,o.value):{error:a,value:o.value,then:(e,t)=>a?Promise.reject(a).catch(t):Promise.resolve(o.value).then(e),catch:e=>a?Promise.reject(a).catch(e):Promise.resolve(o.value)}}validate(e,t,r){return"function"==typeof t?this._validateWithOptions(e,null,t):this._validateWithOptions(e,t,r)}describe(){const e={type:this._type},t=Object.keys(this._flags);if(t.length)if(["empty","default","lazy","label"].some(e=>this._flags.hasOwnProperty(e))){e.flags={};for(let r=0;r<t.length;++r){const n=t[r];"empty"===n?e.flags[n]=this._flags[n].describe():"default"===n?o.isRef(this._flags[n])?e.flags[n]=this._flags[n].toString():"function"==typeof this._flags[n]?e.flags[n]={description:this._flags[n].description,function:this._flags[n]}:e.flags[n]=this._flags[n]:"lazy"===n||"label"===n||(e.flags[n]=this._flags[n])}}else e.flags=this._flags;this._settings&&(e.options=n.clone(this._settings)),this._baseType&&(e.base=this._baseType.describe()),this._description&&(e.description=this._description),this._notes.length&&(e.notes=this._notes),this._tags.length&&(e.tags=this._tags),this._meta.length&&(e.meta=this._meta),this._examples.length&&(e.examples=this._examples),this._unit&&(e.unit=this._unit);const r=this._valids.values();r.length&&(e.valids=r.map(e=>o.isRef(e)?e.toString():e));const s=this._invalids.values();s.length&&(e.invalids=s.map(e=>o.isRef(e)?e.toString():e)),e.rules=[];for(let t=0;t<this._tests.length;++t){const r=this._tests[t],n={name:r.name};void 0!==r.arg&&(n.arg=o.isRef(r.arg)?r.arg.toString():r.arg);const s=r.options;if(s){if(s.hasRef){n.arg={};const e=Object.keys(r.arg);for(let t=0;t<e.length;++t){const s=e[t],i=r.arg[s];n.arg[s]=o.isRef(i)?i.toString():i}}"string"==typeof s.description?n.description=s.description:"function"==typeof s.description&&(n.description=s.description(n.arg))}e.rules.push(n)}e.rules.length||delete e.rules;const i=this._getLabel();return i&&(e.label=i),e}label(e){n.assert(e&&"string"==typeof e,"Label name must be a non-empty string");const t=this.clone();return t._flags.label=e,t}_getLabel(e){return this._flags.label||e}},l.Any.prototype.isImmutable=!0,l.Any.prototype.only=l.Any.prototype.equal=l.Any.prototype.valid,l.Any.prototype.disallow=l.Any.prototype.not=l.Any.prototype.invalid,l.Any.prototype.exist=l.Any.prototype.required,l._try=function(e,t){let r,n;try{n=e.apply(null,t)}catch(e){r=e}return{value:n,error:r}}},function(e,t,r){"use strict";const n=r(0);t.create=function(e,t){n.assert("string"==typeof e,"Invalid reference key:",e);const r=n.clone(t),s=function(e,t){return n.reach(s.isContext?t.context:e,s.key,r)};return s.isContext=e[0]===(r&&r.contextPrefix||"$"),s.key=s.isContext?e.slice(1):e,s.path=s.key.split(r&&r.separator||"."),s.depth=s.path.length,s.root=s.path[0],s.isJoi=!0,s.toString=function(){return(s.isContext?"context:":"ref:")+s.key},s},t.isRef=function(e){return"function"==typeof e&&e.isJoi},t.push=function(e,r){t.isRef(r)&&!r.isContext&&e.push(r.root)}},function(e,t,r){"use strict";const n=r(0),s=r(2);t.schema=function(e,t){return null!=t&&"object"==typeof t?t.isJoi?t:Array.isArray(t)?e.alternatives().try(t):t instanceof RegExp?e.string().regex(t):t instanceof Date?e.date().valid(t):e.object().keys(t):"string"==typeof t?e.string().valid(t):"number"==typeof t?e.number().valid(t):"boolean"==typeof t?e.boolean().valid(t):s.isRef(t)?e.valid(t):(n.assert(null===t,"Invalid schema content:",t),e.valid(null))},t.ref=function(e){return s.isRef(e)?e:s.create(e)}},function(e,t){e.exports=require("assert")},function(e,t){e.exports=require("crypto")},function(e,t){e.exports=require("path")},function(e,t){e.exports=require("util")},function(e,t,r){"use strict";const n=r(50),s=r(20),o=r(23)("simple-oauth2:index"),i=r(71),a={Accept:"application/json"};e.exports=(e=>{const t=Object.assign({},e.http,{baseUrl:e.auth.tokenHost,headers:Object.assign({},a,e.http&&e.http.headers)}),r=n.defaults(t);return{request:async function(t,n){let a=n;const c={json:!0,headers:{}};if("header"===e.options.authorizationMethod){const t=i.getAuthorizationHeaderToken(e.client.id,e.client.secret);o("Using header authentication. Authorization header set to %s",t),c.headers.Authorization=`Basic ${t}`}else o("Using body authentication"),a=Object.assign({},a,{[e.client.idParamName]:e.client.id,[e.client.secretParamName]:e.client.secret});return"form"===e.options.bodyFormat?(o("Using form request format"),c.payload=s.stringify(a),c.headers["Content-Type"]="application/x-www-form-urlencoded"):(o("Using json request format"),c.payload=a,c.headers["Content-Type"]="application/json"),o("Creating request to: (POST) %s",t),o("Using options: %j",c),(await r.post(t,c)).payload}}})},function(e,t){e.exports=require("stream")},function(e,t,r){"use strict";const n=r(0),s=r(29),o={annotations:Symbol("joi-annotations"),stringify:function(e,r){const n=typeof e;if(null===e)return"null";if("string"===n)return e;if(e instanceof t.Err||"function"===n||"symbol"===n)return e.toString();if("object"===n){if(Array.isArray(e)){let t="";for(let n=0;n<e.length;++n)t=t+(t.length?", ":"")+o.stringify(e[n],r);return r?"["+t+"]":t}return e.toString()}return JSON.stringify(e)}};t.Err=class{constructor(e,t,r,n,o,i,a){this.isJoi=!0,this.type=e,this.context=t||{},this.context.key=r.path[r.path.length-1],this.context.label=r.key,this.path=r.path,this.options=n,this.flags=o,this.message=i,this.template=a;const c=this.options.language;this.flags.label?this.context.label=this.flags.label:!c||""!==this.context.label&&null!==this.context.label||(this.context.label=c.root||s.errors.root)}toString(){if(this.message)return this.message;let e;this.template&&(e=this.template);const t=this.options.language;if(void 0===(e=e||n.reach(t,this.type)||n.reach(s.errors,this.type)))return`Error code "${this.type}" is not defined, your custom type is missing the correct language definition`;let r=n.reach(t,"messages.wrapArrays");if("boolean"!=typeof r&&(r=s.errors.messages.wrapArrays),null===e){const e=o.stringify(this.context.reason,r);return r?e.slice(1,-1):e}const i=/\{\{\!?label\}\}/.test(e),a=e.length>2&&"!"===e[0]&&"!"===e[1];if(a&&(e=e.slice(2)),!i&&!a){const r=n.reach(t,"key");e="string"==typeof r?r+e:n.reach(s.errors,"key")+e}return e.replace(/\{\{(\!?)([^}]+)\}\}/g,(e,t,s)=>{const i=n.reach(this.context,s),a=o.stringify(i,r);return t&&this.options.escapeHtml?n.escapeHtml(a):a})}},t.create=function(e,r,n,s,o,i,a){return new t.Err(e,r,n,s,o,i,a)},t.process=function(e,t){if(!e||!e.length)return null;let r="";const n=[],s=function(e,t){for(let o=0;o<e.length;++o){const i=e[o];if(i instanceof Error)return i;if(i.flags.error&&"function"!=typeof i.flags.error)return i.flags.error;let a;if(void 0===t&&(a=i.toString(),r=r+(r?". ":"")+a),i.context.reason&&i.context.reason.length){const e=s(i.context.reason,i.path);if(e)return e}else n.push({message:a||i.toString(),path:i.path,type:i.type,context:i.context})}},i=s(e);if(i)return i;const a=new Error(r);return a.isJoi=!0,a.name="ValidationError",a.details=n,a._object=t,a.annotate=o.annotate,a},o.safeStringify=function(e,t){return JSON.stringify(e,o.serializer(),t)},o.serializer=function(){const e=[],t=[];return function(r,n){if(t.length>0){const s=t.indexOf(this);~s?(t.length=s+1,e.length=s+1,e[s]=r):(t.push(this),e.push(r)),~t.indexOf(n)&&(n=((r,n)=>t[0]===n?"[Circular ~]":"[Circular ~."+e.slice(0,t.indexOf(n)).join(".")+"]").call(this,r,n))}else t.push(n);if(n){const e=n[o.annotations];if(e){if(Array.isArray(n)){const t=[];for(let r=0;r<n.length;++r)e.errors[r]&&t.push(`_$idx$_${e.errors[r].sort().join(", ")}_$end$_`),t.push(n[r]);n=t}else{const t=Object.keys(e.errors);for(let r=0;r<t.length;++r){const s=t[r];n[`${s}_$key$_${e.errors[s].sort().join(", ")}_$end$_`]=n[s],n[s]=void 0}const r=Object.keys(e.missing);for(let t=0;t<r.length;++t){const s=r[t];n[`_$miss$_${s}|${e.missing[s]}_$end$_`]="__missing__"}}return n}}return n===1/0||n===-1/0||Number.isNaN(n)||"function"==typeof n||"symbol"==typeof n?"["+n.toString()+"]":n}},o.annotate=function(e){const t=e?"":"[31m",r=e?"":"[41m",s=e?"":"[0m";if("object"!=typeof this._object)return this.details[0].message;const i=n.clone(this._object||{});for(let e=this.details.length-1;e>=0;--e){const t=e+1,r=this.details[e],n=r.path;let s=i;for(let e=0;;++e){const i=n[e];if(s.isImmutable&&(s=s.clone()),!(e+1<n.length&&s[i]&&"string"!=typeof s[i])){const e=s[o.annotations]=s[o.annotations]||{errors:{},missing:{}},n=s[i],a=i||r.context.label;void 0!==n?(e.errors[a]=e.errors[a]||[],e.errors[a].push(t)):e.missing[a]=t;break}s=s[i]}}const a=/_\$key\$_([, \d]+)_\$end\$_\"/g,c=/\"_\$miss\$_([^\|]+)\|(\d+)_\$end\$_\"\: \"__missing__\"/g,l=/\s*\"_\$idx\$_([, \d]+)_\$end\$_\",?\n(.*)/g,u=/"\[(NaN|Symbol.*|-?Infinity|function.*|\(.*)\]"/g;let f=o.safeStringify(i,2).replace(a,(e,r)=>`" ${t}[${r}]${s}`).replace(c,(e,n,o)=>`${r}"${n}"${s}${t} [${o}]: -- missing --${s}`).replace(l,(e,r,n)=>`\n${n} ${t}[${r}]${s}`).replace(u,(e,t)=>t);f=`${f}\n${t}`;for(let e=0;e<this.details.length;++e){f=`${f}\n[${e+1}] ${this.details[e].message}`}return f+=s}},function(e,t,r){var n=r(75),s=r(25),o=36e5,i=6e4,a=2,c=/[T ]/,l=/:/,u=/^(\d{2})$/,f=[/^([+-]\d{2})$/,/^([+-]\d{3})$/,/^([+-]\d{4})$/],p=/^(\d{4})/,h=[/^([+-]\d{4})/,/^([+-]\d{5})/,/^([+-]\d{6})/],d=/^-(\d{2})$/,m=/^-?(\d{3})$/,g=/^-?(\d{2})-?(\d{2})$/,y=/^-?W(\d{2})$/,b=/^-?W(\d{2})-?(\d{1})$/,v=/^(\d{2}([.,]\d*)?)$/,_=/^(\d{2}):?(\d{2}([.,]\d*)?)$/,w=/^(\d{2}):?(\d{2}):?(\d{2}([.,]\d*)?)$/,x=/([Z+-].*)$/,k=/^(Z)$/,j=/^([+-])(\d{2})$/,S=/^([+-])(\d{2}):?(\d{2})$/;function C(e,t,r){t=t||0,r=r||0;var n=new Date(0);n.setUTCFullYear(e,0,4);var s=7*t+r+1-(n.getUTCDay()||7);return n.setUTCDate(n.getUTCDate()+s),n}e.exports=function(e,t){if(s(e))return new Date(e.getTime());if("string"!=typeof e)return new Date(e);var r=(t||{}).additionalDigits;r=null==r?a:Number(r);var E=function(e){var t,r={},n=e.split(c);if(l.test(n[0])?(r.date=null,t=n[0]):(r.date=n[0],t=n[1]),t){var s=x.exec(t);s?(r.time=t.replace(s[1],""),r.timezone=s[1]):r.time=t}return r}(e),A=function(e,t){var r,n=f[t],s=h[t];if(r=p.exec(e)||s.exec(e)){var o=r[1];return{year:parseInt(o,10),restDateString:e.slice(o.length)}}if(r=u.exec(e)||n.exec(e)){var i=r[1];return{year:100*parseInt(i,10),restDateString:e.slice(i.length)}}return{year:null}}(E.date,r),O=A.year,T=function(e,t){if(null===t)return null;var r,n,s,o;if(0===e.length)return(n=new Date(0)).setUTCFullYear(t),n;if(r=d.exec(e))return n=new Date(0),s=parseInt(r[1],10)-1,n.setUTCFullYear(t,s),n;if(r=m.exec(e)){n=new Date(0);var i=parseInt(r[1],10);return n.setUTCFullYear(t,0,i),n}if(r=g.exec(e)){n=new Date(0),s=parseInt(r[1],10)-1;var a=parseInt(r[2],10);return n.setUTCFullYear(t,s,a),n}if(r=y.exec(e))return o=parseInt(r[1],10)-1,C(t,o);if(r=b.exec(e)){o=parseInt(r[1],10)-1;var c=parseInt(r[2],10)-1;return C(t,o,c)}return null}(A.restDateString,O);if(T){var D,R=T.getTime(),P=0;if(E.time&&(P=function(e){var t,r,n;if(t=v.exec(e))return(r=parseFloat(t[1].replace(",",".")))%24*o;if(t=_.exec(e))return r=parseInt(t[1],10),n=parseFloat(t[2].replace(",",".")),r%24*o+n*i;if(t=w.exec(e)){r=parseInt(t[1],10),n=parseInt(t[2],10);var s=parseFloat(t[3].replace(",","."));return r%24*o+n*i+1e3*s}return null}(E.time)),E.timezone)L=E.timezone,D=((N=k.exec(L))?0:(N=j.exec(L))?(z=60*parseInt(N[2],10),"+"===N[1]?-z:z):(N=S.exec(L))?(z=60*parseInt(N[2],10)+parseInt(N[3],10),"+"===N[1]?-z:z):0)*i;else{var I=R+P,B=new Date(I);D=n(B);var F=new Date(I);F.setDate(B.getDate()+1);var q=n(F)-n(B);q>0&&(D+=q)}return new Date(R+P+D)}var L,N,z;return new Date(e)}},function(e,t,r){"use strict";const n=r(0),s=r(1),o=r(3),i=r(10),a=r(31),c=r(2),l=r(13),u={alternatives:r(15),array:r(32),boolean:r(33),binary:r(34),date:r(16),func:r(35),number:r(40),object:r(17),string:r(41),symbol:r(47),callWithDefaults:function(e,t){return n.assert(this,"Must be invoked on a Joi instance."),this._defaults&&(e=this._defaults(e)),e._currentJoi=this,e._init(...t)},root:function(){const e=new s,t=e.clone();return s.prototype._currentJoi=t,t._currentJoi=t,t.any=function(...t){return n.assert(0===t.length,"Joi.any() does not allow arguments."),u.callWithDefaults.call(this,e,t)},t.alternatives=t.alt=function(...e){return u.callWithDefaults.call(this,u.alternatives,e)},t.array=function(...e){return n.assert(0===e.length,"Joi.array() does not allow arguments."),u.callWithDefaults.call(this,u.array,e)},t.boolean=t.bool=function(...e){return n.assert(0===e.length,"Joi.boolean() does not allow arguments."),u.callWithDefaults.call(this,u.boolean,e)},t.binary=function(...e){return n.assert(0===e.length,"Joi.binary() does not allow arguments."),u.callWithDefaults.call(this,u.binary,e)},t.date=function(...e){return n.assert(0===e.length,"Joi.date() does not allow arguments."),u.callWithDefaults.call(this,u.date,e)},t.func=function(...e){return n.assert(0===e.length,"Joi.func() does not allow arguments."),u.callWithDefaults.call(this,u.func,e)},t.number=function(...e){return n.assert(0===e.length,"Joi.number() does not allow arguments."),u.callWithDefaults.call(this,u.number,e)},t.object=function(...e){return u.callWithDefaults.call(this,u.object,e)},t.string=function(...e){return n.assert(0===e.length,"Joi.string() does not allow arguments."),u.callWithDefaults.call(this,u.string,e)},t.symbol=function(...e){return n.assert(0===e.length,"Joi.symbol() does not allow arguments."),u.callWithDefaults.call(this,u.symbol,e)},t.ref=function(...e){return c.create(...e)},t.isRef=function(e){return c.isRef(e)},t.validate=function(r,...n){const s=n[n.length-1],o="function"==typeof s?s:null,i=n.length-(o?1:0);if(0===i)return e.validate(r,o);const a=2===i?n[1]:void 0;return t.compile(n[0])._validateWithOptions(r,a,o)},t.describe=function(...r){return(r.length?t.compile(r[0]):e).describe()},t.compile=function(e){try{return o.schema(this,e)}catch(e){throw e.hasOwnProperty("path")&&(e.message=e.message+"("+e.path+")"),e}},t.assert=function(e,r,n){t.attempt(e,r,n)},t.attempt=function(e,r,n){const s=t.validate(e,r),o=s.error;if(o){if(!n)throw"function"==typeof o.annotate&&(o.message=o.annotate()),o;if(!(n instanceof Error))throw"function"==typeof o.annotate&&(o.message=`${n} ${o.annotate()}`),o;throw n}return s.value},t.reach=function(e,t){n.assert(e&&e instanceof s,"you must provide a joi schema"),n.assert(Array.isArray(t)||"string"==typeof t,"path must be a string or an array of strings");const r=(e,t)=>{if(!t.length)return e;const n=e._inner.children;if(!n)return;const s=t.shift();for(let e=0;e<n.length;++e){const o=n[e];if(o.key===s)return r(o.schema,t)}},o="string"==typeof t?t?t.split("."):[]:t.slice();return r(e,o)},t.lazy=function(e){return a.set(e)},t.defaults=function(e){n.assert("function"==typeof e,"Defaults must be a function");let t=Object.create(this.any());return t=e(t),n.assert(t&&t instanceof this.constructor,"defaults() must return a schema"),Object.assign(t,this,t.clone()),t._defaults=(t=>(this._defaults&&(t=this._defaults(t),n.assert(t instanceof this.constructor,"defaults() must return a schema")),t=e(t),n.assert(t instanceof this.constructor,"defaults() must return a schema"),t)),t},t.extend=function(...e){const r=n.flatten(e);n.assert(r.length>0,"You need to provide at least one extension"),this.assert(r,t.extensionsSchema);const a=Object.create(this.any());Object.assign(a,this);for(let e=0;e<r.length;++e){let f=r[e];"function"==typeof f&&(f=f(a)),this.assert(f,t.extensionSchema);const p=(f.base||this.any()).clone(),h=p.constructor,d=class extends h{constructor(){super(),f.base&&Object.assign(this,p),this._type=f.name,f.language&&(this._settings=l.concat(this._settings,{language:{[f.name]:f.language}}))}};if(f.coerce&&(d.prototype._coerce=function(e,t,r){if(h.prototype._coerce){const n=h.prototype._coerce.call(this,e,t,r);if(n.errors)return n;e=n.value}const n=f.coerce.call(this,e,t,r);return n instanceof i.Err?{value:e,errors:n}:{value:n}}),f.pre&&(d.prototype._base=function(e,t,r){if(h.prototype._base){const n=h.prototype._base.call(this,e,t,r);if(n.errors)return n;e=n.value}const n=f.pre.call(this,e,t,r);return n instanceof i.Err?{value:e,errors:n}:{value:n}}),f.rules)for(let e=0;e<f.rules.length;++e){const t=f.rules[e],r=t.params?t.params instanceof s?t.params._inner.children.map(e=>e.key):Object.keys(t.params):[],i=t.params?o.schema(this,t.params):null;d.prototype[t.name]=function(...e){if(e.length>r.length)throw new Error("Unexpected number of arguments");let o,l=!1,u={};for(let t=0;t<r.length;++t)u[r[t]]=e[t],!l&&c.isRef(e[t])&&(l=!0);if(i&&(u=a.attempt(u,i)),t.validate){const e=function(e,r,n){return t.validate.call(this,u,e,r,n)};o=this._test(t.name,u,e,{description:t.description,hasRef:l})}else o=this.clone();if(t.setup){const e=t.setup.call(o,u);void 0!==e&&(n.assert(e instanceof s,`Setup of extension Joi.${this._type}().${t.name}() must return undefined or a Joi object`),o=e)}return o}}f.describe&&(d.prototype.describe=function(){const e=h.prototype.describe.call(this);return f.describe.call(this,e)});const m=new d;a[f.name]=function(...e){return u.callWithDefaults.call(this,m,e)}}return a},t.extensionSchema=u.object.keys({base:u.object.type(s,"Joi object"),name:u.string.required(),coerce:u.func.arity(3),pre:u.func.arity(3),language:u.object,describe:u.func.arity(1),rules:u.array.items(u.object.keys({name:u.string.required(),setup:u.func.arity(1),validate:u.func.arity(4),params:[u.object.pattern(/.*/,u.object.type(s,"Joi object")),u.object.type(u.object.constructor,"Joi object")],description:[u.string,u.func.arity(1)]}).or("setup","validate"))}).strict(),t.extensionsSchema=u.array.items([u.object,u.func.arity(1)]).strict(),t.version=r(48).version,t}};e.exports=u.root()},function(e,t,r){"use strict";const n=r(0);t.concat=function(e,t){if(!t)return e;const r=Object.assign({},e),s=Object.keys(t);for(let e=0;e<s.length;++e){const o=s[e];"language"===o&&r.hasOwnProperty(o)?r[o]=n.applyToDefaults(r[o],t[o]):r[o]=t[o]}return r}},function(e,t,r){"use strict";const n=r(2),s={extendedCheckForValue:function(e,t){const r=typeof e;if("object"===r){if(e instanceof Date)return t=>t instanceof Date&&e.getTime()===t.getTime();if(Buffer.isBuffer(e))return t=>Buffer.isBuffer(t)&&e.length===t.length&&e.toString("binary")===t.toString("binary")}else if(t&&"string"===r){const t=e.toLowerCase();return e=>"string"==typeof e&&t===e.toLowerCase()}return null}};e.exports=class e{constructor(e){this._set=new Set(e),this._hasRef=!1}add(e,t){const r=n.isRef(e);return!r&&this.has(e,null,null,!1)?this:(void 0!==t&&n.push(t,e),this._set.add(e),this._hasRef|=r,this)}merge(e,t){for(const t of e._set)this.add(t);for(const e of t._set)this.remove(e);return this}remove(e){return this._set.delete(e),this}has(e,t,r,o){if(!this._set.size)return!1;const i=this._set.has(e);if(i)return i;const a=s.extendedCheckForValue(e,o);if(!a){if(t&&this._hasRef)for(let s of this._set)if(n.isRef(s)&&(e===(s=s(t.reference||t.parent,r))||Array.isArray(s)&&s.includes(e)))return!0;return!1}return this._has(e,t,r,a)}_has(e,t,r,s){const o=!(!t||!this._hasRef),i=function(t){return e===t||s(t)};for(let e of this._set)if(o&&n.isRef(e)&&(e=e(t.reference||t.parent,r),Array.isArray(e))){if(e.find(i))return!0}else if(i(e))return!0;return!1}values(e){if(e&&e.stripUndefined){const e=[];for(const t of this._set)void 0!==t&&e.push(t);return e}return Array.from(this._set)}slice(){const t=new e(this._set);return t._hasRef=this._hasRef,t}concat(t){const r=new e([...this._set,...t._set]);return r._hasRef=!!(this._hasRef|t._hasRef),r}}},function(e,t,r){"use strict";const n=r(0),s=r(1),o=r(3),i=r(2),a={};a.Alternatives=class extends s{constructor(){super(),this._type="alternatives",this._invalids.remove(null),this._inner.matches=[]}_init(...e){return e.length?this.try(...e):this}_base(e,t,r){let n=[];const s=this._inner.matches.length,o=this._baseType;for(let i=0;i<s;++i){const a=this._inner.matches[i];if(!a.schema){const n=a.peek||a.is,c=a.is?a.ref(t.reference||t.parent,r):e;if(n._validate(c,null,r,t.parent).errors){if(a.otherwise)return a.otherwise._validate(e,t,r)}else if(a.then)return a.then._validate(e,t,r);if(i===s-1&&o)return o._validate(e,t,r);continue}const c=a.schema._validate(e,t,r);if(!c.errors)return c;n=n.concat(c.errors)}return n.length?{errors:this.createError("alternatives.child",{reason:n},t,r)}:{errors:this.createError("alternatives.base",null,t,r)}}try(...e){e=n.flatten(e),n.assert(e.length,"Cannot add other alternatives without at least one schema");const t=this.clone();for(let r=0;r<e.length;++r){const n=o.schema(this._currentJoi,e[r]);n._refs.length&&(t._refs=t._refs.concat(n._refs)),t._inner.matches.push({schema:n})}return t}when(e,t){let r=!1;n.assert(i.isRef(e)||"string"==typeof e||(r=e instanceof s),"Invalid condition:",e),n.assert(t,"Missing options"),n.assert("object"==typeof t,"Invalid options"),r?n.assert(!t.hasOwnProperty("is"),'"is" can not be used with a schema condition'):n.assert(t.hasOwnProperty("is"),'Missing "is" directive'),n.assert(void 0!==t.then||void 0!==t.otherwise,'options must have at least one of "then" or "otherwise"');const a=this.clone();let c;r||(c=o.schema(this._currentJoi,t.is),null!==t.is&&(i.isRef(t.is)||t.is instanceof s)||(c=c.required()));const l={ref:r?null:o.ref(e),peek:r?e:null,is:c,then:void 0!==t.then?o.schema(this._currentJoi,t.then):void 0,otherwise:void 0!==t.otherwise?o.schema(this._currentJoi,t.otherwise):void 0};return a._baseType&&(l.then=l.then&&a._baseType.concat(l.then),l.otherwise=l.otherwise&&a._baseType.concat(l.otherwise)),r||(i.push(a._refs,l.ref),a._refs=a._refs.concat(l.is._refs)),l.then&&l.then._refs&&(a._refs=a._refs.concat(l.then._refs)),l.otherwise&&l.otherwise._refs&&(a._refs=a._refs.concat(l.otherwise._refs)),a._inner.matches.push(l),a}describe(){const e=super.describe(),t=[];for(let e=0;e<this._inner.matches.length;++e){const r=this._inner.matches[e];if(r.schema)t.push(r.schema.describe());else{const e=r.is?{ref:r.ref.toString(),is:r.is.describe()}:{peek:r.peek.describe()};r.then&&(e.then=r.then.describe()),r.otherwise&&(e.otherwise=r.otherwise.describe()),t.push(e)}}return e.alternatives=t,e}},e.exports=new a.Alternatives},function(e,t,r){"use strict";const n=r(1),s=r(2),o=r(0),i={isoDate:/^(?:[-+]\d{2})?(?:\d{4}(?!\d{2}\b))(?:(-?)(?:(?:0[1-9]|1[0-2])(?:\1(?:[12]\d|0[1-9]|3[01]))?|W(?:[0-4]\d|5[0-2])(?:-?[1-7])?|(?:00[1-9]|0[1-9]\d|[12]\d{2}|3(?:[0-5]\d|6[1-6])))(?![T]$|[T][\d]+Z$)(?:[T\s](?:(?:(?:[01]\d|2[0-3])(?:(:?)[0-5]\d)?|24\:?00)(?:[.,]\d+(?!:))?)(?:\2[0-5]\d(?:[.,]\d+)?)?(?:[Z]|(?:[+-])(?:[01]\d|2[0-3])(?::?[0-5]\d)?)?)?)?$/};i.invalidDate=new Date(""),i.isIsoDate=(()=>{const e=i.isoDate.toString();return t=>t&&t.toString()===e})(),i.Date=class extends n{constructor(){super(),this._type="date"}_base(e,t,r){const n={value:r.convert&&i.Date.toDate(e,this._flags.format,this._flags.timestamp,this._flags.multiplier)||e};if(n.value instanceof Date&&!isNaN(n.value.getTime()))n.errors=null;else if(r.convert){let e;e=i.isIsoDate(this._flags.format)?"isoDate":this._flags.timestamp?`timestamp.${this._flags.timestamp}`:"base",n.errors=this.createError(`date.${e}`,null,t,r)}else n.errors=this.createError("date.strict",null,t,r);return n}static toDate(e,t,r,n){if(e instanceof Date)return e;if("string"==typeof e||"number"==typeof e&&!isNaN(e)&&isFinite(e)){let s;if("string"==typeof e&&/^[+-]?\d+(\.\d+)?$/.test(e)&&(e=parseFloat(e)),s=t&&i.isIsoDate(t)?t.test(e)?new Date(e):i.invalidDate:r&&n?/^\s*$/.test(e)?i.invalidDate:new Date(e*n):new Date(e),!isNaN(s.getTime()))return s}return null}iso(){if(this._flags.format===i.isoDate)return this;const e=this.clone();return e._flags.format=i.isoDate,e}timestamp(e="javascript"){const t=["javascript","unix"];if(o.assert(t.includes(e),'"type" must be one of "'+t.join('", "')+'"'),this._flags.timestamp===e)return this;const r=this.clone();return r._flags.timestamp=e,r._flags.multiplier="unix"===e?1e3:1,r}_isIsoDate(e){return i.isoDate.test(e)}},i.compare=function(e,t){return function(r){const n="now"===r,a=s.isRef(r);return n||a||(r=i.Date.toDate(r)),o.assert(r,"Invalid date format"),this._test(e,r,function(s,o,c){let l;if(n)l=Date.now();else if(a){if(!(l=i.Date.toDate(r(o.reference||o.parent,c))))return this.createError("date.ref",{ref:r.key},o,c);l=l.getTime()}else l=r.getTime();return t(s.getTime(),l)?s:this.createError("date."+e,{limit:new Date(l)},o,c)})}},i.Date.prototype.min=i.compare("min",(e,t)=>e>=t),i.Date.prototype.max=i.compare("max",(e,t)=>e<=t),i.Date.prototype.greater=i.compare("greater",(e,t)=>e>t),i.Date.prototype.less=i.compare("less",(e,t)=>e<t),e.exports=new i.Date},function(e,t,r){"use strict";const n=r(0),s=r(36),o=r(1),i=r(10),a=r(3),c={};c.Object=class extends o{constructor(){super(),this._type="object",this._inner.children=null,this._inner.renames=[],this._inner.dependencies=[],this._inner.patterns=[]}_init(...e){return e.length?this.keys(...e):this}_base(e,t,r){let s=e;const o=[],a=()=>({value:s,errors:o.length?o:null});"string"==typeof e&&r.convert&&(e=c.safeParse(e));const l=this._flags.func?"function":"object";if(!e||typeof e!==l||Array.isArray(e))return o.push(this.createError(l+".base",null,t,r)),a();if(!(this._inner.renames.length||this._inner.dependencies.length||this._inner.children||this._inner.patterns.length))return s=e,a();if(s===e){"object"===l?s=Object.create(Object.getPrototypeOf(e)):(s=function(...t){return e.apply(this,t)}).prototype=n.clone(e.prototype);const t=Object.keys(e);for(let r=0;r<t.length;++r)s[t[r]]=e[t[r]]}else s=e;const u={};for(let e=0;e<this._inner.renames.length;++e){const n=this._inner.renames[e];if(n.isRegExp){const e=Object.keys(s),i=[];for(let t=0;t<e.length;++t)n.from.test(e[t])&&i.push(e[t]);const c=i.every(e=>void 0===s[e]);if(n.options.ignoreUndefined&&c)continue;if(!n.options.multiple&&u[n.to]&&(o.push(this.createError("object.rename.regex.multiple",{from:i,to:n.to},t,r)),r.abortEarly))return a();if(Object.prototype.hasOwnProperty.call(s,n.to)&&!n.options.override&&!u[n.to]&&(o.push(this.createError("object.rename.regex.override",{from:i,to:n.to},t,r)),r.abortEarly))return a();if(c?delete s[n.to]:s[n.to]=s[i[i.length-1]],u[n.to]=!0,!n.options.alias)for(let e=0;e<i.length;++e)delete s[i[e]]}else{if(n.options.ignoreUndefined&&void 0===s[n.from])continue;if(!n.options.multiple&&u[n.to]&&(o.push(this.createError("object.rename.multiple",{from:n.from,to:n.to},t,r)),r.abortEarly))return a();if(Object.prototype.hasOwnProperty.call(s,n.to)&&!n.options.override&&!u[n.to]&&(o.push(this.createError("object.rename.override",{from:n.from,to:n.to},t,r)),r.abortEarly))return a();void 0===s[n.from]?delete s[n.to]:s[n.to]=s[n.from],u[n.to]=!0,n.options.alias||delete s[n.from]}}if(!this._inner.children&&!this._inner.patterns.length&&!this._inner.dependencies.length)return a();const f=new Set(Object.keys(s));if(this._inner.children){const e=[];for(let n=0;n<this._inner.children.length;++n){const i=this._inner.children[n],c=i.key,l=s[c];f.delete(c);const u={key:c,path:t.path.concat(c),parent:s,reference:t.reference},p=i.schema._validate(l,u,r);if(p.errors){if(o.push(this.createError("object.child",{key:c,child:i.schema._getLabel(c),reason:p.errors},u,r)),r.abortEarly)return a()}else i.schema._flags.strip||void 0===p.value&&p.value!==l?(e.push(c),s[c]=p.finalValue):void 0!==p.value&&(s[c]=p.value)}for(let t=0;t<e.length;++t)delete s[e[t]]}if(f.size&&this._inner.patterns.length)for(const e of f){const n={key:e,path:t.path.concat(e),parent:s,reference:t.reference},i=s[e];for(let t=0;t<this._inner.patterns.length;++t){const c=this._inner.patterns[t];if(c.regex?c.regex.test(e):!c.schema.validate(e).error){f.delete(e);const t=c.rule._validate(i,n,r);if(t.errors&&(o.push(this.createError("object.child",{key:e,child:c.rule._getLabel(e),reason:t.errors},n,r)),r.abortEarly))return a();s[e]=t.value}}}if(f.size&&(this._inner.children||this._inner.patterns.length)){if(r.stripUnknown&&!0!==this._flags.allowUnknown||r.skipFunctions){const e=!!r.stripUnknown&&(!0===r.stripUnknown||!!r.stripUnknown.objects);for(const t of f)e?(delete s[t],f.delete(t)):"function"==typeof s[t]&&f.delete(t)}if(void 0!==this._flags.allowUnknown?!this._flags.allowUnknown:!r.allowUnknown)for(const e of f)o.push(this.createError("object.allowUnknown",{child:e},{key:e,path:t.path.concat(e)},r,{}))}for(let e=0;e<this._inner.dependencies.length;++e){const n=this._inner.dependencies[e],l=c[n.type].call(this,null!==n.key&&s[n.key],n.peers,s,{key:n.key,path:null===n.key?t.path:t.path.concat(n.key)},r);if(l instanceof i.Err&&(o.push(l),r.abortEarly))return a()}return a()}keys(e){n.assert(null==e||"object"==typeof e,"Object schema must be a valid object"),n.assert(!(e&&e instanceof o),"Object schema cannot be a joi schema");const t=this.clone();if(!e)return t._inner.children=null,t;const r=Object.keys(e);if(!r.length)return t._inner.children=[],t;const i=new s;if(t._inner.children)for(let e=0;e<t._inner.children.length;++e){const n=t._inner.children[e];r.includes(n.key)||i.add(n,{after:n._refs,group:n.key})}for(let t=0;t<r.length;++t){const n=r[t],s=e[n];try{const e=a.schema(this._currentJoi,s);i.add({key:n,schema:e},{after:e._refs,group:n})}catch(e){throw e.hasOwnProperty("path")?e.path=n+"."+e.path:e.path=n,e}}return t._inner.children=i.nodes,t}append(e){return null==e||0===Object.keys(e).length?this:this.keys(e)}unknown(e){const t=!1!==e;if(this._flags.allowUnknown===t)return this;const r=this.clone();return r._flags.allowUnknown=t,r}length(e){return n.assert(Number.isSafeInteger(e)&&e>=0,"limit must be a positive integer"),this._test("length",e,function(t,r,n){return Object.keys(t).length===e?t:this.createError("object.length",{limit:e},r,n)})}min(e){return n.assert(Number.isSafeInteger(e)&&e>=0,"limit must be a positive integer"),this._test("min",e,function(t,r,n){return Object.keys(t).length>=e?t:this.createError("object.min",{limit:e},r,n)})}max(e){return n.assert(Number.isSafeInteger(e)&&e>=0,"limit must be a positive integer"),this._test("max",e,function(t,r,n){return Object.keys(t).length<=e?t:this.createError("object.max",{limit:e},r,n)})}pattern(e,t){const r=e instanceof RegExp;n.assert(r||e instanceof o,"pattern must be a regex or schema"),n.assert(void 0!==t,"Invalid rule"),r&&(e=new RegExp(e.source,e.ignoreCase?"i":void 0));try{t=a.schema(this._currentJoi,t)}catch(e){throw e.hasOwnProperty("path")&&(e.message=e.message+"("+e.path+")"),e}const s=this.clone();return r?s._inner.patterns.push({regex:e,rule:t}):s._inner.patterns.push({schema:e,rule:t}),s}schema(){return this._test("schema",null,function(e,t,r){return e instanceof o?e:this.createError("object.schema",null,t,r)})}with(e,t){return n.assert(2===arguments.length,"Invalid number of arguments, expected 2."),this._dependency("with",e,t)}without(e,t){return n.assert(2===arguments.length,"Invalid number of arguments, expected 2."),this._dependency("without",e,t)}xor(...e){return e=n.flatten(e),this._dependency("xor",null,e)}or(...e){return e=n.flatten(e),this._dependency("or",null,e)}and(...e){return e=n.flatten(e),this._dependency("and",null,e)}nand(...e){return e=n.flatten(e),this._dependency("nand",null,e)}requiredKeys(...e){return e=n.flatten(e),this.applyFunctionToChildren(e,"required")}optionalKeys(...e){return e=n.flatten(e),this.applyFunctionToChildren(e,"optional")}forbiddenKeys(...e){return e=n.flatten(e),this.applyFunctionToChildren(e,"forbidden")}rename(e,t,r){n.assert("string"==typeof e||e instanceof RegExp,"Rename missing the from argument"),n.assert("string"==typeof t,"Rename missing the to argument"),n.assert(t!==e,"Cannot rename key to same name:",e);for(let t=0;t<this._inner.renames.length;++t)n.assert(this._inner.renames[t].from!==e,"Cannot rename the same key multiple times");const s=this.clone();return s._inner.renames.push({from:e,to:t,options:n.applyToDefaults(c.renameDefaults,r||{}),isRegExp:e instanceof RegExp}),s}applyFunctionToChildren(e,t,r,s){e=[].concat(e),n.assert(e.length>0,"expected at least one children");const o=c.groupChildren(e);let i;if(""in o?(i=this[t].apply(this,r),delete o[""]):i=this.clone(),i._inner.children){s=s?s+".":"";for(let e=0;e<i._inner.children.length;++e){const n=i._inner.children[e],a=o[n.key];a&&(i._inner.children[e]={key:n.key,_refs:n._refs,schema:n.schema.applyFunctionToChildren(a,t,r,s+n.key)},delete o[n.key])}}const a=Object.keys(o);return n.assert(0===a.length,"unknown key(s)",a.join(", ")),i}_dependency(e,t,r){r=[].concat(r);for(let t=0;t<r.length;++t)n.assert("string"==typeof r[t],e,"peers must be a string or array of strings");const s=this.clone();return s._inner.dependencies.push({type:e,key:t,peers:r}),s}describe(e){const t=super.describe();if(t.rules)for(let e=0;e<t.rules.length;++e){const r=t.rules[e];r.arg&&"object"==typeof r.arg&&r.arg.schema&&r.arg.ref&&(r.arg={schema:r.arg.schema.describe(),ref:r.arg.ref.toString()})}if(this._inner.children&&!e){t.children={};for(let e=0;e<this._inner.children.length;++e){const r=this._inner.children[e];t.children[r.key]=r.schema.describe()}}if(this._inner.dependencies.length&&(t.dependencies=n.clone(this._inner.dependencies)),this._inner.patterns.length){t.patterns=[];for(let e=0;e<this._inner.patterns.length;++e){const r=this._inner.patterns[e];r.regex?t.patterns.push({regex:r.regex.toString(),rule:r.rule.describe()}):t.patterns.push({schema:r.schema.describe(),rule:r.rule.describe()})}}return this._inner.renames.length>0&&(t.renames=n.clone(this._inner.renames)),t}assert(e,t,r){e=a.ref(e),n.assert(e.isContext||e.depth>1,"Cannot use assertions for root level references - use direct key rules instead"),r=r||"pass the assertion test";try{t=a.schema(this._currentJoi,t)}catch(e){throw e.hasOwnProperty("path")&&(e.message=e.message+"("+e.path+")"),e}const s=e.path[e.path.length-1],o=e.path.join(".");return this._test("assert",{schema:t,ref:e},function(i,a,c){if(!t._validate(e(i),null,c,i).errors)return i;const l=n.merge({},a);return l.key=s,l.path=e.path,this.createError("object.assert",{ref:o,message:r},l,c)})}type(e,t=e.name){n.assert("function"==typeof e,"type must be a constructor function");const r={name:t,ctor:e};return this._test("type",r,function(t,n,s){return t instanceof e?t:this.createError("object.type",{type:r.name},n,s)})}},c.safeParse=function(e){try{return JSON.parse(e)}catch(e){}return e},c.renameDefaults={alias:!1,multiple:!1,override:!1},c.groupChildren=function(e){e.sort();const t={};for(let r=0;r<e.length;++r){const s=e[r];n.assert("string"==typeof s,"children must be strings");const o=s.split(".")[0];(t[o]=t[o]||[]).push(s.substring(o.length+1))}return t},c.keysToLabels=function(e,t){const r=e._inner.children;if(!r)return t;const n=function(e){const t=r.find(t=>t.key===e);return t?t.schema._getLabel(e):e};return Array.isArray(t)?t.map(n):n(t)},c.with=function(e,t,r,n,s){if(void 0===e)return e;for(let e=0;e<t.length;++e){const o=t[e];if(!Object.prototype.hasOwnProperty.call(r,o)||void 0===r[o])return this.createError("object.with",{main:n.key,mainWithLabel:c.keysToLabels(this,n.key),peer:o,peerWithLabel:c.keysToLabels(this,o)},n,s)}return e},c.without=function(e,t,r,n,s){if(void 0===e)return e;for(let e=0;e<t.length;++e){const o=t[e];if(Object.prototype.hasOwnProperty.call(r,o)&&void 0!==r[o])return this.createError("object.without",{main:n.key,mainWithLabel:c.keysToLabels(this,n.key),peer:o,peerWithLabel:c.keysToLabels(this,o)},n,s)}return e},c.xor=function(e,t,r,n,s){const o=[];for(let e=0;e<t.length;++e){const n=t[e];Object.prototype.hasOwnProperty.call(r,n)&&void 0!==r[n]&&o.push(n)}if(1===o.length)return e;const i={peers:t,peersWithLabels:c.keysToLabels(this,t)};return 0===o.length?this.createError("object.missing",i,n,s):this.createError("object.xor",i,n,s)},c.or=function(e,t,r,n,s){for(let n=0;n<t.length;++n){const s=t[n];if(Object.prototype.hasOwnProperty.call(r,s)&&void 0!==r[s])return e}return this.createError("object.missing",{peers:t,peersWithLabels:c.keysToLabels(this,t)},n,s)},c.and=function(e,t,r,n,s){const o=[],i=[],a=t.length;for(let e=0;e<a;++e){const n=t[e];Object.prototype.hasOwnProperty.call(r,n)&&void 0!==r[n]?i.push(n):o.push(n)}if(!(o.length===a||i.length===a))return this.createError("object.and",{present:i,presentWithLabels:c.keysToLabels(this,i),missing:o,missingWithLabels:c.keysToLabels(this,o)},n,s)},c.nand=function(e,t,r,s,o){const i=[];for(let e=0;e<t.length;++e){const n=t[e];Object.prototype.hasOwnProperty.call(r,n)&&void 0!==r[n]&&i.push(n)}const a=n.clone(t),l=a.splice(0,1)[0];return i.length===t.length?this.createError("object.nand",{main:l,mainWithLabel:c.keysToLabels(this,l),peers:a,peersWithLabels:c.keysToLabels(this,a)},s,o):null},e.exports=new c.Object},function(e,t,r){"use strict";const n={rfc3986:{},generate:function(){const e="|";n.rfc3986.ipv4Cidr="[0-9]|[1-2][0-9]|3[0-2]",n.rfc3986.ipv6Cidr="(?:0?0?[0-9]|0?[1-9][0-9]|1[01][0-9]|12[0-8])";const t="a-zA-Z0-9-\\._~",r="!\\$&'\\(\\)\\*\\+,;=",s=t+"%0-9A-Fa-f"+r+":@",o="["+s+"]",i="(?:0?0?[0-9]|0?[1-9][0-9]|1[0-9][0-9]|2[0-4][0-9]|25[0-5])";n.rfc3986.IPv4address="(?:"+i+"\\.){3}"+i;const a="[0-9A-Fa-f]{1,4}",c="(?:"+a+":"+a+"|"+n.rfc3986.IPv4address+")",l="(?:"+a+":){6}"+c,u="::(?:"+a+":){5}"+c,f="(?:"+a+")?::(?:"+a+":){4}"+c,p="(?:(?:"+a+":){0,1}"+a+")?::(?:"+a+":){3}"+c,h="(?:(?:"+a+":){0,2}"+a+")?::(?:"+a+":){2}"+c,d="(?:(?:"+a+":){0,3}"+a+")?::"+a+":"+c,m="(?:(?:"+a+":){0,4}"+a+")?::"+c;n.rfc3986.IPv6address="(?:"+l+e+u+e+f+e+p+e+h+e+d+e+m+e+"(?:(?:[0-9A-Fa-f]{1,4}:){0,5}[0-9A-Fa-f]{1,4})?::[0-9A-Fa-f]{1,4}"+e+"(?:(?:[0-9A-Fa-f]{1,4}:){0,6}[0-9A-Fa-f]{1,4})?::)",n.rfc3986.IPvFuture="v[0-9A-Fa-f]+\\.["+t+r+":]+",n.rfc3986.scheme="[a-zA-Z][a-zA-Z0-9+-\\.]*";const g="(?:[a-zA-Z0-9-\\._~%0-9A-Fa-f!\\$&'\\(\\)\\*\\+,;=:]*@)?"+("(?:"+("\\[(?:"+n.rfc3986.IPv6address+e+n.rfc3986.IPvFuture+")\\]")+e+n.rfc3986.IPv4address+e+"[a-zA-Z0-9-\\._~%0-9A-Fa-f!\\$&'\\(\\)\\*\\+,;=]{0,255})")+"(?::[0-9]*)?",y=o+"+",b="(?:\\/[a-zA-Z0-9-\\._~%0-9A-Fa-f!\\$&'\\(\\)\\*\\+,;=:@]*)*",v="\\/(?:"+y+b+")?";n.rfc3986.hierPart="(?:(?:\\/\\/"+g+b+")"+e+v+e+"[a-zA-Z0-9-\\._~%0-9A-Fa-f!\\$&'\\(\\)\\*\\+,;=:@]+(?:\\/[a-zA-Z0-9-\\._~%0-9A-Fa-f!\\$&'\\(\\)\\*\\+,;=:@]*)*)",n.rfc3986.relativeRef="(?:(?:\\/\\/"+g+b+")"+e+v+e+"[a-zA-Z0-9-\\._~%0-9A-Fa-f!\\$&'\\(\\)\\*\\+,;=@]+(?:\\/[a-zA-Z0-9-\\._~%0-9A-Fa-f!\\$&'\\(\\)\\*\\+,;=:@]*)*"+e+")",n.rfc3986.query="["+s+"\\/\\?]*(?=#|$)",n.rfc3986.queryWithSquareBrackets="["+s+"\\[\\]\\/\\?]*(?=#|$)",n.rfc3986.fragment="["+s+"\\/\\?]*"}};n.generate(),e.exports=n.rfc3986},function(e,t){e.exports=require("url")},function(e,t){e.exports=require("querystring")},function(e,t,r){"use strict";const n=r(55),s={codes:new Map([[100,"Continue"],[101,"Switching Protocols"],[102,"Processing"],[200,"OK"],[201,"Created"],[202,"Accepted"],[203,"Non-Authoritative Information"],[204,"No Content"],[205,"Reset Content"],[206,"Partial Content"],[207,"Multi-Status"],[300,"Multiple Choices"],[301,"Moved Permanently"],[302,"Moved Temporarily"],[303,"See Other"],[304,"Not Modified"],[305,"Use Proxy"],[307,"Temporary Redirect"],[400,"Bad Request"],[401,"Unauthorized"],[402,"Payment Required"],[403,"Forbidden"],[404,"Not Found"],[405,"Method Not Allowed"],[406,"Not Acceptable"],[407,"Proxy Authentication Required"],[408,"Request Time-out"],[409,"Conflict"],[410,"Gone"],[411,"Length Required"],[412,"Precondition Failed"],[413,"Request Entity Too Large"],[414,"Request-URI Too Large"],[415,"Unsupported Media Type"],[416,"Requested Range Not Satisfiable"],[417,"Expectation Failed"],[418,"I'm a teapot"],[422,"Unprocessable Entity"],[423,"Locked"],[424,"Failed Dependency"],[425,"Unordered Collection"],[426,"Upgrade Required"],[428,"Precondition Required"],[429,"Too Many Requests"],[431,"Request Header Fields Too Large"],[451,"Unavailable For Legal Reasons"],[500,"Internal Server Error"],[501,"Not Implemented"],[502,"Bad Gateway"],[503,"Service Unavailable"],[504,"Gateway Time-out"],[505,"HTTP Version Not Supported"],[506,"Variant Also Negotiates"],[507,"Insufficient Storage"],[509,"Bandwidth Limit Exceeded"],[510,"Not Extended"],[511,"Network Authentication Required"]])};e.exports=s.Boom=class extends Error{static[Symbol.hasInstance](e){return s.Boom.isBoom(e)}constructor(e,t={}){if(e instanceof Error)return s.Boom.boomify(n.clone(e),t);const{statusCode:r=500,data:o=null,ctor:i=s.Boom}=t,a=new Error(e||void 0);return Error.captureStackTrace(a,i),a.data=o,s.initialize(a,r),a.typeof=i,t.decorate&&Object.assign(a,t.decorate),a}static isBoom(e){return e instanceof Error&&!!e.isBoom}static boomify(e,t){return n.assert(e instanceof Error,"Cannot wrap non-Error object"),void 0!==(t=t||{}).data&&(e.data=t.data),t.decorate&&Object.assign(e,t.decorate),e.isBoom?!1===t.override||!t.statusCode&&!t.message?e:s.initialize(e,t.statusCode||e.output.statusCode,t.message):s.initialize(e,t.statusCode||500,t.message)}static badRequest(e,t){return new s.Boom(e,{statusCode:400,data:t,ctor:s.Boom.badRequest})}static unauthorized(e,t,r){const o=new s.Boom(e,{statusCode:401,ctor:s.Boom.unauthorized});if(!t)return o;let i="";if("string"==typeof t){if(i=t,(r||e)&&(o.output.payload.attributes={}),r)if("string"==typeof r)i=i+" "+n.escapeHeaderAttribute(r),o.output.payload.attributes=r;else{const e=Object.keys(r);for(let t=0;t<e.length;++t){const s=e[t];t&&(i+=",");let a=r[s];null==a&&(a=""),i=i+" "+s+'="'+n.escapeHeaderAttribute(a.toString())+'"',o.output.payload.attributes[s]=a}}e?(r&&(i+=","),i=i+' error="'+n.escapeHeaderAttribute(e)+'"',o.output.payload.attributes.error=e):o.isMissing=!0}else{const e=t;for(let t=0;t<e.length;++t)t&&(i+=", "),i+=e[t]}return o.output.headers["WWW-Authenticate"]=i,o}static paymentRequired(e,t){return new s.Boom(e,{statusCode:402,data:t,ctor:s.Boom.paymentRequired})}static forbidden(e,t){return new s.Boom(e,{statusCode:403,data:t,ctor:s.Boom.forbidden})}static notFound(e,t){return new s.Boom(e,{statusCode:404,data:t,ctor:s.Boom.notFound})}static methodNotAllowed(e,t,r){const n=new s.Boom(e,{statusCode:405,data:t,ctor:s.Boom.methodNotAllowed});return"string"==typeof r&&(r=[r]),Array.isArray(r)&&(n.output.headers.Allow=r.join(", ")),n}static notAcceptable(e,t){return new s.Boom(e,{statusCode:406,data:t,ctor:s.Boom.notAcceptable})}static proxyAuthRequired(e,t){return new s.Boom(e,{statusCode:407,data:t,ctor:s.Boom.proxyAuthRequired})}static clientTimeout(e,t){return new s.Boom(e,{statusCode:408,data:t,ctor:s.Boom.clientTimeout})}static conflict(e,t){return new s.Boom(e,{statusCode:409,data:t,ctor:s.Boom.conflict})}static resourceGone(e,t){return new s.Boom(e,{statusCode:410,data:t,ctor:s.Boom.resourceGone})}static lengthRequired(e,t){return new s.Boom(e,{statusCode:411,data:t,ctor:s.Boom.lengthRequired})}static preconditionFailed(e,t){return new s.Boom(e,{statusCode:412,data:t,ctor:s.Boom.preconditionFailed})}static entityTooLarge(e,t){return new s.Boom(e,{statusCode:413,data:t,ctor:s.Boom.entityTooLarge})}static uriTooLong(e,t){return new s.Boom(e,{statusCode:414,data:t,ctor:s.Boom.uriTooLong})}static unsupportedMediaType(e,t){return new s.Boom(e,{statusCode:415,data:t,ctor:s.Boom.unsupportedMediaType})}static rangeNotSatisfiable(e,t){return new s.Boom(e,{statusCode:416,data:t,ctor:s.Boom.rangeNotSatisfiable})}static expectationFailed(e,t){return new s.Boom(e,{statusCode:417,data:t,ctor:s.Boom.expectationFailed})}static teapot(e,t){return new s.Boom(e,{statusCode:418,data:t,ctor:s.Boom.teapot})}static badData(e,t){return new s.Boom(e,{statusCode:422,data:t,ctor:s.Boom.badData})}static locked(e,t){return new s.Boom(e,{statusCode:423,data:t,ctor:s.Boom.locked})}static failedDependency(e,t){return new s.Boom(e,{statusCode:424,data:t,ctor:s.Boom.failedDependency})}static preconditionRequired(e,t){return new s.Boom(e,{statusCode:428,data:t,ctor:s.Boom.preconditionRequired})}static tooManyRequests(e,t){return new s.Boom(e,{statusCode:429,data:t,ctor:s.Boom.tooManyRequests})}static illegal(e,t){return new s.Boom(e,{statusCode:451,data:t,ctor:s.Boom.illegal})}static internal(e,t,r=500){return s.serverError(e,t,r,s.Boom.internal)}static notImplemented(e,t){return s.serverError(e,t,501,s.Boom.notImplemented)}static badGateway(e,t){return s.serverError(e,t,502,s.Boom.badGateway)}static serverUnavailable(e,t){return s.serverError(e,t,503,s.Boom.serverUnavailable)}static gatewayTimeout(e,t){return s.serverError(e,t,504,s.Boom.gatewayTimeout)}static badImplementation(e,t){const r=s.serverError(e,t,500,s.Boom.badImplementation);return r.isDeveloperError=!0,r}},s.initialize=function(e,t,r){const o=parseInt(t,10);return n.assert(!isNaN(o)&&o>=400,"First argument must be a number (400+):",t),e.isBoom=!0,e.isServer=o>=500,e.hasOwnProperty("data")||(e.data=null),e.output={statusCode:o,payload:{},headers:{}},e.reformat=s.reformat,r||e.message||(e.reformat(),r=e.output.payload.error),r&&(e.message=r+(e.message?": "+e.message:""),e.output.payload.message=e.message),e.reformat(),e},s.reformat=function(e=!1){this.output.payload.statusCode=this.output.statusCode,this.output.payload.error=s.codes.get(this.output.statusCode)||"Unknown",500===this.output.statusCode&&!0!==e?this.output.payload.message="An internal server error occurred":this.message&&(this.output.payload.message=this.message)},s.serverError=function(e,t,r,n){return t instanceof Error&&!t.isBoom?s.Boom.boomify(t,{statusCode:r,message:e}):new s.Boom(e,{statusCode:r,data:t,ctor:n})}},function(e,t,r){"use strict";const n=r(9);e.exports={}.Payload=class extends n.Readable{constructor(e,t){super();const r=[].concat(e||"");let n=0;for(let e=0;e<r.length;++e){const t=r[e];n+=t.length,r[e]=Buffer.isBuffer(t)?t:Buffer.from(t)}this._data=Buffer.concat(r,n),this._position=0,this._encoding=t||"utf8"}_read(e){const t=this._data.slice(this._position,this._position+e);this.push(t,this._encoding),this._position=this._position+t.length,this._position>=this._data.length&&this.push(null)}}},function(e,t,r){"use strict";"undefined"==typeof process||"renderer"===process.type||!0===process.browser||process.__nwjs?e.exports=r(64):e.exports=r(66)},function(e,t,r){"use strict";e.exports=function(e){function t(e){for(var t=0,r=0;r<e.length;r++)t=(t<<5)-t+e.charCodeAt(r),t|=0;return n.colors[Math.abs(t)%n.colors.length]}function n(e){var r;function i(){if(i.enabled){for(var e=arguments.length,t=new Array(e),s=0;s<e;s++)t[s]=arguments[s];var o=i,a=Number(new Date),c=a-(r||a);o.diff=c,o.prev=r,o.curr=a,r=a,t[0]=n.coerce(t[0]),"string"!=typeof t[0]&&t.unshift("%O");var l=0;t[0]=t[0].replace(/%([a-zA-Z%])/g,function(e,r){if("%%"===e)return e;l++;var s=n.formatters[r];if("function"==typeof s){var i=t[l];e=s.call(o,i),t.splice(l,1),l--}return e}),n.formatArgs.call(o,t),(o.log||n.log).apply(o,t)}}return i.namespace=e,i.enabled=n.enabled(e),i.useColors=n.useColors(),i.color=t(e),i.destroy=s,i.extend=o,"function"==typeof n.init&&n.init(i),n.instances.push(i),i}function s(){var e=n.instances.indexOf(this);return-1!==e&&(n.instances.splice(e,1),!0)}function o(e,t){return n(this.namespace+(void 0===t?":":t)+e)}return n.debug=n,n.default=n,n.coerce=function(e){return e instanceof Error?e.stack||e.message:e},n.disable=function(){n.enable("")},n.enable=function(e){var t;n.save(e),n.names=[],n.skips=[];var r=("string"==typeof e?e:"").split(/[\s,]+/),s=r.length;for(t=0;t<s;t++)r[t]&&("-"===(e=r[t].replace(/\*/g,".*?"))[0]?n.skips.push(new RegExp("^"+e.substr(1)+"$")):n.names.push(new RegExp("^"+e+"$")));for(t=0;t<n.instances.length;t++){var o=n.instances[t];o.enabled=n.enabled(o.namespace)}},n.enabled=function(e){if("*"===e[e.length-1])return!0;var t,r;for(t=0,r=n.skips.length;t<r;t++)if(n.skips[t].test(e))return!1;for(t=0,r=n.names.length;t<r;t++)if(n.names[t].test(e))return!0;return!1},n.humanize=r(65),Object.keys(e).forEach(function(t){n[t]=e[t]}),n.instances=[],n.names=[],n.skips=[],n.formatters={},n.selectColor=t,n.enable(n.load()),n}},function(e,t){e.exports=function(e){return e instanceof Date}},function(e,t,r){"use strict";const n=r(12),s=r(49),o=r(72),i=r(73),a=r(79),c=/^[\x20-\x7E]*$/,l=n.object().keys({client:n.object().keys({id:n.string().regex(c).allow(""),secret:n.string().regex(c).allow(""),secretParamName:n.string().default("client_secret"),idParamName:n.string().default("client_id")}).required(),auth:n.object().keys({tokenHost:n.string().required().uri({scheme:["http","https"]}),tokenPath:n.string().default("/oauth/token"),revokePath:n.string().default("/oauth/revoke"),authorizeHost:n.string().default(n.ref("tokenHost")),authorizePath:n.string().default("/oauth/authorize")}).required(),http:n.object().unknown(!0),options:n.object().keys({bodyFormat:n.any().only("form","json").default("form"),authorizationMethod:n.any().only("header","body").default("header")}).default()});e.exports={create(e={}){const t=n.attempt(e,l,"Invalid options provided to simple-oauth2");return{accessToken:i(t),ownerPassword:o(t),authorizationCode:s(t),clientCredentials:a(t)}}}},function(e,t,r){"use strict";r.r(t);var n=r(26),s=r.n(n);["MS_APP_ID","MS_APP_PASSWORD","MS_APP_SCOPES","MS_REDIRECT_URI"].forEach(e=>{if(!process.env[e])throw new Error(`Config Error: ${e} is required`)}),t.default=(e=>{const t=e("auth","debug"),r=(e("auth","error"),{client:{id:process.env.MS_APP_ID,secret:process.env.MS_APP_PASSWORD},auth:{tokenHost:"https://login.microsoftonline.com",authorizePath:"common/oauth2/v2.0/authorize",tokenPath:"common/oauth2/v2.0/token"}}),n=s.a.create(r);return{getAuthUrl:e=>{const r=n.authorizationCode.authorizeURL({redirect_uri:process.env.MS_REDIRECT_URI,scope:process.env.MS_APP_SCOPES,state:e});return t(`Generated auth url: ${r}`),r},getTokenFromCode:async e=>{const r=await n.authorizationCode.getToken({code:e,redirect_uri:process.env.MS_REDIRECT_URI,scope:process.env.MS_APP_SCOPES}),s=n.accessToken.create(r);return t("Token created"),{token:s.token.access_token,refresh:s.token.refresh_token,expires:s.token.expires_at.getTime()}},refreshToken:async e=>{const t=await n.accessToken.create({refresh_token:e}).refresh();return{token:t.token.access_token,refreshToken:t.token.refresh_token,tokenExpires:t.token.expires_at.getTime()}},getUserToken:getUserToken}})},function(e,t,r){"use strict";const n={};t.escapeJavaScript=function(e){if(!e)return"";let t="";for(let r=0;r<e.length;++r){const s=e.charCodeAt(r);n.isSafe(s)?t+=e[r]:t+=n.escapeJavaScriptChar(s)}return t},t.escapeHtml=function(e){if(!e)return"";let t="";for(let r=0;r<e.length;++r){const s=e.charCodeAt(r);n.isSafe(s)?t+=e[r]:t+=n.escapeHtmlChar(s)}return t},t.escapeJson=function(e){if(!e)return"";let t;return e.replace(/[<>&\u2028\u2029]/g,e=>60===(t=e.charCodeAt(0))?"\\u003c":62===t?"\\u003e":38===t?"\\u0026":8232===t?"\\u2028":"\\u2029")},n.escapeJavaScriptChar=function(e){if(e>=256)return"\\u"+n.padLeft(""+e,4);const t=Buffer.from(String.fromCharCode(e),"ascii").toString("hex");return"\\x"+n.padLeft(t,2)},n.escapeHtmlChar=function(e){const t=n.namedHtml[e];if(void 0!==t)return t;if(e>=256)return"&#"+e+";";const r=Buffer.from(String.fromCharCode(e),"ascii").toString("hex");return"&#x"+n.padLeft(r,2)+";"},n.padLeft=function(e,t){for(;e.length<t;)e="0"+e;return e},n.isSafe=function(e){return void 0!==n.safeCharCodes[e]},n.namedHtml={38:"&amp;",60:"&lt;",62:"&gt;",34:"&quot;",160:"&nbsp;",162:"&cent;",163:"&pound;",164:"&curren;",169:"&copy;",174:"&reg;"},n.safeCharCodes=function(){const e={};for(let t=32;t<123;++t)(t>=97||t>=65&&t<=90||t>=48&&t<=57||32===t||46===t||44===t||45===t||58===t||95===t)&&(e[t]=null);return e}()},function(e,t,r){"use strict";t.errors={root:"value",key:'"{{!label}}" ',messages:{wrapArrays:!0},any:{unknown:"is not allowed",invalid:"contains an invalid value",empty:"is not allowed to be empty",required:"is required",allowOnly:"must be one of {{valids}}",default:"threw an error when running default method"},alternatives:{base:"not matching any of the allowed alternatives",child:null},array:{base:"must be an array",includes:"at position {{pos}} does not match any of the allowed types",includesSingle:'single value of "{{!label}}" does not match any of the allowed types',includesOne:"at position {{pos}} fails because {{reason}}",includesOneSingle:'single value of "{{!label}}" fails because {{reason}}',includesRequiredUnknowns:"does not contain {{unknownMisses}} required value(s)",includesRequiredKnowns:"does not contain {{knownMisses}}",includesRequiredBoth:"does not contain {{knownMisses}} and {{unknownMisses}} other required value(s)",excludes:"at position {{pos}} contains an excluded value",excludesSingle:'single value of "{{!label}}" contains an excluded value',min:"must contain at least {{limit}} items",max:"must contain less than or equal to {{limit}} items",length:"must contain {{limit}} items",ordered:"at position {{pos}} fails because {{reason}}",orderedLength:"at position {{pos}} fails because array must contain at most {{limit}} items",ref:'references "{{ref}}" which is not a positive integer',sparse:"must not be a sparse array",unique:"position {{pos}} contains a duplicate value"},boolean:{base:"must be a boolean"},binary:{base:"must be a buffer or a string",min:"must be at least {{limit}} bytes",max:"must be less than or equal to {{limit}} bytes",length:"must be {{limit}} bytes"},date:{base:"must be a number of milliseconds or valid date string",format:"must be a string with one of the following formats {{format}}",strict:"must be a valid date",min:'must be larger than or equal to "{{limit}}"',max:'must be less than or equal to "{{limit}}"',less:'must be less than "{{limit}}"',greater:'must be greater than "{{limit}}"',isoDate:"must be a valid ISO 8601 date",timestamp:{javascript:"must be a valid timestamp or number of milliseconds",unix:"must be a valid timestamp or number of seconds"},ref:'references "{{ref}}" which is not a date'},function:{base:"must be a Function",arity:"must have an arity of {{n}}",minArity:"must have an arity greater or equal to {{n}}",maxArity:"must have an arity lesser or equal to {{n}}",ref:"must be a Joi reference",class:"must be a class"},lazy:{base:"!!schema error: lazy schema must be set",schema:"!!schema error: lazy schema function must return a schema"},object:{base:"must be an object",child:'!!child "{{!child}}" fails because {{reason}}',min:"must have at least {{limit}} children",max:"must have less than or equal to {{limit}} children",length:"must have {{limit}} children",allowUnknown:'!!"{{!child}}" is not allowed',with:'!!"{{mainWithLabel}}" missing required peer "{{peerWithLabel}}"',without:'!!"{{mainWithLabel}}" conflict with forbidden peer "{{peerWithLabel}}"',missing:"must contain at least one of {{peersWithLabels}}",xor:"contains a conflict between exclusive peers {{peersWithLabels}}",or:"must contain at least one of {{peersWithLabels}}",and:"contains {{presentWithLabels}} without its required peers {{missingWithLabels}}",nand:'!!"{{mainWithLabel}}" must not exist simultaneously with {{peersWithLabels}}',assert:'!!"{{ref}}" validation failed because "{{ref}}" failed to {{message}}',rename:{multiple:'cannot rename child "{{from}}" because multiple renames are disabled and another key was already renamed to "{{to}}"',override:'cannot rename child "{{from}}" because override is disabled and target "{{to}}" exists',regex:{multiple:'cannot rename children {{from}} because multiple renames are disabled and another key was already renamed to "{{to}}"',override:'cannot rename children {{from}} because override is disabled and target "{{to}}" exists'}},type:'must be an instance of "{{type}}"',schema:"must be a Joi instance"},number:{base:"must be a number",min:"must be larger than or equal to {{limit}}",max:"must be less than or equal to {{limit}}",less:"must be less than {{limit}}",greater:"must be greater than {{limit}}",float:"must be a float or double",integer:"must be an integer",negative:"must be a negative number",positive:"must be a positive number",precision:"must have no more than {{limit}} decimal places",ref:'references "{{ref}}" which is not a number',multiple:"must be a multiple of {{multiple}}",port:"must be a valid port"},string:{base:"must be a string",min:"length must be at least {{limit}} characters long",max:"length must be less than or equal to {{limit}} characters long",length:"length must be {{limit}} characters long",alphanum:"must only contain alpha-numeric characters",token:"must only contain alpha-numeric and underscore characters",regex:{base:'with value "{{!value}}" fails to match the required pattern: {{pattern}}',name:'with value "{{!value}}" fails to match the {{name}} pattern',invert:{base:'with value "{{!value}}" matches the inverted pattern: {{pattern}}',name:'with value "{{!value}}" matches the inverted {{name}} pattern'}},email:"must be a valid email",uri:"must be a valid uri",uriRelativeOnly:"must be a valid relative uri",uriCustomScheme:"must be a valid uri with a scheme matching the {{scheme}} pattern",isoDate:"must be a valid ISO 8601 date",guid:"must be a valid GUID",hex:"must only contain hexadecimal characters",hexAlign:"hex decoded representation must be byte aligned",base64:"must be a valid base64 string",dataUri:"must be a valid dataUri string",hostname:"must be a valid hostname",normalize:"must be unicode normalized in the {{form}} form",lowercase:"must only contain lowercase characters",uppercase:"must only contain uppercase characters",trim:"must not have leading or trailing whitespace",creditCard:"must be a credit card",ref:'references "{{ref}}" which is not a number',ip:"must be a valid ip address with a {{cidr}} CIDR",ipVersion:"must be a valid ip address of one of the following versions {{version}} with a {{cidr}} CIDR"},symbol:{base:"must be a symbol",map:"must be one of {{map}}"}}},function(e,t,r){"use strict";const n=r(12);t.options=n.object({abortEarly:n.boolean(),convert:n.boolean(),allowUnknown:n.boolean(),skipFunctions:n.boolean(),stripUnknown:[n.boolean(),n.object({arrays:n.boolean(),objects:n.boolean()}).or("arrays","objects")],language:n.object(),presence:n.string().only("required","optional","forbidden","ignore"),raw:n.boolean(),context:n.object(),strip:n.boolean(),noDefaults:n.boolean(),escapeHtml:n.boolean()}).strict()},function(e,t,r){"use strict";const n=r(1),s=r(0),o={};o.Lazy=class extends n{constructor(){super(),this._type="lazy"}_base(e,t,r){const s={value:e},o=this._flags.lazy;if(!o)return s.errors=this.createError("lazy.base",null,t,r),s;const i=o();return i instanceof n?i._validate(e,t,r):(s.errors=this.createError("lazy.schema",null,t,r),s)}set(e){s.assert("function"==typeof e,"You must provide a function as first argument");const t=this.clone();return t._flags.lazy=e,t}},e.exports=new o.Lazy},function(e,t,r){"use strict";const n=r(1),s=r(3),o=r(2),i=r(0),a={fastSplice:function(e,t){let r=t;for(;r<e.length;)e[r++]=e[r];--e.length}};a.Array=class extends n{constructor(){super(),this._type="array",this._inner.items=[],this._inner.ordereds=[],this._inner.inclusions=[],this._inner.exclusions=[],this._inner.requireds=[],this._flags.sparse=!1}_base(e,t,r){const n={value:e};"string"==typeof e&&r.convert&&a.safeParse(e,n);let s=Array.isArray(n.value);const o=s;if(r.convert&&this._flags.single&&!s&&(n.value=[n.value],s=!0),!s)return n.errors=this.createError("array.base",null,t,r),n;if((this._inner.inclusions.length||this._inner.exclusions.length||this._inner.requireds.length||this._inner.ordereds.length||!this._flags.sparse)&&(o&&(n.value=n.value.slice(0)),n.errors=this._checkItems.call(this,n.value,o,t,r),n.errors&&o&&r.convert&&this._flags.single)){const e=n.errors;n.value=[n.value],n.errors=this._checkItems.call(this,n.value,o,t,r),n.errors&&(n.errors=e,n.value=n.value[0])}return n}_checkItems(e,t,r,n){const s=[];let o;const i=this._inner.requireds.slice(),c=this._inner.ordereds.slice(),l=this._inner.inclusions.concat(i);let u=e.length;for(let f=0;f<u;++f){o=!1;const p=e[f];let h=!1;const d={key:t?f:r.key,path:t?r.path.concat(f):r.path,parent:r.parent,reference:r.reference};let m;if(!this._flags.sparse&&void 0===p){if(s.push(this.createError("array.sparse",null,{key:r.key,path:d.path,pos:f},n)),n.abortEarly)return s;c.shift();continue}for(let e=0;e<this._inner.exclusions.length;++e)if(!(m=this._inner.exclusions[e]._validate(p,d,{})).errors){if(s.push(this.createError(t?"array.excludes":"array.excludesSingle",{pos:f,value:p},{key:r.key,path:d.path},n)),o=!0,n.abortEarly)return s;c.shift();break}if(o)continue;if(this._inner.ordereds.length){if(c.length>0){const t=c.shift();if((m=t._validate(p,d,n)).errors){if(s.push(this.createError("array.ordered",{pos:f,reason:m.errors,value:p},{key:r.key,path:d.path},n)),n.abortEarly)return s}else if(t._flags.strip)a.fastSplice(e,f),--f,--u;else{if(!this._flags.sparse&&void 0===m.value){if(s.push(this.createError("array.sparse",null,{key:r.key,path:d.path,pos:f},n)),n.abortEarly)return s;continue}e[f]=m.value}continue}if(!this._inner.items.length){if(s.push(this.createError("array.orderedLength",{pos:f,limit:this._inner.ordereds.length},{key:r.key,path:d.path},n)),n.abortEarly)return s;continue}}const g=[];let y=i.length;for(let t=0;t<y;++t)if(!(m=g[t]=i[t]._validate(p,d,n)).errors){if(e[f]=m.value,h=!0,a.fastSplice(i,t),--t,--y,!this._flags.sparse&&void 0===m.value&&(s.push(this.createError("array.sparse",null,{key:r.key,path:d.path,pos:f},n)),n.abortEarly))return s;break}if(h)continue;const b=!!n.stripUnknown&&(!0===n.stripUnknown||!!n.stripUnknown.arrays);y=l.length;for(let c=0;c<y;++c){const v=l[c],_=i.indexOf(v);if(-1!==_)m=g[_];else if(!(m=v._validate(p,d,n)).errors){v._flags.strip?(a.fastSplice(e,f),--f,--u):this._flags.sparse||void 0!==m.value?e[f]=m.value:(s.push(this.createError("array.sparse",null,{key:r.key,path:d.path,pos:f},n)),o=!0),h=!0;break}if(1===y){if(b){a.fastSplice(e,f),--f,--u,h=!0;break}if(s.push(this.createError(t?"array.includesOne":"array.includesOneSingle",{pos:f,reason:m.errors,value:p},{key:r.key,path:d.path},n)),o=!0,n.abortEarly)return s;break}}if(!o&&(this._inner.inclusions.length&&!h)){if(b){a.fastSplice(e,f),--f,--u;continue}if(s.push(this.createError(t?"array.includes":"array.includesSingle",{pos:f,value:p},{key:r.key,path:d.path},n)),n.abortEarly)return s}}return i.length&&this._fillMissedErrors.call(this,s,i,r,n),c.length&&this._fillOrderedErrors.call(this,s,c,r,n),s.length?s:null}describe(){const e=super.describe();if(this._inner.ordereds.length){e.orderedItems=[];for(let t=0;t<this._inner.ordereds.length;++t)e.orderedItems.push(this._inner.ordereds[t].describe())}if(this._inner.items.length){e.items=[];for(let t=0;t<this._inner.items.length;++t)e.items.push(this._inner.items[t].describe())}return e}items(...e){const t=this.clone();return i.flatten(e).forEach((e,r)=>{try{e=s.schema(this._currentJoi,e)}catch(e){throw e.hasOwnProperty("path")?e.path=r+"."+e.path:e.path=r,e.message=e.message+"("+e.path+")",e}t._inner.items.push(e),"required"===e._flags.presence?t._inner.requireds.push(e):"forbidden"===e._flags.presence?t._inner.exclusions.push(e.optional()):t._inner.inclusions.push(e)}),t}ordered(...e){const t=this.clone();return i.flatten(e).forEach((e,r)=>{try{e=s.schema(this._currentJoi,e)}catch(e){throw e.hasOwnProperty("path")?e.path=r+"."+e.path:e.path=r,e.message=e.message+"("+e.path+")",e}t._inner.ordereds.push(e)}),t}min(e){const t=o.isRef(e);return i.assert(Number.isSafeInteger(e)&&e>=0||t,"limit must be a positive integer or reference"),this._test("min",e,function(r,n,s){let o;if(t){if(o=e(n.reference||n.parent,s),!(Number.isSafeInteger(o)&&o>=0))return this.createError("array.ref",{ref:e.key},n,s)}else o=e;return r.length>=o?r:this.createError("array.min",{limit:e,value:r},n,s)})}max(e){const t=o.isRef(e);return i.assert(Number.isSafeInteger(e)&&e>=0||t,"limit must be a positive integer or reference"),this._test("max",e,function(r,n,s){let o;if(t){if(o=e(n.reference||n.parent,s),!(Number.isSafeInteger(o)&&o>=0))return this.createError("array.ref",{ref:e.key},n,s)}else o=e;return r.length<=o?r:this.createError("array.max",{limit:e,value:r},n,s)})}length(e){const t=o.isRef(e);return i.assert(Number.isSafeInteger(e)&&e>=0||t,"limit must be a positive integer or reference"),this._test("length",e,function(r,n,s){let o;if(t){if(o=e(n.reference||n.parent,s),!(Number.isSafeInteger(o)&&o>=0))return this.createError("array.ref",{ref:e.key},n,s)}else o=e;return r.length===o?r:this.createError("array.length",{limit:e,value:r},n,s)})}unique(e,t){i.assert(void 0===e||"function"==typeof e||"string"==typeof e,"comparator must be a function or a string"),i.assert(void 0===t||"object"==typeof t,"configs must be an object");const r={ignoreUndefined:t&&t.ignoreUndefined||!1};return"string"==typeof e?r.path=e:"function"==typeof e&&(r.comparator=e),this._test("unique",r,function(e,t,n){const s={string:Object.create(null),number:Object.create(null),undefined:Object.create(null),boolean:Object.create(null),object:new Map,function:new Map,custom:new Map},o=r.comparator||i.deepEqual,a=r.ignoreUndefined;for(let c=0;c<e.length;++c){const l=r.path?i.reach(e[c],r.path):e[c],u=r.comparator?s.custom:s[typeof l];if(u)if(u instanceof Map){const s=u.entries();let i;for(;!(i=s.next()).done;)if(o(i.value[0],l)){const s={key:t.key,path:t.path.concat(c),parent:t.parent,reference:t.reference},o={pos:c,value:e[c],dupePos:i.value[1],dupeValue:e[i.value[1]]};return r.path&&(o.path=r.path),this.createError("array.unique",o,s,n)}u.set(l,c)}else{if((!a||void 0!==l)&&void 0!==u[l]){const s={key:t.key,path:t.path.concat(c),parent:t.parent,reference:t.reference},o={pos:c,value:e[c],dupePos:u[l],dupeValue:e[u[l]]};return r.path&&(o.path=r.path),this.createError("array.unique",o,s,n)}u[l]=c}}return e})}sparse(e){const t=void 0===e||!!e;if(this._flags.sparse===t)return this;const r=this.clone();return r._flags.sparse=t,r}single(e){const t=void 0===e||!!e;if(this._flags.single===t)return this;const r=this.clone();return r._flags.single=t,r}_fillMissedErrors(e,t,r,n){const s=[];let o=0;for(let e=0;e<t.length;++e){const r=t[e]._getLabel();r?s.push(r):++o}s.length?o?e.push(this.createError("array.includesRequiredBoth",{knownMisses:s,unknownMisses:o},{key:r.key,path:r.path},n)):e.push(this.createError("array.includesRequiredKnowns",{knownMisses:s},{key:r.key,path:r.path},n)):e.push(this.createError("array.includesRequiredUnknowns",{unknownMisses:o},{key:r.key,path:r.path},n))}_fillOrderedErrors(e,t,r,n){const s=[];for(let e=0;e<t.length;++e){"required"===i.reach(t[e],"_flags.presence")&&s.push(t[e])}s.length&&this._fillMissedErrors.call(this,e,s,r,n)}},a.safeParse=function(e,t){try{const r=JSON.parse(e);Array.isArray(r)&&(t.value=r)}catch(e){}},e.exports=new a.Array},function(e,t,r){"use strict";const n=r(1),s=r(0),o={Set:r(14)};o.Boolean=class extends n{constructor(){super(),this._type="boolean",this._flags.insensitive=!0,this._inner.truthySet=new o.Set,this._inner.falsySet=new o.Set}_base(e,t,r){const n={value:e};if("string"==typeof e&&r.convert){const t=this._flags.insensitive?e.toLowerCase():e;n.value="true"===t||"false"!==t&&e}return"boolean"!=typeof n.value&&(n.value=!!this._inner.truthySet.has(e,null,null,this._flags.insensitive)||!this._inner.falsySet.has(e,null,null,this._flags.insensitive)&&e),n.errors="boolean"==typeof n.value?null:this.createError("boolean.base",null,t,r),n}truthy(...e){const t=this.clone();e=s.flatten(e);for(let r=0;r<e.length;++r){const n=e[r];s.assert(void 0!==n,"Cannot call truthy with undefined"),t._inner.truthySet.add(n)}return t}falsy(...e){const t=this.clone();e=s.flatten(e);for(let r=0;r<e.length;++r){const n=e[r];s.assert(void 0!==n,"Cannot call falsy with undefined"),t._inner.falsySet.add(n)}return t}insensitive(e){const t=void 0===e||!!e;if(this._flags.insensitive===t)return this;const r=this.clone();return r._flags.insensitive=t,r}describe(){const e=super.describe();return e.truthy=[!0].concat(this._inner.truthySet.values()),e.falsy=[!1].concat(this._inner.falsySet.values()),e}},e.exports=new o.Boolean},function(e,t,r){"use strict";const n=r(1),s=r(0),o={};o.Binary=class extends n{constructor(){super(),this._type="binary"}_base(e,t,r){const n={value:e};if("string"==typeof e&&r.convert)try{n.value=Buffer.from(e,this._flags.encoding)}catch(e){}return n.errors=Buffer.isBuffer(n.value)?null:this.createError("binary.base",null,t,r),n}encoding(e){if(s.assert(Buffer.isEncoding(e),"Invalid encoding:",e),this._flags.encoding===e)return this;const t=this.clone();return t._flags.encoding=e,t}min(e){return s.assert(Number.isSafeInteger(e)&&e>=0,"limit must be a positive integer"),this._test("min",e,function(t,r,n){return t.length>=e?t:this.createError("binary.min",{limit:e,value:t},r,n)})}max(e){return s.assert(Number.isSafeInteger(e)&&e>=0,"limit must be a positive integer"),this._test("max",e,function(t,r,n){return t.length<=e?t:this.createError("binary.max",{limit:e,value:t},r,n)})}length(e){return s.assert(Number.isSafeInteger(e)&&e>=0,"limit must be a positive integer"),this._test("length",e,function(t,r,n){return t.length===e?t:this.createError("binary.length",{limit:e,value:t},r,n)})}},e.exports=new o.Binary},function(e,t,r){"use strict";const n=r(0),s=r(17),o=r(2),i={};i.Func=class extends s.constructor{constructor(){super(),this._flags.func=!0}arity(e){return n.assert(Number.isSafeInteger(e)&&e>=0,"n must be a positive integer"),this._test("arity",e,function(t,r,n){return t.length===e?t:this.createError("function.arity",{n:e},r,n)})}minArity(e){return n.assert(Number.isSafeInteger(e)&&e>0,"n must be a strict positive integer"),this._test("minArity",e,function(t,r,n){return t.length>=e?t:this.createError("function.minArity",{n:e},r,n)})}maxArity(e){return n.assert(Number.isSafeInteger(e)&&e>=0,"n must be a positive integer"),this._test("maxArity",e,function(t,r,n){return t.length<=e?t:this.createError("function.maxArity",{n:e},r,n)})}ref(){return this._test("ref",null,function(e,t,r){return o.isRef(e)?e:this.createError("function.ref",null,t,r)})}class(){return this._test("class",null,function(e,t,r){return/^\s*class\s/.test(e.toString())?e:this.createError("function.class",null,t,r)})}},e.exports=new i.Func},function(e,t,r){"use strict";const n=r(37),s={};e.exports=class{constructor(){this._items=[],this.nodes=[]}add(e,t){const r=[].concat((t=t||{}).before||[]),s=[].concat(t.after||[]),o=t.group||"?",i=t.sort||0;n.assert(!r.includes(o),`Item cannot come before itself: ${o}`),n.assert(!r.includes("?"),"Item cannot come before unassociated items"),n.assert(!s.includes(o),`Item cannot come after itself: ${o}`),n.assert(!s.includes("?"),"Item cannot come after unassociated items"),[].concat(e).forEach((e,t)=>{const n={seq:this._items.length,sort:i,before:r,after:s,group:o,node:e};this._items.push(n)});const a=this._sort();return n.assert(!a,"item","?"!==o?`added into group ${o}`:"","created a dependencies error"),this.nodes}merge(e){e=[].concat(e);for(let t=0;t<e.length;++t){const r=e[t];if(r)for(let e=0;e<r._items.length;++e){const t=Object.assign({},r._items[e]);this._items.push(t)}}this._items.sort(s.mergeSort);for(let e=0;e<this._items.length;++e)this._items[e].seq=e;const t=this._sort();return n.assert(!t,"merge created a dependencies error"),this.nodes}_sort(){const e={},t=Object.create(null),r=Object.create(null);for(let n=0;n<this._items.length;++n){const s=this._items[n],o=s.seq,i=s.group;r[i]=r[i]||[],r[i].push(o),e[o]=s.before;const a=s.after;for(let e=0;e<a.length;++e)t[a[e]]=(t[a[e]]||[]).concat(o)}let n=Object.keys(e);for(let t=0;t<n.length;++t){const s=n[t],o=[],i=Object.keys(e[s]);for(let t=0;t<i.length;++t){const n=e[s][i[t]];r[n]=r[n]||[];for(let e=0;e<r[n].length;++e)o.push(r[n][e])}e[s]=o}const s=Object.keys(t);for(let n=0;n<s.length;++n){const o=s[n];if(r[o])for(let n=0;n<r[o].length;++n){const s=r[o][n];e[s]=e[s].concat(t[o])}}let o;const i={};n=Object.keys(e);for(let t=0;t<n.length;++t){const r=n[t];o=e[r];for(let e=0;e<o.length;++e)i[o[e]]=(i[o[e]]||[]).concat(r)}const a={},c=[];for(let e=0;e<this._items.length;++e){let t=e;if(i[e]){t=null;for(let e=0;e<this._items.length;++e){if(!0===a[e])continue;i[e]||(i[e]=[]);const r=i[e].length;let n=0;for(let t=0;t<r;++t)a[i[e][t]]&&++n;if(n===r){t=e;break}}}null!==t&&(a[t]=!0,c.push(t))}if(c.length!==this._items.length)return new Error("Invalid dependencies");const l={};for(let e=0;e<this._items.length;++e){const t=this._items[e];l[t.seq]=t}const u=[];this._items=c.map(e=>{const t=l[e];return u.push(t.node),t}),this.nodes=u}},s.mergeSort=((e,t)=>e.sort===t.sort?0:e.sort<t.sort?-1:1)},function(e,t,r){"use strict";const n=r(4),s=r(5),o=r(6),i=r(38),a=r(39),c={};t.deepEqual=i,t.clone=function(e,r={},n=null){if("object"!=typeof e||null===e)return e;const s=n||new Map,o=s.get(e);if(o)return o;let i,a=!1;const l=Array.isArray(e);if(l)i=[],a=!0;else if(Buffer.isBuffer(e))i=Buffer.from(e);else if(e instanceof Date)i=new Date(e.getTime());else if(e instanceof RegExp)i=new RegExp(e);else if(!1!==r.prototype){const t=Object.getPrototypeOf(e);t&&t.isImmutable?i=e:(i=Object.create(t),a=!0)}else i={},a=!0;if(s.set(e,i),a){const n=c.keys(e,r);for(let o=0;o<n.length;++o){const a=n[o];if(l&&"length"===a)continue;const c=Object.getOwnPropertyDescriptor(e,a);c&&(c.get||c.set)?Object.defineProperty(i,a,c):Object.defineProperty(i,a,{enumerable:!c||c.enumerable,writable:!0,configurable:!0,value:t.clone(e[a],r,s)})}l&&(i.length=e.length)}return i},c.keys=function(e,t={}){return t.symbols?Reflect.ownKeys(e):Object.getOwnPropertyNames(e)},t.merge=function(e,r,n,s){if(t.assert(e&&"object"==typeof e,"Invalid target value: must be an object"),t.assert(null==r||"object"==typeof r,"Invalid source value: must be null, undefined, or an object"),!r)return e;if(Array.isArray(r)){t.assert(Array.isArray(e),"Cannot merge array onto an object"),!1===s&&(e.length=0);for(let n=0;n<r.length;++n)e.push(t.clone(r[n]));return e}const o=c.keys(r);for(let i=0;i<o.length;++i){const a=o[i];if("__proto__"===a||!Object.prototype.propertyIsEnumerable.call(r,a))continue;const c=r[a];c&&"object"==typeof c?!e[a]||"object"!=typeof e[a]||Array.isArray(e[a])!==Array.isArray(c)||c instanceof Date||Buffer.isBuffer(c)||c instanceof RegExp?e[a]=t.clone(c):t.merge(e[a],c,n,s):null!=c?e[a]=c:!1!==n&&(e[a]=c)}return e},t.applyToDefaults=function(e,r,n){if(t.assert(e&&"object"==typeof e,"Invalid defaults value: must be an object"),t.assert(!r||!0===r||"object"==typeof r,"Invalid options value: must be true, falsy or an object"),!r)return null;const s=t.clone(e);return!0===r?s:t.merge(s,r,!0===n,!1)},t.cloneWithShallow=function(e,r,n){if(!e||"object"!=typeof e)return e;const s=c.store(e,r),o=t.clone(e,n);return c.restore(o,e,s),o},c.store=function(e,r){const n=new Map;for(let s=0;s<r.length;++s){const o=r[s],i=t.reach(e,o);"object"!=typeof i&&"function"!=typeof i||(n.set(o,i),c.reachSet(e,o,void 0))}return n},c.restore=function(e,t,r){for(const[n,s]of r)c.reachSet(e,n,s),c.reachSet(t,n,s)},c.reachSet=function(e,t,r){const n=Array.isArray(t)?t:t.split(".");let s=e;for(let e=0;e<n.length;++e){const t=n[e];e+1===n.length&&(s[t]=r),s=s[t]}},t.applyToDefaultsWithShallow=function(e,r,n){if(t.assert(e&&"object"==typeof e,"Invalid defaults value: must be an object"),t.assert(!r||!0===r||"object"==typeof r,"Invalid options value: must be true, falsy or an object"),t.assert(n&&Array.isArray(n),"Invalid keys"),!r)return null;const s=t.cloneWithShallow(e,n);if(!0===r)return s;const o=c.store(r,n);return t.merge(s,r,!1,!1),c.restore(s,r,o),s},t.intersect=function(e,t,r){if(!e||!t)return r?null:[];const n=[],s=Array.isArray(e)?new Set(e):e,o=new Set;for(const e of t)if(c.has(s,e)&&!o.has(e)){if(r)return e;n.push(e),o.add(e)}return r?null:n},c.has=function(e,t){return"function"==typeof e.has?e.has(t):void 0!==e[t]},t.contain=function(e,r,n={}){let s,o,i=null;if("object"!=typeof e||"object"!=typeof r||Array.isArray(e)||Array.isArray(r))r=[].concat(r);else{i=r;const e=Object.getOwnPropertySymbols(r).filter(Object.prototype.propertyIsEnumerable.bind(r));r=[...Object.keys(r),...e]}if(t.assert("string"==typeof e||"object"==typeof e,"Reference must be string or an object"),t.assert(r.length,"Values array cannot be empty"),n.deep){s=t.deepEqual;const e=n.hasOwnProperty("only"),r=n.hasOwnProperty("part");o={prototype:e?n.only:!!r&&!n.part,part:e?!n.only:!!r&&n.part}}else s=((e,t)=>e===t);let a=!1;const l=new Array(r.length);for(let e=0;e<l.length;++e)l[e]=0;if("string"==typeof e){let n="(";for(let e=0;e<r.length;++e){const s=r[e];t.assert("string"==typeof s,"Cannot compare string reference to non-string value"),n+=(e?"|":"")+t.escapeRegex(s)}const s=new RegExp(n+")","g");a=!!e.replace(s,(e,t)=>{const n=r.indexOf(t);return++l[n],""})}else if(Array.isArray(e)){const t=!(!n.only||!n.once);if(t&&e.length!==r.length)return!1;for(let n=0;n<e.length;++n){let i=!1;for(let a=0;a<r.length&&!1===i;++a)t&&0!==l[a]||(i=s(r[a],e[n],o)&&a);!1!==i?++l[i]:a=!0}}else{const t=c.keys(e,n);for(let n=0;n<t.length;++n){const c=t[n],u=r.indexOf(c);if(-1!==u){if(i&&!s(i[c],e[c],o))return!1;++l[u]}else a=!0}}if(n.only&&(a||!n.once))return!a;let u=!1;for(let e=0;e<l.length;++e)if(u=u||!!l[e],n.once&&l[e]>1||!n.part&&!l[e])return!1;return u},t.flatten=function(e,r){const n=r||[];for(let r=0;r<e.length;++r)Array.isArray(e[r])?t.flatten(e[r],n):n.push(e[r]);return n},t.reach=function(e,r,n){if(!1===r||null==r)return e;"string"==typeof(n=n||{})&&(n={separator:n});const s=Array.isArray(r);t.assert(!s||!n.separator,"Separator option no valid for array-based chain");const o=s?r:r.split(n.separator||".");let i=e;for(let e=0;e<o.length;++e){let s=o[e];if(Array.isArray(i)){const e=Number(s);Number.isInteger(e)&&e<0&&(s=i.length+e)}if(!i||"object"!=typeof i&&"function"!=typeof i||!(s in i)||"object"!=typeof i&&!1===n.functions){t.assert(!n.strict||e+1===o.length,"Missing segment",s,"in reach path ",r),t.assert("object"==typeof i||!0===n.functions||"function"!=typeof i,"Invalid segment",s,"in reach path ",r),i=n.default;break}i=i[s]}return i},t.reachTemplate=function(e,r,n){return r.replace(/{([^}]+)}/g,(r,s)=>{const o=t.reach(e,s,n);return null==o?"":o})},t.assert=function(e,...r){if(e)return;if(1===r.length&&r[0]instanceof Error)throw r[0];const s=r.filter(e=>""!==e).map(e=>"string"==typeof e?e:e instanceof Error?e.message:t.stringify(e));throw new n.AssertionError({message:s.join(" ")||"Unknown error",actual:!1,expected:!0,operator:"==",stackStartFunction:t.assert})},t.Bench=function(){this.ts=0,this.reset()},t.Bench.prototype.reset=function(){this.ts=t.Bench.now()},t.Bench.prototype.elapsed=function(){return t.Bench.now()-this.ts},t.Bench.now=function(){const e=process.hrtime();return 1e3*e[0]+e[1]/1e6},t.escapeRegex=function(e){return e.replace(/[\^\$\.\*\+\-\?\=\!\:\|\\\/\(\)\[\]\{\}\,]/g,"\\$&")},t.escapeHeaderAttribute=function(e){return t.assert(/^[ \w\!#\$%&'\(\)\*\+,\-\.\/\:;<\=>\?@\[\]\^`\{\|\}~\"\\]*$/.test(e),"Bad attribute value ("+e+")"),e.replace(/\\/g,"\\\\").replace(/\"/g,'\\"')},t.escapeHtml=function(e){return a.escapeHtml(e)},t.escapeJson=function(e){return a.escapeJson(e)},t.once=function(e){if(e._hoekOnce)return e;let t=!1;const r=function(...r){t||(t=!0,e(...r))};return r._hoekOnce=!0,r},t.ignore=function(){},t.uniqueFilename=function(e,t){t=t?"."!==t[0]?"."+t:t:"",e=o.resolve(e);const r=[Date.now(),process.pid,s.randomBytes(8).toString("hex")].join("-")+t;return o.join(e,r)},t.stringify=function(...e){try{return JSON.stringify.apply(null,e)}catch(e){return"[Cannot display object: "+e.message+"]"}},t.wait=function(e){return new Promise(t=>setTimeout(t,e))},t.block=function(){return new Promise(t.ignore)}},function(e,t,r){"use strict";const n={arrayType:Symbol("array"),bufferType:Symbol("buffer"),dateType:Symbol("date"),errorType:Symbol("error"),genericType:Symbol("generic"),mapType:Symbol("map"),regexType:Symbol("regex"),setType:Symbol("set"),weakMapType:Symbol("weak-map"),weakSetType:Symbol("weak-set"),mismatched:Symbol("mismatched")};n.typeMap={"[object Array]":n.arrayType,"[object Date]":n.dateType,"[object Error]":n.errorType,"[object Map]":n.mapType,"[object RegExp]":n.regexType,"[object Set]":n.setType,"[object WeakMap]":n.weakMapType,"[object WeakSet]":n.weakSetType},n.SeenEntry=class{constructor(e,t){this.obj=e,this.ref=t}isSame(e,t){return this.obj===e&&this.ref===t}},n.getInternalType=function(e){const{typeMap:t,bufferType:r,genericType:s}=n;return e instanceof Buffer?r:t[Object.prototype.toString.call(e)]||s},n.getSharedType=function(e,t,r){if(r)return Object.getPrototypeOf(e)!==Object.getPrototypeOf(t)?n.mismatched:n.getInternalType(e);const s=n.getInternalType(e);return s!==n.getInternalType(t)?n.mismatched:s},n.valueOf=function(e){const t=e.valueOf;if(void 0===t)return e;try{return t.call(e)}catch(e){return e}},n.hasOwnEnumerableProperty=function(e,t){return Object.prototype.propertyIsEnumerable.call(e,t)},n.isSetSimpleEqual=function(e,t){for(const r of e)if(!t.has(r))return!1;return!0},n.isDeepEqualObj=function(e,t,r,s,o){const{isDeepEqual:i,valueOf:a,hasOwnEnumerableProperty:c}=n,{keys:l,getOwnPropertySymbols:u}=Object;if(e===n.arrayType){if(!s.part){if(t.length!==r.length)return!1;for(let e=0;e<t.length;++e)if(!i(t[e],r[e],s,o))return!1;return!0}for(let e=0;e<t.length;++e){const n=t[e];for(let e=0;e<r.length;++e)if(i(n,r[e],s,o))return!0}}else if(e===n.setType){if(t.size!==r.size)return!1;if(!n.isSetSimpleEqual(t,r)){const e=new Set(r);for(const r of t){if(e.delete(r))continue;let t=!1;for(const n of e)if(i(r,n,s,o)){e.delete(n),t=!0;break}if(!t)return!1}}}else if(e===n.mapType){if(t.size!==r.size)return!1;for(const[e,n]of t){if(void 0===n&&!r.has(e))return!1;if(!i(n,r.get(e),s,o))return!1}}else if(e===n.errorType&&(t.name!==r.name||t.message!==r.message))return!1;const f=a(t),p=a(r);if((t!==f||r!==p)&&!i(f,p,s,o))return!1;const h=l(t);if(!s.part&&h.length!==l(r).length)return!1;for(let e=0;e<h.length;++e){const n=h[e];if(!c(r,n))return!1;if(!i(t[n],r[n],s,o))return!1}if(s.symbols){const e=u(t),n=new Set(u(r));for(let a=0;a<e.length;++a){const l=e[a];if(c(t,l)){if(!c(r,l))return!1;if(!i(t[l],r[l],s,o))return!1}else if(c(r,l))return!1;n.delete(l)}for(const e of n)if(c(r,e))return!1}return!0},n.isDeepEqual=function(e,t,r,s){if(e===t)return 0!==e||1/e==1/t;const o=typeof e;if(o!==typeof t)return!1;if("object"!==o||null===e||null===t)return e!=e&&t!=t;const i=n.getSharedType(e,t,!!r.prototype);switch(i){case n.bufferType:return Buffer.prototype.equals.call(e,t);case n.regexType:return e.toString()===t.toString();case n.mismatched:return!1}for(let r=s.length-1;r>=0;--r)if(s[r].isSame(e,t))return!0;s.push(new n.SeenEntry(e,t));try{return!!n.isDeepEqualObj(i,e,t,r,s)}finally{s.pop()}},e.exports=function(e,t,r){return r=r||{prototype:!0},!!n.isDeepEqual(e,t,r,[])}},function(e,t,r){"use strict";const n={};t.escapeHtml=function(e){if(!e)return"";let t="";for(let r=0;r<e.length;++r){const s=e.charCodeAt(r);n.isSafe(s)?t+=e[r]:t+=n.escapeHtmlChar(s)}return t},t.escapeJson=function(e){if(!e)return"";let t;return e.replace(/[<>&\u2028\u2029]/g,e=>60===(t=e.charCodeAt(0))?"\\u003c":62===t?"\\u003e":38===t?"\\u0026":8232===t?"\\u2028":"\\u2029")},n.escapeHtmlChar=function(e){const t=n.namedHtml[e];return void 0!==t?t:e>=256?"&#"+e+";":`&#x${Buffer.from(String.fromCharCode(e),"ascii").toString("hex")};`},n.isSafe=function(e){return void 0!==n.safeCharCodes[e]},n.namedHtml={38:"&amp;",60:"&lt;",62:"&gt;",34:"&quot;",160:"&nbsp;",162:"&cent;",163:"&pound;",164:"&curren;",169:"&copy;",174:"&reg;"},n.safeCharCodes=function(){const e={};for(let t=32;t<123;++t)(t>=97||t>=65&&t<=90||t>=48&&t<=57||32===t||46===t||44===t||45===t||58===t||95===t)&&(e[t]=null);return e}()},function(e,t,r){"use strict";const n=r(1),s=r(2),o=r(0),i={precisionRx:/(?:\.(\d+))?(?:[eE]([+-]?\d+))?$/};i.Number=class extends n{constructor(){super(),this._type="number",this._invalids.add(1/0),this._invalids.add(-1/0)}_base(e,t,r){const n={errors:null,value:e};if("string"==typeof e&&r.convert){const t=parseFloat(e);n.value=isNaN(t)||!isFinite(e)?NaN:t}const s="number"==typeof n.value&&!isNaN(n.value);if(r.convert&&"precision"in this._flags&&s){const e=Math.pow(10,this._flags.precision);n.value=Math.round(n.value*e)/e}return n.errors=s?null:this.createError("number.base",{value:e},t,r),n}multiple(e){const t=s.isRef(e);return t||(o.assert("number"==typeof e&&isFinite(e),"multiple must be a number"),o.assert(e>0,"multiple must be greater than 0")),this._test("multiple",e,function(r,n,s){const o=t?e(n.reference||n.parent,s):e;return!t||"number"==typeof o&&isFinite(o)?r%o==0?r:this.createError("number.multiple",{multiple:e,value:r},n,s):this.createError("number.ref",{ref:e.key},n,s)})}integer(){return this._test("integer",void 0,function(e,t,r){return Number.isSafeInteger(e)?e:this.createError("number.integer",{value:e},t,r)})}negative(){return this._test("negative",void 0,function(e,t,r){return e<0?e:this.createError("number.negative",{value:e},t,r)})}positive(){return this._test("positive",void 0,function(e,t,r){return e>0?e:this.createError("number.positive",{value:e},t,r)})}precision(e){o.assert(Number.isSafeInteger(e),"limit must be an integer"),o.assert(!("precision"in this._flags),"precision already set");const t=this._test("precision",e,function(t,r,n){const s=t.toString().match(i.precisionRx);return Math.max((s[1]?s[1].length:0)-(s[2]?parseInt(s[2],10):0),0)<=e?t:this.createError("number.precision",{limit:e,value:t},r,n)});return t._flags.precision=e,t}port(){return this._test("port",void 0,function(e,t,r){return!Number.isSafeInteger(e)||e<0||e>65535?this.createError("number.port",{value:e},t,r):e})}},i.compare=function(e,t){return function(r){const n=s.isRef(r),i="number"==typeof r&&!isNaN(r);return o.assert(i||n,"limit must be a number or reference"),this._test(e,r,function(s,o,i){let a;if(n){if("number"!=typeof(a=r(o.reference||o.parent,i))||isNaN(a))return this.createError("number.ref",{ref:r.key},o,i)}else a=r;return t(s,a)?s:this.createError("number."+e,{limit:a,value:s},o,i)})}},i.Number.prototype.min=i.compare("min",(e,t)=>e>=t),i.Number.prototype.max=i.compare("max",(e,t)=>e<=t),i.Number.prototype.greater=i.compare("greater",(e,t)=>e>t),i.Number.prototype.less=i.compare("less",(e,t)=>e<t),e.exports=new i.Number},function(e,t,r){"use strict";const n=r(42),s=r(0);let o;const i=r(1),a=r(2),c=r(16),l=r(43),u=r(44),f={uriRegex:l.createUriRegex(),ipRegex:u.createIpRegex(["ipv4","ipv6","ipvfuture"],"optional"),guidBrackets:{"{":"}","[":"]","(":")","":""},guidVersions:{uuidv1:"1",uuidv2:"2",uuidv3:"3",uuidv4:"4",uuidv5:"5"},cidrPresences:["required","optional","forbidden"],normalizationForms:["NFC","NFD","NFKC","NFKD"]};f.String=class extends i{constructor(){super(),this._type="string",this._invalids.add("")}_base(e,t,r){if("string"==typeof e&&r.convert){if(this._flags.normalize&&(e=e.normalize(this._flags.normalize)),this._flags.case&&(e="upper"===this._flags.case?e.toLocaleUpperCase():e.toLocaleLowerCase()),this._flags.trim&&(e=e.trim()),this._inner.replacements)for(let t=0;t<this._inner.replacements.length;++t){const r=this._inner.replacements[t];e=e.replace(r.pattern,r.replacement)}if(this._flags.truncate)for(let t=0;t<this._tests.length;++t){const r=this._tests[t];if("max"===r.name){e=e.slice(0,r.arg);break}}this._flags.byteAligned&&e.length%2!=0&&(e=`0${e}`)}return{value:e,errors:"string"==typeof e?null:this.createError("string.base",{value:e},t,r)}}insensitive(){if(this._flags.insensitive)return this;const e=this.clone();return e._flags.insensitive=!0,e}creditCard(){return this._test("creditCard",void 0,function(e,t,r){let n=e.length,s=0,o=1;for(;n--;){const t=e.charAt(n)*o;s+=t-9*(t>9),o^=3}return s%10==0&&s>0?e:this.createError("string.creditCard",{value:e},t,r)})}regex(e,t){s.assert(e instanceof RegExp,"pattern must be a RegExp");const r={pattern:new RegExp(e.source,e.ignoreCase?"i":void 0)};"string"==typeof t?r.name=t:"object"==typeof t&&(r.invert=!!t.invert,t.name&&(r.name=t.name));const n=["string.regex",r.invert?".invert":"",r.name?".name":".base"].join("");return this._test("regex",r,function(e,t,s){return r.pattern.test(e)^r.invert?e:this.createError(n,{name:r.name,pattern:r.pattern,value:e},t,s)})}alphanum(){return this._test("alphanum",void 0,function(e,t,r){return/^[a-zA-Z0-9]+$/.test(e)?e:this.createError("string.alphanum",{value:e},t,r)})}token(){return this._test("token",void 0,function(e,t,r){return/^\w+$/.test(e)?e:this.createError("string.token",{value:e},t,r)})}email(e){return e&&(s.assert("object"==typeof e,"email options must be an object"),s.assert(void 0===e.checkDNS,"checkDNS option is not supported"),s.assert(void 0===e.tldWhitelist||"object"==typeof e.tldWhitelist,"tldWhitelist must be an array or object"),s.assert(void 0===e.minDomainAtoms||Number.isSafeInteger(e.minDomainAtoms)&&e.minDomainAtoms>0,"minDomainAtoms must be a positive integer"),s.assert(void 0===e.errorLevel||"boolean"==typeof e.errorLevel||Number.isSafeInteger(e.errorLevel)&&e.errorLevel>=0,"errorLevel must be a non-negative integer or boolean")),this._test("email",e,function(t,n,s){o=o||r(45);try{const r=o.validate(t,e);if(!0===r||0===r)return t}catch(e){}return this.createError("string.email",{value:t},n,s)})}ip(e={}){let t,r=f.ipRegex;if(s.assert("object"==typeof e,"options must be an object"),e.cidr?(s.assert("string"==typeof e.cidr,"cidr must be a string"),e.cidr=e.cidr.toLowerCase(),s.assert(s.contain(f.cidrPresences,e.cidr),"cidr must be one of "+f.cidrPresences.join(", ")),e.version||"optional"===e.cidr||(r=u.createIpRegex(["ipv4","ipv6","ipvfuture"],e.cidr))):e.cidr="optional",e.version){Array.isArray(e.version)||(e.version=[e.version]),s.assert(e.version.length>=1,"version must have at least 1 version specified"),t=[];for(let r=0;r<e.version.length;++r){let n=e.version[r];s.assert("string"==typeof n,"version at position "+r+" must be a string"),n=n.toLowerCase(),s.assert(u.versions[n],"version at position "+r+" must be one of "+Object.keys(u.versions).join(", ")),t.push(n)}t=s.unique(t),r=u.createIpRegex(t,e.cidr)}return this._test("ip",e,function(n,s,o){return r.test(n)?n:t?this.createError("string.ipVersion",{value:n,cidr:e.cidr,version:t},s,o):this.createError("string.ip",{value:n,cidr:e.cidr},s,o)})}uri(e){let t="",r=!1,n=!1,o=!1,i=f.uriRegex;if(e){s.assert("object"==typeof e,"options must be an object");const i=Object.keys(e).filter(e=>!["scheme","allowRelative","relativeOnly","allowQuerySquareBrackets"].includes(e));if(s.assert(0===i.length,`options contain unknown keys: ${i}`),e.scheme){s.assert(e.scheme instanceof RegExp||"string"==typeof e.scheme||Array.isArray(e.scheme),"scheme must be a RegExp, String, or Array"),Array.isArray(e.scheme)||(e.scheme=[e.scheme]),s.assert(e.scheme.length>=1,"scheme must have at least 1 scheme specified");for(let r=0;r<e.scheme.length;++r){const n=e.scheme[r];s.assert(n instanceof RegExp||"string"==typeof n,"scheme at position "+r+" must be a RegExp or String"),t+=t?"|":"",n instanceof RegExp?t+=n.source:(s.assert(/[a-zA-Z][a-zA-Z0-9+-\.]*/.test(n),"scheme at position "+r+" must be a valid scheme"),t+=s.escapeRegex(n))}}e.allowRelative&&(r=!0),e.relativeOnly&&(n=!0),e.allowQuerySquareBrackets&&(o=!0)}return(t||r||n||o)&&(i=l.createUriRegex(t,r,n,o)),this._test("uri",e,function(e,r,s){return i.test(e)?e:n?this.createError("string.uriRelativeOnly",{value:e},r,s):t?this.createError("string.uriCustomScheme",{scheme:t,value:e},r,s):this.createError("string.uri",{value:e},r,s)})}isoDate(){return this._test("isoDate",void 0,function(e,t,r){if(c._isIsoDate(e)){if(!r.convert)return e;const t=new Date(e);if(!isNaN(t.getTime()))return t.toISOString()}return this.createError("string.isoDate",{value:e},t,r)})}guid(e){let t="";if(e&&e.version){Array.isArray(e.version)||(e.version=[e.version]),s.assert(e.version.length>=1,"version must have at least 1 valid version specified");const r=new Set;for(let n=0;n<e.version.length;++n){let o=e.version[n];s.assert("string"==typeof o,"version at position "+n+" must be a string"),o=o.toLowerCase();const i=f.guidVersions[o];s.assert(i,"version at position "+n+" must be one of "+Object.keys(f.guidVersions).join(", ")),s.assert(!r.has(i),"version at position "+n+" must not be a duplicate."),t+=i,r.add(i)}}const r=new RegExp(`^([\\[{\\(]?)[0-9A-F]{8}([:-]?)[0-9A-F]{4}\\2?[${t||"0-9A-F"}][0-9A-F]{3}\\2?[${t?"89AB":"0-9A-F"}][0-9A-F]{3}\\2?[0-9A-F]{12}([\\]}\\)]?)$`,"i");return this._test("guid",e,function(e,t,n){const s=r.exec(e);return s?f.guidBrackets[s[1]]!==s[s.length-1]?this.createError("string.guid",{value:e},t,n):e:this.createError("string.guid",{value:e},t,n)})}hex(e={}){s.assert("object"==typeof e,"hex options must be an object"),s.assert(void 0===e.byteAligned||"boolean"==typeof e.byteAligned,"byteAligned must be boolean");const t=!0===e.byteAligned,r=/^[a-f0-9]+$/i,n=this._test("hex",r,function(e,n,s){return r.test(e)?t&&e.length%2!=0?this.createError("string.hexAlign",{value:e},n,s):e:this.createError("string.hex",{value:e},n,s)});return t&&(n._flags.byteAligned=!0),n}base64(e={}){s.assert("object"==typeof e,"base64 options must be an object"),s.assert(void 0===e.paddingRequired||"boolean"==typeof e.paddingRequired,"paddingRequired must be boolean");const t=(!1===e.paddingRequired?e.paddingRequired:e.paddingRequired||!0)?/^(?:[A-Za-z0-9+\/]{4})*(?:[A-Za-z0-9+\/]{2}==|[A-Za-z0-9+\/]{3}=)?$/:/^(?:[A-Za-z0-9+\/]{4})*(?:[A-Za-z0-9+\/]{2}(==)?|[A-Za-z0-9+\/]{3}=?)?$/;return this._test("base64",t,function(e,r,n){return t.test(e)?e:this.createError("string.base64",{value:e},r,n)})}dataUri(e={}){const t=/^data:[\w\/\+]+;((charset=[\w-]+|base64),)?(.*)$/,r=(!1===e.paddingRequired?e.paddingRequired:e.paddingRequired||!0)?/^(?:[A-Za-z0-9+\/]{4})*(?:[A-Za-z0-9+\/]{2}==|[A-Za-z0-9+\/]{3}=)?$/:/^(?:[A-Za-z0-9+\/]{4})*(?:[A-Za-z0-9+\/]{2}(==)?|[A-Za-z0-9+\/]{3}=?)?$/;return this._test("dataUri",t,function(e,n,s){const o=e.match(t);if(o){if(!o[2])return e;if("base64"!==o[2])return e;if(r.test(o[3]))return e}return this.createError("string.dataUri",{value:e},n,s)})}hostname(){const e=/^(([a-zA-Z0-9]|[a-zA-Z0-9][a-zA-Z0-9\-]*[a-zA-Z0-9])\.)*([A-Za-z0-9]|[A-Za-z0-9][A-Za-z0-9\-]*[A-Za-z0-9])$/;return this._test("hostname",void 0,function(t,r,s){return t.length<=255&&e.test(t)||n.isIPv6(t)?t:this.createError("string.hostname",{value:t},r,s)})}normalize(e="NFC"){s.assert(s.contain(f.normalizationForms,e),"normalization form must be one of "+f.normalizationForms.join(", "));const t=this._test("normalize",e,function(t,r,n){return n.convert||t===t.normalize(e)?t:this.createError("string.normalize",{value:t,form:e},r,n)});return t._flags.normalize=e,t}lowercase(){const e=this._test("lowercase",void 0,function(e,t,r){return r.convert||e===e.toLocaleLowerCase()?e:this.createError("string.lowercase",{value:e},t,r)});return e._flags.case="lower",e}uppercase(){const e=this._test("uppercase",void 0,function(e,t,r){return r.convert||e===e.toLocaleUpperCase()?e:this.createError("string.uppercase",{value:e},t,r)});return e._flags.case="upper",e}trim(e=!0){if(s.assert("boolean"==typeof e,"option must be a boolean"),this._flags.trim&&e||!this._flags.trim&&!e)return this;let t;return e?t=this._test("trim",void 0,function(e,t,r){return r.convert||e===e.trim()?e:this.createError("string.trim",{value:e},t,r)}):(t=this.clone())._tests=t._tests.filter(e=>"trim"!==e.name),t._flags.trim=e,t}replace(e,t){"string"==typeof e&&(e=new RegExp(s.escapeRegex(e),"g")),s.assert(e instanceof RegExp,"pattern must be a RegExp"),s.assert("string"==typeof t,"replacement must be a String");const r=this.clone();return r._inner.replacements||(r._inner.replacements=[]),r._inner.replacements.push({pattern:e,replacement:t}),r}truncate(e){const t=void 0===e||!!e;if(this._flags.truncate===t)return this;const r=this.clone();return r._flags.truncate=t,r}},f.compare=function(e,t){return function(r,n){const o=a.isRef(r);return s.assert(Number.isSafeInteger(r)&&r>=0||o,"limit must be a positive integer or reference"),s.assert(!n||Buffer.isEncoding(n),"Invalid encoding:",n),this._test(e,r,function(s,i,a){let c;if(o){if(c=r(i.reference||i.parent,a),!Number.isSafeInteger(c))return this.createError("string.ref",{ref:r.key},i,a)}else c=r;return t(s,c,n)?s:this.createError("string."+e,{limit:c,value:s,encoding:n},i,a)})}},f.String.prototype.min=f.compare("min",(e,t,r)=>{return(r?Buffer.byteLength(e,r):e.length)>=t}),f.String.prototype.max=f.compare("max",(e,t,r)=>{return(r?Buffer.byteLength(e,r):e.length)<=t}),f.String.prototype.length=f.compare("length",(e,t,r)=>{return(r?Buffer.byteLength(e,r):e.length)===t}),f.String.prototype.uuid=f.String.prototype.guid,e.exports=new f.String},function(e,t){e.exports=require("net")},function(e,t,r){"use strict";const n=r(18),s={Uri:{createUriRegex:function(e,t,r,s){let o,i=n.scheme;if(r)o="(?:"+n.relativeRef+")";else{e&&(i="(?:"+e+")");const r="(?:"+i+":"+n.hierPart+")";o=t?"(?:"+r+"|"+n.relativeRef+")":r}return new RegExp("^"+o+"(?:\\?"+(s?n.queryWithSquareBrackets:n.query)+")?(?:#"+n.fragment+")?$")}}};e.exports=s.Uri},function(e,t,r){"use strict";const n=r(18),s={Ip:{cidrs:{ipv4:{required:"\\/(?:"+n.ipv4Cidr+")",optional:"(?:\\/(?:"+n.ipv4Cidr+"))?",forbidden:""},ipv6:{required:"\\/"+n.ipv6Cidr,optional:"(?:\\/"+n.ipv6Cidr+")?",forbidden:""},ipvfuture:{required:"\\/"+n.ipv6Cidr,optional:"(?:\\/"+n.ipv6Cidr+")?",forbidden:""}},versions:{ipv4:n.IPv4address,ipv6:n.IPv6address,ipvfuture:n.IPvFuture}}};s.Ip.createIpRegex=function(e,t){let r;for(let n=0;n<e.length;++n){const o=e[n];r?r+="|"+s.Ip.versions[o]+s.Ip.cidrs[o][t]:r="^(?:"+s.Ip.versions[o]+s.Ip.cidrs[o][t]}return new RegExp(r+")$")},e.exports=s.Ip},function(e,t,r){"use strict";const n=r(46),s=r(7),o={hasOwn:Object.prototype.hasOwnProperty,indexOf:Array.prototype.indexOf,defaultThreshold:16,maxIPv6Groups:8,categories:{valid:1,dnsWarn:7,rfc5321:15,cfws:31,deprecated:63,rfc5322:127,error:255},diagnoses:{valid:0,rfc5321TLD:9,rfc5321TLDNumeric:10,rfc5321QuotedString:11,rfc5321AddressLiteral:12,cfwsComment:17,cfwsFWS:18,undesiredNonAscii:25,deprecatedLocalPart:33,deprecatedFWS:34,deprecatedQTEXT:35,deprecatedQP:36,deprecatedComment:37,deprecatedCTEXT:38,deprecatedIPv6:39,deprecatedCFWSNearAt:49,rfc5322Domain:65,rfc5322TooLong:66,rfc5322LocalTooLong:67,rfc5322DomainTooLong:68,rfc5322LabelTooLong:69,rfc5322DomainLiteral:70,rfc5322DomainLiteralOBSDText:71,rfc5322IPv6GroupCount:72,rfc5322IPv62x2xColon:73,rfc5322IPv6BadCharacter:74,rfc5322IPv6MaxGroups:75,rfc5322IPv6ColonStart:76,rfc5322IPv6ColonEnd:77,errExpectingDTEXT:129,errNoLocalPart:130,errNoDomain:131,errConsecutiveDots:132,errATEXTAfterCFWS:133,errATEXTAfterQS:134,errATEXTAfterDomainLiteral:135,errExpectingQPair:136,errExpectingATEXT:137,errExpectingQTEXT:138,errExpectingCTEXT:139,errBackslashEnd:140,errDotStart:141,errDotEnd:142,errDomainHyphenStart:143,errDomainHyphenEnd:144,errUnclosedQuotedString:145,errUnclosedComment:146,errUnclosedDomainLiteral:147,errFWSCRLFx2:148,errFWSCRLFEnd:149,errCRNoLF:150,errUnknownTLD:160,errDomainTooShort:161,errDotAfterDomainLiteral:162},components:{localpart:0,domain:1,literal:2,contextComment:3,contextFWS:4,contextQuotedString:5,contextQuotedPair:6}};o.specials=function(){const e=new Array(256);e.fill(!1);for(let t=0;t<'()<>[]:;@\\,."'.length;++t)e['()<>[]:;@\\,."'.codePointAt(t)]=!0;return function(t){return e[t]}}(),o.c0Controls=function(){const e=new Array(256);e.fill(!1);for(let t=0;t<33;++t)e[t]=!0;return function(t){return e[t]}}(),o.c1Controls=function(){const e=new Array(256);e.fill(!1);for(let t=127;t<160;++t)e[t]=!0;return function(t){return e[t]}}(),o.regex={ipV4:/\b(?:(?:25[0-5]|2[0-4]\d|[01]?\d\d?)\.){3}(?:25[0-5]|2[0-4]\d|[01]?\d\d?)$/,ipV6:/^[a-fA-F\d]{0,4}$/},o.normalizeSupportsNul="\0"==="\0".normalize("NFC"),o.nulNormalize=function(e){return e.split("\0").map(e=>e.normalize("NFC")).join("\0")},o.normalize=function(e){return e.normalize("NFC")},o.normalizeSupportsNul||(o.normalize=function(e){return e.indexOf("\0")>=0?o.nulNormalize(e):e.normalize("NFC")}),o.checkIpV6=function(e){return e.every(e=>o.regex.ipV6.test(e))},o.isIterable=Array.isArray,"undefined"!=typeof Symbol&&(o.isIterable=(e=>Array.isArray(e)||!!e&&"object"==typeof e&&"function"==typeof e[Symbol.iterator])),o._isSet=(e=>e instanceof Set),o._isMap=(e=>e instanceof Map),o.isSet=s.types&&s.types.isSet||o._isSet,o.isMap=s.types&&s.types.isMap||o._isMap,o.normalizeTable=function(e){return o.isSet(e)||Array.isArray(e)?e:o.isMap(e)?e.keys():Object.keys(e)},o.canonicalizeAtom=function(e){return n.toASCII(e).toLowerCase()},o.includesMapped=function(e,t,r){for(const n of e)if(r===t(n))return!0;return!1},o.validDomain=function(e,t){const r=o.canonicalizeAtom(e);return t.tldBlacklist?!o.includesMapped(o.normalizeTable(t.tldBlacklist),o.canonicalizeAtom,r):o.includesMapped(o.normalizeTable(t.tldWhitelist),o.canonicalizeAtom,r)},o.hasDomainLiteralThenAtom=function(e){let t=!1;for(let r=0;r<e.length;++r)if("["===e[r][0])t=!0;else if(t)return!0;return!1},t.validate=o.validate=function(e,t,r){if(t=t||{},"string"!=typeof e)throw new TypeError("expected string email");let s,i;if(e=o.normalize(e),"function"==typeof t&&(r=t,t={}),"function"!=typeof r&&(r=null),"number"==typeof t.errorLevel?(s=!0,i=t.errorLevel):(s=!!t.errorLevel,i=o.diagnoses.valid),t.tldWhitelist)if("string"==typeof t.tldWhitelist)t.tldWhitelist=[t.tldWhitelist];else if("object"!=typeof t.tldWhitelist)throw new TypeError("expected array or object tldWhitelist");if(t.tldBlacklist)if("string"==typeof t.tldBlacklist)t.tldBlacklist=[t.tldBlacklist];else if("object"!=typeof t.tldBlacklist)throw new TypeError("expected array or object tldBlacklist");if(t.minDomainAtoms&&(t.minDomainAtoms!==(0|+t.minDomainAtoms)||t.minDomainAtoms<0))throw new TypeError("expected positive integer minDomainAtoms");if(t.excludeDiagnoses){if(!o.isIterable(t.excludeDiagnoses))throw new TypeError("expected iterable excludeDiagnoses");o.isSet(t.excludeDiagnoses)||(t.excludeDiagnoses=new Set(t.excludeDiagnoses))}let a=o.diagnoses.valid;const c=e=>{!(e>a)||t.excludeDiagnoses&&t.excludeDiagnoses.has(e)||(a=e)};!(void 0===t.allowUnicode||!!t.allowUnicode)&&/[^\x00-\x7f]/.test(e)&&c(o.diagnoses.undesiredNonAscii);const l={now:o.components.localpart,prev:o.components.localpart,stack:[o.components.localpart]};let u="";const f={local:"",domain:""},p={locals:[""],domains:[""]};let h,d=0,m=0,g=0,y=!1,b=!1;const v=e.length;let _;for(let t=0;t<v;t+=_.length){switch(_=String.fromCodePoint(e.codePointAt(t)),l.now){case o.components.localpart:switch(_){case"(":0===m?c(0===d?o.diagnoses.cfwsComment:o.diagnoses.deprecatedComment):(c(o.diagnoses.cfwsComment),b=!0),l.stack.push(l.now),l.now=o.components.contextComment;break;case".":0===m?c(0===d?o.diagnoses.errDotStart:o.diagnoses.errConsecutiveDots):(b&&c(o.diagnoses.deprecatedLocalPart),b=!1,m=0,++d,f.local+=_,p.locals[d]="");break;case'"':0===m?(c(0===d?o.diagnoses.rfc5321QuotedString:o.diagnoses.deprecatedLocalPart),f.local+=_,p.locals[d]+=_,m+=Buffer.byteLength(_,"utf8"),b=!0,l.stack.push(l.now),l.now=o.components.contextQuotedString):c(o.diagnoses.errExpectingATEXT);break;case"\r":if(v===++t||"\n"!==e[t]){c(o.diagnoses.errCRNoLF);break}case" ":case"\t":0===m?c(0===d?o.diagnoses.cfwsFWS:o.diagnoses.deprecatedFWS):b=!0,l.stack.push(l.now),l.now=o.components.contextFWS,u=_;break;case"@":if(1!==l.stack.length)throw new Error("unexpected item on context stack");0===f.local.length?c(o.diagnoses.errNoLocalPart):0===m?c(o.diagnoses.errDotEnd):Buffer.byteLength(f.local,"utf8")>64?c(o.diagnoses.rfc5322LocalTooLong):l.prev!==o.components.contextComment&&l.prev!==o.components.contextFWS||c(o.diagnoses.deprecatedCFWSNearAt),l.now=o.components.domain,l.stack[0]=o.components.domain,d=0,m=0,b=!1;break;default:if(b)switch(l.prev){case o.components.contextComment:case o.components.contextFWS:c(o.diagnoses.errATEXTAfterCFWS);break;case o.components.contextQuotedString:c(o.diagnoses.errATEXTAfterQS);break;default:throw new Error("more atext found where none is allowed, but unrecognized prev context: "+l.prev)}else l.prev=l.now,h=_.codePointAt(0),(o.specials(h)||o.c0Controls(h)||o.c1Controls(h))&&c(o.diagnoses.errExpectingATEXT),f.local+=_,p.locals[d]+=_,m+=Buffer.byteLength(_,"utf8")}break;case o.components.domain:switch(_){case"(":0===m?c(0===d?o.diagnoses.deprecatedCFWSNearAt:o.diagnoses.deprecatedComment):(b=!0,c(o.diagnoses.cfwsComment)),l.stack.push(l.now),l.now=o.components.contextComment;break;case".":const r=n.toASCII(p.domains[d]).length;0===m?c(0===d?o.diagnoses.errDotStart:o.diagnoses.errConsecutiveDots):y?c(o.diagnoses.errDomainHyphenEnd):r>63&&c(o.diagnoses.rfc5322LabelTooLong),b=!1,m=0,++d,p.domains[d]="",f.domain+=_;break;case"[":0===p.domains[d].length?(f.domain.length&&c(o.diagnoses.errDotAfterDomainLiteral),b=!0,m+=Buffer.byteLength(_,"utf8"),l.stack.push(l.now),l.now=o.components.literal,f.domain+=_,p.domains[d]+=_,f.literal=""):c(o.diagnoses.errExpectingATEXT);break;case"\r":if(v===++t||"\n"!==e[t]){c(o.diagnoses.errCRNoLF);break}case" ":case"\t":0===m?c(0===d?o.diagnoses.deprecatedCFWSNearAt:o.diagnoses.deprecatedFWS):(c(o.diagnoses.cfwsFWS),b=!0),l.stack.push(l.now),l.now=o.components.contextFWS,u=_;break;default:if(b)switch(l.prev){case o.components.contextComment:case o.components.contextFWS:c(o.diagnoses.errATEXTAfterCFWS);break;case o.components.literal:c(o.diagnoses.errATEXTAfterDomainLiteral);break;default:throw new Error("more atext found where none is allowed, but unrecognized prev context: "+l.prev)}h=_.codePointAt(0),y=!1,o.specials(h)||o.c0Controls(h)||o.c1Controls(h)?c(o.diagnoses.errExpectingATEXT):"-"===_?(0===m&&c(o.diagnoses.errDomainHyphenStart),y=!0):(h<48||h>122&&h<192||h>57&&h<65||h>90&&h<97)&&c(o.diagnoses.rfc5322Domain),f.domain+=_,p.domains[d]+=_,m+=Buffer.byteLength(_,"utf8")}break;case o.components.literal:switch(_){case"]":if(a<o.categories.deprecated){let e=-1,t=f.literal;const r=o.regex.ipV4.exec(t);if(r&&0!==(e=r.index)&&(t=t.slice(0,e)+"0:0"),0===e)c(o.diagnoses.rfc5321AddressLiteral);else if("ipv6:"!==t.slice(0,5).toLowerCase())c(o.diagnoses.rfc5322DomainLiteral);else{const r=t.slice(5);let n=o.maxIPv6Groups;const s=r.split(":");~(e=r.indexOf("::"))?e!==r.lastIndexOf("::")?c(o.diagnoses.rfc5322IPv62x2xColon):(0!==e&&e!==r.length-2||++n,s.length>n?c(o.diagnoses.rfc5322IPv6MaxGroups):s.length===n&&c(o.diagnoses.deprecatedIPv6)):s.length!==n&&c(o.diagnoses.rfc5322IPv6GroupCount),":"===r[0]&&":"!==r[1]?c(o.diagnoses.rfc5322IPv6ColonStart):":"===r[r.length-1]&&":"!==r[r.length-2]?c(o.diagnoses.rfc5322IPv6ColonEnd):o.checkIpV6(s)?c(o.diagnoses.rfc5321AddressLiteral):c(o.diagnoses.rfc5322IPv6BadCharacter)}}else c(o.diagnoses.rfc5322DomainLiteral);f.domain+=_,p.domains[d]+=_,m+=Buffer.byteLength(_,"utf8"),l.prev=l.now,l.now=l.stack.pop();break;case"\\":c(o.diagnoses.rfc5322DomainLiteralOBSDText),l.stack.push(l.now),l.now=o.components.contextQuotedPair;break;case"\r":if(v===++t||"\n"!==e[t]){c(o.diagnoses.errCRNoLF);break}case" ":case"\t":c(o.diagnoses.cfwsFWS),l.stack.push(l.now),l.now=o.components.contextFWS,u=_;break;default:if(127!==(h=_.codePointAt(0))&&o.c1Controls(h)||0===h||"["===_){c(o.diagnoses.errExpectingDTEXT);break}(o.c0Controls(h)||127===h)&&c(o.diagnoses.rfc5322DomainLiteralOBSDText),f.literal+=_,f.domain+=_,p.domains[d]+=_,m+=Buffer.byteLength(_,"utf8")}break;case o.components.contextQuotedString:switch(_){case"\\":l.stack.push(l.now),l.now=o.components.contextQuotedPair;break;case"\r":if(v===++t||"\n"!==e[t]){c(o.diagnoses.errCRNoLF);break}case"\t":f.local+=" ",p.locals[d]+=" ",m+=Buffer.byteLength(_,"utf8"),c(o.diagnoses.cfwsFWS),l.stack.push(l.now),l.now=o.components.contextFWS,u=_;break;case'"':f.local+=_,p.locals[d]+=_,m+=Buffer.byteLength(_,"utf8"),l.prev=l.now,l.now=l.stack.pop();break;default:127!==(h=_.codePointAt(0))&&o.c1Controls(h)||0===h||10===h?c(o.diagnoses.errExpectingQTEXT):(o.c0Controls(h)||127===h)&&c(o.diagnoses.deprecatedQTEXT),f.local+=_,p.locals[d]+=_,m+=Buffer.byteLength(_,"utf8")}break;case o.components.contextQuotedPair:127!==(h=_.codePointAt(0))&&o.c1Controls(h)?c(o.diagnoses.errExpectingQPair):(h<31&&9!==h||127===h)&&c(o.diagnoses.deprecatedQP),l.prev=l.now,l.now=l.stack.pop();const r="\\"+_;switch(l.now){case o.components.contextComment:break;case o.components.contextQuotedString:f.local+=r,p.locals[d]+=r,m+=2;break;case o.components.literal:f.domain+=r,p.domains[d]+=r,m+=2;break;default:throw new Error("quoted pair logic invoked in an invalid context: "+l.now)}break;case o.components.contextComment:switch(_){case"(":l.stack.push(l.now),l.now=o.components.contextComment;break;case")":l.prev=l.now,l.now=l.stack.pop();break;case"\\":l.stack.push(l.now),l.now=o.components.contextQuotedPair;break;case"\r":if(v===++t||"\n"!==e[t]){c(o.diagnoses.errCRNoLF);break}case" ":case"\t":c(o.diagnoses.cfwsFWS),l.stack.push(l.now),l.now=o.components.contextFWS,u=_;break;default:if(0===(h=_.codePointAt(0))||10===h||127!==h&&o.c1Controls(h)){c(o.diagnoses.errExpectingCTEXT);break}(o.c0Controls(h)||127===h)&&c(o.diagnoses.deprecatedCTEXT)}break;case o.components.contextFWS:if("\r"===u){if("\r"===_){c(o.diagnoses.errFWSCRLFx2);break}++g>1?c(o.diagnoses.deprecatedFWS):g=1}switch(_){case"\r":v!==++t&&"\n"===e[t]||c(o.diagnoses.errCRNoLF);break;case" ":case"\t":break;default:"\r"===u&&c(o.diagnoses.errFWSCRLFEnd),g=0,l.prev=l.now,l.now=l.stack.pop(),--t}u=_;break;default:throw new Error("unknown context: "+l.now)}if(a>o.categories.rfc5322)break}if(a<o.categories.rfc5322){const e=n.toASCII(f.domain).length;if(l.now===o.components.contextQuotedString)c(o.diagnoses.errUnclosedQuotedString);else if(l.now===o.components.contextQuotedPair)c(o.diagnoses.errBackslashEnd);else if(l.now===o.components.contextComment)c(o.diagnoses.errUnclosedComment);else if(l.now===o.components.literal)c(o.diagnoses.errUnclosedDomainLiteral);else if("\r"===_)c(o.diagnoses.errFWSCRLFEnd);else if(0===f.domain.length)c(o.diagnoses.errNoDomain);else if(0===m)c(o.diagnoses.errDotEnd);else if(y)c(o.diagnoses.errDomainHyphenEnd);else if(e>255)c(o.diagnoses.rfc5322DomainTooLong);else if(Buffer.byteLength(f.local,"utf8")+e+1>254)c(o.diagnoses.rfc5322TooLong);else if(m>63)c(o.diagnoses.rfc5322LabelTooLong);else if(t.minDomainAtoms&&p.domains.length<t.minDomainAtoms&&(1!==p.domains.length||"["!==p.domains[0][0]))c(o.diagnoses.errDomainTooShort);else if(o.hasDomainLiteralThenAtom(p.domains))c(o.diagnoses.errDotAfterDomainLiteral);else if(t.tldWhitelist||t.tldBlacklist){const e=p.domains[d];o.validDomain(e,t)||c(o.diagnoses.errUnknownTLD)}}if(a<o.categories.dnsWarn){p.domains[d].codePointAt(0)<=57&&c(o.diagnoses.rfc5321TLDNumeric)}a<i&&(a=o.diagnoses.valid);const w=s?a:a<o.defaultThreshold;return r&&r(w),w},t.diagnoses=o.validate.diagnoses=function(){const e={},t=Object.keys(o.diagnoses);for(let r=0;r<t.length;++r){const n=t[r];e[n]=o.diagnoses[n]}return e}(),t.normalize=o.normalize},function(e,t){e.exports=require("punycode")},function(e,t,r){"use strict";const n=r(7),s=r(1),o=r(0),i={};i.Map=class extends Map{slice(){return new i.Map(this)}toString(){return n.inspect(this)}},i.Symbol=class extends s{constructor(){super(),this._type="symbol",this._inner.map=new i.Map}_base(e,t,r){if(r.convert){const n=this._inner.map.get(e);if(n&&(e=n),this._flags.allowOnly)return{value:e,errors:"symbol"==typeof e?null:this.createError("symbol.map",{map:this._inner.map},t,r)}}return{value:e,errors:"symbol"==typeof e?null:this.createError("symbol.base",null,t,r)}}map(e){e&&!e[Symbol.iterator]&&"object"==typeof e&&(e=Object.entries(e)),o.assert(e&&e[Symbol.iterator],"Iterable must be an iterable or object");const t=this.clone(),r=[];for(const n of e){o.assert(n&&n[Symbol.iterator],"Entry must be an iterable");const[e,s]=n;o.assert("object"!=typeof e&&"function"!=typeof e&&"symbol"!=typeof e,"Key must not be an object, function, or Symbol"),o.assert("symbol"==typeof s,"Value must be a Symbol"),t._inner.map.set(e,s),r.push(s)}return t.valid(...r)}describe(){const e=super.describe();return e.map=new Map(this._inner.map),e}},e.exports=new i.Symbol},function(e){e.exports={_args:[["joi@13.7.0","/home/calvin/Projects/basebot-server/packages/basebot-auth-microsoft"]],_from:"joi@13.7.0",_id:"joi@13.7.0",_inBundle:!1,_integrity:"sha512-xuY5VkHfeOYK3Hdi91ulocfuFopwgbSORmIwzcwHKESQhC7w1kD5jaVSPnqDxS2I8t3RZ9omCKAxNwXN5zG1/Q==",_location:"/joi",_phantomChildren:{},_requested:{type:"version",registry:!0,raw:"joi@13.7.0",name:"joi",escapedName:"joi",rawSpec:"13.7.0",saveSpec:null,fetchSpec:"13.7.0"},_requiredBy:["/simple-oauth2"],_resolved:"https://registry.npmjs.org/joi/-/joi-13.7.0.tgz",_spec:"13.7.0",_where:"/home/calvin/Projects/basebot-server/packages/basebot-auth-microsoft",bugs:{url:"https://github.com/hapijs/joi/issues"},dependencies:{hoek:"5.x.x",isemail:"3.x.x",topo:"3.x.x"},description:"Object schema validation",devDependencies:{code:"5.x.x",hapitoc:"1.x.x",lab:"15.x.x"},engines:{node:">=8.9.0"},homepage:"https://github.com/hapijs/joi",keywords:["hapi","schema","validation"],license:"BSD-3-Clause",main:"lib/index.js",name:"joi",repository:{type:"git",url:"git://github.com/hapijs/joi.git"},scripts:{test:"lab -t 100 -a code -L","test-cov-html":"lab -r html -o coverage.html -a code","test-debug":"lab -a code",toc:"hapitoc",version:"npm run toc && git add API.md README.md"},version:"13.7.0"}},function(e,t,r){"use strict";const n=r(19),s=r(20),o=r(8);e.exports=(e=>{const t=o(e),r=n.resolve(e.auth.authorizeHost,e.auth.authorizePath);return{authorizeURL:function(t={}){const n={response_type:"code",[e.client.idParamName]:e.client.id};Array.isArray(t.scope)&&(t.scope=t.scope.join(","));const o=Object.assign({},n,t);return`${r}?${s.stringify(o)}`},getToken:async function(r){const n=Object.assign({},r,{grant_type:"authorization_code"});return t.request(e.auth.tokenPath,n)}}})},function(e,t,r){"use strict";const n=r(51),s=r(52),o=r(53),i=r(9),a=r(19),c=r(54),l=r(21),u=r(58),f=r(59),p=r(22),h=r(62),d=r(63),m={jsonRegex:/^application\/([a-z0-9.]*[+-]json|json)$/,shallowOptions:["agent","agents","beforeRedirect","downstreamRes","payload","redirected"],Client:function(e={}){f.assert(!e.agents||e.agents.https&&e.agents.http&&e.agents.httpsAllowUnauthorized,'Option agents must include "http", "https", and "httpsAllowUnauthorized"'),this._defaults=f.cloneWithShallow(e,m.shallowOptions),this.agents=this._defaults.agents||{https:new o.Agent({maxSockets:1/0}),http:new s.Agent({maxSockets:1/0}),httpsAllowUnauthorized:new o.Agent({maxSockets:1/0,rejectUnauthorized:!1})},e.events&&(this.events=new n.EventEmitter,this._emit=function(...e){this.events.emit(...e)})}};m.Client.prototype.defaults=function(e){return f.assert(e&&"object"==typeof e,"options must be provided to defaults"),e=f.applyToDefaultsWithShallow(this._defaults,e,m.shallowOptions),new m.Client(e)},m.resolveUrl=function(e,t){if(!t)return e;const r=a.parse(t);if(r.host)return f.assert(r.protocol,"Invalid destination path missing protocol"),a.format(r);const n=a.parse(e);return n.pathname=n.pathname+r.pathname,n.pathname=n.pathname.replace(/[\/]{2,}/g,"/"),n.search=r.search,a.format(n)},m.Client.prototype.request=function(e,t,r={}){try{r=f.applyToDefaultsWithShallow(this._defaults,r,m.shallowOptions),f.assert(void 0===r.payload||"string"==typeof r.payload||"object"==typeof r.payload,"options.payload must be a string, a Buffer, a Stream, or an Object"),f.assert(void 0===r.agent||null===r.agent||"boolean"!=typeof r.rejectUnauthorized,"options.agent cannot be set to an Agent at the same time as options.rejectUnauthorized is set"),f.assert(void 0===r.beforeRedirect||null===r.beforeRedirect||"function"==typeof r.beforeRedirect,"options.beforeRedirect must be a function"),f.assert(void 0===r.redirected||null===r.redirected||"function"==typeof r.redirected,"options.redirected must be a function"),f.assert(void 0===r.gunzip||"boolean"==typeof r.gunzip||"force"===r.gunzip,'options.gunzip must be a boolean or "force"')}catch(e){return Promise.reject(e)}r.beforeRedirect=r.beforeRedirect||((e,t,r,n,s,o)=>o()),r.baseUrl&&(t=m.resolveUrl(r.baseUrl,t),delete r.baseUrl);const n={},s=this._request(e,t,r,n),o=new Promise((e,t)=>{n.callback=((r,n)=>{r?t(r):e(n)})});return o.req=s,o},m.Client.prototype._request=function(e,t,r,n,c){const u={};let p;r.socketPath?(u.socketPath=r.socketPath,delete r.socketPath,p=a.parse(t)):(u.setHost=!1,p=new a.URL(t)),m.applyUrlToOptions(u,p),u.method=e.toUpperCase(),u.headers=r.headers||{},u.headers.host=p.host;const h=void 0!==m.findHeader("content-length",u.headers);!r.payload||"object"!=typeof r.payload||r.payload instanceof i||Buffer.isBuffer(r.payload)||(r.payload=JSON.stringify(r.payload),m.findHeader("content-type",u.headers)||(u.headers["content-type"]="application/json")),r.gunzip&&void 0===m.findHeader("accept-encoding",u.headers)&&(u.headers["accept-encoding"]="gzip");const g="GET"!==u.method&&"HEAD"!==u.method&&null!==r.payload&&void 0!==r.payload;!g||"string"!=typeof r.payload&&!Buffer.isBuffer(r.payload)||h||(u.headers=f.clone(u.headers),u.headers["content-length"]=Buffer.isBuffer(r.payload)?r.payload.length:Buffer.byteLength(r.payload));let y=!!r.hasOwnProperty("redirects")&&r.redirects;(c=c||[]).push({method:u.method,url:t});const b="https:"===u.protocol?o:s;void 0!==r.rejectUnauthorized&&"https:"===u.protocol?u.agent=r.rejectUnauthorized?this.agents.https:this.agents.httpsAllowUnauthorized:r.agent||!1===r.agent?u.agent=r.agent:u.agent="https:"===u.protocol?this.agents.https:this.agents.http,void 0!==r.secureProtocol&&(u.secureProtocol=r.secureProtocol),void 0!==r.ciphers&&(u.ciphers=r.ciphers),this._emit&&this._emit("request",u,r);const v=Date.now(),_=b.request(u);let w,x=null;const k=e=>(e.trace=c,S(l.badGateway("Client request error",e)));_.once("error",k);const j=e=>{const t=e.statusCode,n=m.redirectMethod(t,u.method,r);if(!1===y||!n)return S(null,e);if(e.destroy(),0===y)return S(l.badGateway("Maximum redirections reached",c));let s=e.headers.location;if(!s)return S(l.badGateway("Received redirection without location",c));/^https?:/i.test(s)||(s=a.resolve(u.href,s));const o=f.cloneWithShallow(r,m.shallowOptions);return o.payload=x||r.payload,o.redirects=--y,r.beforeRedirect(n,t,s,e.headers,o,()=>{const e=this._request(n,s,o,{callback:S},c);r.redirected&&r.redirected(t,s,e)})},S=f.once((e,t)=>(e&&_.abort(),_.removeListener("response",j),_.removeListener("error",k),_.on("error",f.ignore),clearTimeout(w),this._emit&&this._emit("response",e,{req:_,res:t,start:v,uri:u}),n.callback(e,t)));_.once("response",j),r.timeout&&(w=setTimeout(()=>S(l.gatewayTimeout("Client request timeout")),r.timeout),delete r.timeout);const C=_.abort;let E=!1;if(_.abort=(()=>(E||_.res||_.socket||process.nextTick(()=>{const e=new Error("socket hang up");e.code="ECONNRESET",S(e)}),E=!0,C.call(_))),g){if(r.payload instanceof i){let e=r.payload;if(y){const t=new d;t.once("finish",()=>{x=t.collect()}),e=r.payload.pipe(t)}return m.deferPipeUntilSocketConnects(_,e),_}_.write(r.payload)}return _.end(),_},m.deferPipeUntilSocketConnects=function(e,t){const r=()=>{t.pipe(e),t.removeListener("error",n)},n=t=>{e.emit("error",t)};e.once("socket",e=>{if(!e.connecting)return r();e.once("connect",r)}),t.on("error",n)},m.redirectMethod=function(e,t,r){switch(e){case 301:case 302:return t;case 303:if(r.redirect303)return"GET";break;case 307:case 308:return t}return null},m.Client.prototype.read=function(e,t={}){return new Promise((r,n)=>{this._read(e,t,(e,t)=>{e?n(e):r(t)})})},m.Client.prototype._read=function(e,t,r){t=f.applyToDefaultsWithShallow(this._defaults,t,m.shallowOptions);let n=null;const s=f.once((s,o)=>{if(clearTimeout(n),u.removeListener("error",p),u.removeListener("finish",d),e.removeListener("error",i),e.removeListener("close",a),e.removeListener("aborted",a),e.on("error",f.ignore),s)return r(s);if(!t.json)return r(null,o);if(0===o.length)return r(null,null);if("force"===t.json)return m.tryParseBuffer(o,r);const c=(e.headers&&m.findHeader("content-type",e.headers)||"").split(";")[0].trim().toLowerCase();return m.jsonRegex.test(c)?m.tryParseBuffer(o,r):"strict"===t.json?r(l.notAcceptable("The content-type is not JSON compatible")):r(null,o)}),o=t.timeout;o&&o>0&&(n=setTimeout(()=>{s(l.clientTimeout())},o));const i=e=>s(e.isBoom?e:l.internal("Payload stream error",e)),a=()=>{if(!e.complete)return s(l.internal("Payload stream closed prematurely"))};e.once("error",i),e.once("close",a),e.once("aborted",a);const u=new h({maxBytes:t.maxBytes}),p=t=>(e.destroy&&e.destroy(),s(t));u.once("error",p);const d=()=>s(null,u.collect());if(u.once("finish",d),t.gunzip){const r="force"===t.gunzip?"gzip":e.headers&&m.findHeader("content-encoding",e.headers)||"";if(/^(x-)?gzip(\s*,\s*identity)?$/.test(r)){const t=c.createGunzip();return t.once("error",p),void e.pipe(t).pipe(u)}}e.pipe(u)},m.Client.prototype.toReadableStream=function(e,t){return new p(e,t)},m.Client.prototype.parseCacheControl=function(e){const t={},r=e.replace(/(?:^|(?:\s*\,\s*))([^\x00-\x20\(\)<>@\,;\:\\"\/\[\]\?\=\{\}\x7F]+)(?:\=(?:([^\x00-\x20\(\)<>@\,;\:\\"\/\[\]\?\=\{\}\x7F]+)|(?:\"((?:[^"\\]|\\.)*)\")))?/g,(e,r,n,s)=>{const o=n||s;return t[r]=!o||o.toLowerCase(),""});if(t["max-age"])try{const e=parseInt(t["max-age"],10);if(isNaN(e))return null;t["max-age"]=e}catch(e){}return r?null:t},m.Client.prototype.get=function(e,t){return this._shortcut("GET",e,t)},m.Client.prototype.post=function(e,t){return this._shortcut("POST",e,t)},m.Client.prototype.patch=function(e,t){return this._shortcut("PATCH",e,t)},m.Client.prototype.put=function(e,t){return this._shortcut("PUT",e,t)},m.Client.prototype.delete=function(e,t){return this._shortcut("DELETE",e,t)},m.Client.prototype._shortcut=async function(e,t,r={}){const n=await this.request(e,t,r);let s;try{s=await this.read(n,r)}catch(e){throw e.data=e.data||{},e.data.res=n,e}if(n.statusCode<400)return{res:n,payload:s};const o={isResponseError:!0,headers:n.headers,res:n,payload:s};throw new l(`Response Error: ${n.statusCode} ${n.statusMessage}`,{statusCode:n.statusCode,data:o})},m.tryParseBuffer=function(e,t){let r;try{r=u.parse(e.toString())}catch(r){return t(l.badGateway(r.message,{payload:e}))}return t(null,r)},m.findHeader=function(e,t){const r=Object.keys(t).find(t=>t.toLowerCase()===e.toLowerCase());return r&&t[r]},m.applyUrlToOptions=((e,t)=>(e.origin=t.origin,e.searchParams=t.searchParams,e.protocol=t.protocol,e.hostname=t.hostname,e.hash=t.hash,e.search=t.search,e.pathname=t.pathname,e.path=`${t.pathname}${t.search||""}`,e.href=t.href,""!==t.port&&(e.port=Number(t.port)),(t.username||t.password)&&(e.auth=`${t.username}:${t.password}`,e.username=t.username,e.password=t.password),e)),e.exports=new m.Client},function(e,t){e.exports=require("events")},function(e,t){e.exports=require("http")},function(e,t){e.exports=require("https")},function(e,t){e.exports=require("zlib")},function(e,t,r){"use strict";const n=r(4),s=r(5),o=r(6),i=r(56),a=r(57),c={};t.deepEqual=i,t.clone=function(e,r={},n=null){if("object"!=typeof e||null===e)return e;const s=n||new Map,o=s.get(e);if(o)return o;let i,a=!1;const l=Array.isArray(e);if(l)i=[],a=!0;else if(Buffer.isBuffer(e))i=Buffer.from(e);else if(e instanceof Date)i=new Date(e.getTime());else if(e instanceof RegExp)i=new RegExp(e);else if(!1!==r.prototype){const t=Object.getPrototypeOf(e);t&&t.isImmutable?i=e:(i=Object.create(t),a=!0)}else i={},a=!0;if(s.set(e,i),a){const n=c.keys(e,r);for(let o=0;o<n.length;++o){const a=n[o];if(l&&"length"===a)continue;const c=Object.getOwnPropertyDescriptor(e,a);c&&(c.get||c.set)?Object.defineProperty(i,a,c):Object.defineProperty(i,a,{enumerable:!c||c.enumerable,writable:!0,configurable:!0,value:t.clone(e[a],r,s)})}l&&(i.length=e.length)}return i},c.keys=function(e,t={}){return t.symbols?Reflect.ownKeys(e):Object.getOwnPropertyNames(e)},t.merge=function(e,r,n,s){if(t.assert(e&&"object"==typeof e,"Invalid target value: must be an object"),t.assert(null==r||"object"==typeof r,"Invalid source value: must be null, undefined, or an object"),!r)return e;if(Array.isArray(r)){t.assert(Array.isArray(e),"Cannot merge array onto an object"),!1===s&&(e.length=0);for(let n=0;n<r.length;++n)e.push(t.clone(r[n]));return e}const o=c.keys(r);for(let i=0;i<o.length;++i){const a=o[i];if("__proto__"===a||!Object.prototype.propertyIsEnumerable.call(r,a))continue;const c=r[a];c&&"object"==typeof c?!e[a]||"object"!=typeof e[a]||Array.isArray(e[a])!==Array.isArray(c)||c instanceof Date||Buffer.isBuffer(c)||c instanceof RegExp?e[a]=t.clone(c):t.merge(e[a],c,n,s):null!=c?e[a]=c:!1!==n&&(e[a]=c)}return e},t.applyToDefaults=function(e,r,n){if(t.assert(e&&"object"==typeof e,"Invalid defaults value: must be an object"),t.assert(!r||!0===r||"object"==typeof r,"Invalid options value: must be true, falsy or an object"),!r)return null;const s=t.clone(e);return!0===r?s:t.merge(s,r,!0===n,!1)},t.cloneWithShallow=function(e,r,n){if(!e||"object"!=typeof e)return e;const s=c.store(e,r),o=t.clone(e,n);return c.restore(o,e,s),o},c.store=function(e,r){const n=new Map;for(let s=0;s<r.length;++s){const o=r[s],i=t.reach(e,o);"object"!=typeof i&&"function"!=typeof i||(n.set(o,i),c.reachSet(e,o,void 0))}return n},c.restore=function(e,t,r){for(const[n,s]of r)c.reachSet(e,n,s),c.reachSet(t,n,s)},c.reachSet=function(e,t,r){const n=Array.isArray(t)?t:t.split(".");let s=e;for(let e=0;e<n.length;++e){const t=n[e];e+1===n.length&&(s[t]=r),s=s[t]}},t.applyToDefaultsWithShallow=function(e,r,n){if(t.assert(e&&"object"==typeof e,"Invalid defaults value: must be an object"),t.assert(!r||!0===r||"object"==typeof r,"Invalid options value: must be true, falsy or an object"),t.assert(n&&Array.isArray(n),"Invalid keys"),!r)return null;const s=t.cloneWithShallow(e,n);if(!0===r)return s;const o=c.store(r,n);return t.merge(s,r,!1,!1),c.restore(s,r,o),s},t.intersect=function(e,t,r){if(!e||!t)return r?null:[];const n=[],s=Array.isArray(e)?new Set(e):e,o=new Set;for(const e of t)if(c.has(s,e)&&!o.has(e)){if(r)return e;n.push(e),o.add(e)}return r?null:n},c.has=function(e,t){return"function"==typeof e.has?e.has(t):void 0!==e[t]},t.contain=function(e,r,n={}){let s,o,i=null;if("object"!=typeof e||"object"!=typeof r||Array.isArray(e)||Array.isArray(r))r=[].concat(r);else{i=r;const e=Object.getOwnPropertySymbols(r).filter(Object.prototype.propertyIsEnumerable.bind(r));r=[...Object.keys(r),...e]}if(t.assert("string"==typeof e||"object"==typeof e,"Reference must be string or an object"),t.assert(r.length,"Values array cannot be empty"),n.deep){s=t.deepEqual;const e=n.hasOwnProperty("only"),r=n.hasOwnProperty("part");o={prototype:e?n.only:!!r&&!n.part,part:e?!n.only:!!r&&n.part}}else s=((e,t)=>e===t);let a=!1;const l=new Array(r.length);for(let e=0;e<l.length;++e)l[e]=0;if("string"==typeof e){let n="(";for(let e=0;e<r.length;++e){const s=r[e];t.assert("string"==typeof s,"Cannot compare string reference to non-string value"),n+=(e?"|":"")+t.escapeRegex(s)}const s=new RegExp(n+")","g");a=!!e.replace(s,(e,t)=>{const n=r.indexOf(t);return++l[n],""})}else if(Array.isArray(e)){const t=!(!n.only||!n.once);if(t&&e.length!==r.length)return!1;for(let n=0;n<e.length;++n){let i=!1;for(let a=0;a<r.length&&!1===i;++a)t&&0!==l[a]||(i=s(r[a],e[n],o)&&a);!1!==i?++l[i]:a=!0}}else{const t=c.keys(e,n);for(let n=0;n<t.length;++n){const c=t[n],u=r.indexOf(c);if(-1!==u){if(i&&!s(i[c],e[c],o))return!1;++l[u]}else a=!0}}if(n.only&&(a||!n.once))return!a;let u=!1;for(let e=0;e<l.length;++e)if(u=u||!!l[e],n.once&&l[e]>1||!n.part&&!l[e])return!1;return u},t.flatten=function(e,r){const n=r||[];for(let r=0;r<e.length;++r)Array.isArray(e[r])?t.flatten(e[r],n):n.push(e[r]);return n},t.reach=function(e,r,n){if(!1===r||null==r)return e;"string"==typeof(n=n||{})&&(n={separator:n});const s=Array.isArray(r);t.assert(!s||!n.separator,"Separator option no valid for array-based chain");const o=s?r:r.split(n.separator||".");let i=e;for(let e=0;e<o.length;++e){let s=o[e];if(Array.isArray(i)){const e=Number(s);Number.isInteger(e)&&e<0&&(s=i.length+e)}if(!i||"object"!=typeof i&&"function"!=typeof i||!(s in i)||"object"!=typeof i&&!1===n.functions){t.assert(!n.strict||e+1===o.length,"Missing segment",s,"in reach path ",r),t.assert("object"==typeof i||!0===n.functions||"function"!=typeof i,"Invalid segment",s,"in reach path ",r),i=n.default;break}i=i[s]}return i},t.reachTemplate=function(e,r,n){return r.replace(/{([^}]+)}/g,(r,s)=>{const o=t.reach(e,s,n);return null==o?"":o})},t.assert=function(e,...r){if(e)return;if(1===r.length&&r[0]instanceof Error)throw r[0];const s=r.filter(e=>""!==e).map(e=>"string"==typeof e?e:e instanceof Error?e.message:t.stringify(e));throw new n.AssertionError({message:s.join(" ")||"Unknown error",actual:!1,expected:!0,operator:"==",stackStartFunction:t.assert})},t.Bench=function(){this.ts=0,this.reset()},t.Bench.prototype.reset=function(){this.ts=t.Bench.now()},t.Bench.prototype.elapsed=function(){return t.Bench.now()-this.ts},t.Bench.now=function(){const e=process.hrtime();return 1e3*e[0]+e[1]/1e6},t.escapeRegex=function(e){return e.replace(/[\^\$\.\*\+\-\?\=\!\:\|\\\/\(\)\[\]\{\}\,]/g,"\\$&")},t.escapeHeaderAttribute=function(e){return t.assert(/^[ \w\!#\$%&'\(\)\*\+,\-\.\/\:;<\=>\?@\[\]\^`\{\|\}~\"\\]*$/.test(e),"Bad attribute value ("+e+")"),e.replace(/\\/g,"\\\\").replace(/\"/g,'\\"')},t.escapeHtml=function(e){return a.escapeHtml(e)},t.escapeJson=function(e){return a.escapeJson(e)},t.once=function(e){if(e._hoekOnce)return e;let t=!1;const r=function(...r){t||(t=!0,e(...r))};return r._hoekOnce=!0,r},t.ignore=function(){},t.uniqueFilename=function(e,t){t=t?"."!==t[0]?"."+t:t:"",e=o.resolve(e);const r=[Date.now(),process.pid,s.randomBytes(8).toString("hex")].join("-")+t;return o.join(e,r)},t.stringify=function(...e){try{return JSON.stringify.apply(null,e)}catch(e){return"[Cannot display object: "+e.message+"]"}},t.wait=function(e){return new Promise(t=>setTimeout(t,e))},t.block=function(){return new Promise(t.ignore)}},function(e,t,r){"use strict";const n={arrayType:Symbol("array"),bufferType:Symbol("buffer"),dateType:Symbol("date"),errorType:Symbol("error"),genericType:Symbol("generic"),mapType:Symbol("map"),regexType:Symbol("regex"),setType:Symbol("set"),weakMapType:Symbol("weak-map"),weakSetType:Symbol("weak-set"),mismatched:Symbol("mismatched")};n.typeMap={"[object Array]":n.arrayType,"[object Date]":n.dateType,"[object Error]":n.errorType,"[object Map]":n.mapType,"[object RegExp]":n.regexType,"[object Set]":n.setType,"[object WeakMap]":n.weakMapType,"[object WeakSet]":n.weakSetType},n.SeenEntry=class{constructor(e,t){this.obj=e,this.ref=t}isSame(e,t){return this.obj===e&&this.ref===t}},n.getInternalType=function(e){const{typeMap:t,bufferType:r,genericType:s}=n;return e instanceof Buffer?r:t[Object.prototype.toString.call(e)]||s},n.getSharedType=function(e,t,r){if(r)return Object.getPrototypeOf(e)!==Object.getPrototypeOf(t)?n.mismatched:n.getInternalType(e);const s=n.getInternalType(e);return s!==n.getInternalType(t)?n.mismatched:s},n.valueOf=function(e){const t=e.valueOf;if(void 0===t)return e;try{return t.call(e)}catch(e){return e}},n.hasOwnEnumerableProperty=function(e,t){return Object.prototype.propertyIsEnumerable.call(e,t)},n.isSetSimpleEqual=function(e,t){for(const r of e)if(!t.has(r))return!1;return!0},n.isDeepEqualObj=function(e,t,r,s,o){const{isDeepEqual:i,valueOf:a,hasOwnEnumerableProperty:c}=n,{keys:l,getOwnPropertySymbols:u}=Object;if(e===n.arrayType){if(!s.part){if(t.length!==r.length)return!1;for(let e=0;e<t.length;++e)if(!i(t[e],r[e],s,o))return!1;return!0}for(let e=0;e<t.length;++e){const n=t[e];for(let e=0;e<r.length;++e)if(i(n,r[e],s,o))return!0}}else if(e===n.setType){if(t.size!==r.size)return!1;if(!n.isSetSimpleEqual(t,r)){const e=new Set(r);for(const r of t){if(e.delete(r))continue;let t=!1;for(const n of e)if(i(r,n,s,o)){e.delete(n),t=!0;break}if(!t)return!1}}}else if(e===n.mapType){if(t.size!==r.size)return!1;for(const[e,n]of t){if(void 0===n&&!r.has(e))return!1;if(!i(n,r.get(e),s,o))return!1}}else if(e===n.errorType&&(t.name!==r.name||t.message!==r.message))return!1;const f=a(t),p=a(r);if((t!==f||r!==p)&&!i(f,p,s,o))return!1;const h=l(t);if(!s.part&&h.length!==l(r).length)return!1;for(let e=0;e<h.length;++e){const n=h[e];if(!c(r,n))return!1;if(!i(t[n],r[n],s,o))return!1}if(s.symbols){const e=u(t),n=new Set(u(r));for(let a=0;a<e.length;++a){const l=e[a];if(c(t,l)){if(!c(r,l))return!1;if(!i(t[l],r[l],s,o))return!1}else if(c(r,l))return!1;n.delete(l)}for(const e of n)if(c(r,e))return!1}return!0},n.isDeepEqual=function(e,t,r,s){if(e===t)return 0!==e||1/e==1/t;const o=typeof e;if(o!==typeof t)return!1;if("object"!==o||null===e||null===t)return e!=e&&t!=t;const i=n.getSharedType(e,t,!!r.prototype);switch(i){case n.bufferType:return Buffer.prototype.equals.call(e,t);case n.regexType:return e.toString()===t.toString();case n.mismatched:return!1}for(let r=s.length-1;r>=0;--r)if(s[r].isSame(e,t))return!0;s.push(new n.SeenEntry(e,t));try{return!!n.isDeepEqualObj(i,e,t,r,s)}finally{s.pop()}},e.exports=function(e,t,r){return r=r||{prototype:!0},!!n.isDeepEqual(e,t,r,[])}},function(e,t,r){"use strict";const n={};t.escapeHtml=function(e){if(!e)return"";let t="";for(let r=0;r<e.length;++r){const s=e.charCodeAt(r);n.isSafe(s)?t+=e[r]:t+=n.escapeHtmlChar(s)}return t},t.escapeJson=function(e){if(!e)return"";let t;return e.replace(/[<>&\u2028\u2029]/g,e=>60===(t=e.charCodeAt(0))?"\\u003c":62===t?"\\u003e":38===t?"\\u0026":8232===t?"\\u2028":"\\u2029")},n.escapeHtmlChar=function(e){const t=n.namedHtml[e];return void 0!==t?t:e>=256?"&#"+e+";":`&#x${Buffer.from(String.fromCharCode(e),"ascii").toString("hex")};`},n.isSafe=function(e){return void 0!==n.safeCharCodes[e]},n.namedHtml={38:"&amp;",60:"&lt;",62:"&gt;",34:"&quot;",160:"&nbsp;",162:"&cent;",163:"&pound;",164:"&curren;",169:"&copy;",174:"&reg;"},n.safeCharCodes=function(){const e={};for(let t=32;t<123;++t)(t>=97||t>=65&&t<=90||t>=48&&t<=57||32===t||46===t||44===t||45===t||58===t||95===t)&&(e[t]=null);return e}()},function(e,t,r){"use strict";const n=/"(?:_|\\u005f)(?:_|\\u005f)(?:p|\\u0070)(?:r|\\u0072)(?:o|\\u006f)(?:t|\\u0074)(?:o|\\u006f)(?:_|\\u005f)(?:_|\\u005f)"\s*\:/;t.parse=function(e,r,s){s||(r&&"object"==typeof r?(s=r,r=void 0):s={});const o=JSON.parse(e,r);return"ignore"===s.protoAction?o:o&&"object"==typeof o&&e.match(n)?(t.scan(o,s),o):o},t.scan=function(e,t){t=t||{};let r=[e];for(;r.length;){const e=r;r=[];for(const n of e){if(Object.prototype.hasOwnProperty.call(n,"__proto__")){if("remove"!==t.protoAction)throw new SyntaxError("Object contains forbidden prototype property");delete n.__proto__}for(const e in n){const t=n[e];t&&"object"==typeof t&&r.push(n[e])}}}}},function(e,t,r){"use strict";const n=r(4),s=r(5),o=r(6),i=r(60),a=r(61),c={};t.deepEqual=i,t.clone=function(e,r={},n=null){if("object"!=typeof e||null===e)return e;const s=n||new Map,o=s.get(e);if(o)return o;let i,a=!1;const l=Array.isArray(e);if(l)i=[],a=!0;else if(Buffer.isBuffer(e))i=Buffer.from(e);else if(e instanceof Date)i=new Date(e.getTime());else if(e instanceof RegExp)i=new RegExp(e);else if(!1!==r.prototype){const t=Object.getPrototypeOf(e);t&&t.isImmutable?i=e:(i=Object.create(t),a=!0)}else i={},a=!0;if(s.set(e,i),a){const n=c.keys(e,r);for(let o=0;o<n.length;++o){const a=n[o];if(l&&"length"===a)continue;const c=Object.getOwnPropertyDescriptor(e,a);c&&(c.get||c.set)?Object.defineProperty(i,a,c):Object.defineProperty(i,a,{enumerable:!c||c.enumerable,writable:!0,configurable:!0,value:t.clone(e[a],r,s)})}l&&(i.length=e.length)}return i},c.keys=function(e,t={}){return t.symbols?Reflect.ownKeys(e):Object.getOwnPropertyNames(e)},t.merge=function(e,r,n,s){if(t.assert(e&&"object"==typeof e,"Invalid target value: must be an object"),t.assert(null==r||"object"==typeof r,"Invalid source value: must be null, undefined, or an object"),!r)return e;if(Array.isArray(r)){t.assert(Array.isArray(e),"Cannot merge array onto an object"),!1===s&&(e.length=0);for(let n=0;n<r.length;++n)e.push(t.clone(r[n]));return e}const o=c.keys(r);for(let i=0;i<o.length;++i){const a=o[i];if("__proto__"===a||!Object.prototype.propertyIsEnumerable.call(r,a))continue;const c=r[a];c&&"object"==typeof c?!e[a]||"object"!=typeof e[a]||Array.isArray(e[a])!==Array.isArray(c)||c instanceof Date||Buffer.isBuffer(c)||c instanceof RegExp?e[a]=t.clone(c):t.merge(e[a],c,n,s):null!=c?e[a]=c:!1!==n&&(e[a]=c)}return e},t.applyToDefaults=function(e,r,n){if(t.assert(e&&"object"==typeof e,"Invalid defaults value: must be an object"),t.assert(!r||!0===r||"object"==typeof r,"Invalid options value: must be true, falsy or an object"),!r)return null;const s=t.clone(e);return!0===r?s:t.merge(s,r,!0===n,!1)},t.cloneWithShallow=function(e,r,n){if(!e||"object"!=typeof e)return e;const s=c.store(e,r),o=t.clone(e,n);return c.restore(o,e,s),o},c.store=function(e,r){const n=new Map;for(let s=0;s<r.length;++s){const o=r[s],i=t.reach(e,o);"object"!=typeof i&&"function"!=typeof i||(n.set(o,i),c.reachSet(e,o,void 0))}return n},c.restore=function(e,t,r){for(const[n,s]of r)c.reachSet(e,n,s),c.reachSet(t,n,s)},c.reachSet=function(e,t,r){const n=Array.isArray(t)?t:t.split(".");let s=e;for(let e=0;e<n.length;++e){const t=n[e];e+1===n.length&&(s[t]=r),s=s[t]}},t.applyToDefaultsWithShallow=function(e,r,n){if(t.assert(e&&"object"==typeof e,"Invalid defaults value: must be an object"),t.assert(!r||!0===r||"object"==typeof r,"Invalid options value: must be true, falsy or an object"),t.assert(n&&Array.isArray(n),"Invalid keys"),!r)return null;const s=t.cloneWithShallow(e,n);if(!0===r)return s;const o=c.store(r,n);return t.merge(s,r,!1,!1),c.restore(s,r,o),s},t.intersect=function(e,t,r){if(!e||!t)return r?null:[];const n=[],s=Array.isArray(e)?new Set(e):e,o=new Set;for(const e of t)if(c.has(s,e)&&!o.has(e)){if(r)return e;n.push(e),o.add(e)}return r?null:n},c.has=function(e,t){return"function"==typeof e.has?e.has(t):void 0!==e[t]},t.contain=function(e,r,n={}){let s,o,i=null;if("object"!=typeof e||"object"!=typeof r||Array.isArray(e)||Array.isArray(r))r=[].concat(r);else{i=r;const e=Object.getOwnPropertySymbols(r).filter(Object.prototype.propertyIsEnumerable.bind(r));r=[...Object.keys(r),...e]}if(t.assert("string"==typeof e||"object"==typeof e,"Reference must be string or an object"),t.assert(r.length,"Values array cannot be empty"),n.deep){s=t.deepEqual;const e=n.hasOwnProperty("only"),r=n.hasOwnProperty("part");o={prototype:e?n.only:!!r&&!n.part,part:e?!n.only:!!r&&n.part}}else s=((e,t)=>e===t);let a=!1;const l=new Array(r.length);for(let e=0;e<l.length;++e)l[e]=0;if("string"==typeof e){let n="(";for(let e=0;e<r.length;++e){const s=r[e];t.assert("string"==typeof s,"Cannot compare string reference to non-string value"),n+=(e?"|":"")+t.escapeRegex(s)}const s=new RegExp(n+")","g");a=!!e.replace(s,(e,t)=>{const n=r.indexOf(t);return++l[n],""})}else if(Array.isArray(e)){const t=!(!n.only||!n.once);if(t&&e.length!==r.length)return!1;for(let n=0;n<e.length;++n){let i=!1;for(let a=0;a<r.length&&!1===i;++a)t&&0!==l[a]||(i=s(r[a],e[n],o)&&a);!1!==i?++l[i]:a=!0}}else{const t=c.keys(e,n);for(let n=0;n<t.length;++n){const c=t[n],u=r.indexOf(c);if(-1!==u){if(i&&!s(i[c],e[c],o))return!1;++l[u]}else a=!0}}if(n.only&&(a||!n.once))return!a;let u=!1;for(let e=0;e<l.length;++e)if(u=u||!!l[e],n.once&&l[e]>1||!n.part&&!l[e])return!1;return u},t.flatten=function(e,r){const n=r||[];for(let r=0;r<e.length;++r)Array.isArray(e[r])?t.flatten(e[r],n):n.push(e[r]);return n},t.reach=function(e,r,n){if(!1===r||null==r)return e;"string"==typeof(n=n||{})&&(n={separator:n});const s=Array.isArray(r);t.assert(!s||!n.separator,"Separator option no valid for array-based chain");const o=s?r:r.split(n.separator||".");let i=e;for(let e=0;e<o.length;++e){let s=o[e];if(Array.isArray(i)){const e=Number(s);Number.isInteger(e)&&e<0&&(s=i.length+e)}if(!i||"object"!=typeof i&&"function"!=typeof i||!(s in i)||"object"!=typeof i&&!1===n.functions){t.assert(!n.strict||e+1===o.length,"Missing segment",s,"in reach path ",r),t.assert("object"==typeof i||!0===n.functions||"function"!=typeof i,"Invalid segment",s,"in reach path ",r),i=n.default;break}i=i[s]}return i},t.reachTemplate=function(e,r,n){return r.replace(/{([^}]+)}/g,(r,s)=>{const o=t.reach(e,s,n);return null==o?"":o})},t.assert=function(e,...r){if(e)return;if(1===r.length&&r[0]instanceof Error)throw r[0];const s=r.filter(e=>""!==e).map(e=>"string"==typeof e?e:e instanceof Error?e.message:t.stringify(e));throw new n.AssertionError({message:s.join(" ")||"Unknown error",actual:!1,expected:!0,operator:"==",stackStartFunction:t.assert})},t.Bench=function(){this.ts=0,this.reset()},t.Bench.prototype.reset=function(){this.ts=t.Bench.now()},t.Bench.prototype.elapsed=function(){return t.Bench.now()-this.ts},t.Bench.now=function(){const e=process.hrtime();return 1e3*e[0]+e[1]/1e6},t.escapeRegex=function(e){return e.replace(/[\^\$\.\*\+\-\?\=\!\:\|\\\/\(\)\[\]\{\}\,]/g,"\\$&")},t.escapeHeaderAttribute=function(e){return t.assert(/^[ \w\!#\$%&'\(\)\*\+,\-\.\/\:;<\=>\?@\[\]\^`\{\|\}~\"\\]*$/.test(e),"Bad attribute value ("+e+")"),e.replace(/\\/g,"\\\\").replace(/\"/g,'\\"')},t.escapeHtml=function(e){return a.escapeHtml(e)},t.escapeJson=function(e){return a.escapeJson(e)},t.once=function(e){if(e._hoekOnce)return e;let t=!1;const r=function(...r){t||(t=!0,e(...r))};return r._hoekOnce=!0,r},t.ignore=function(){},t.uniqueFilename=function(e,t){t=t?"."!==t[0]?"."+t:t:"",e=o.resolve(e);const r=[Date.now(),process.pid,s.randomBytes(8).toString("hex")].join("-")+t;return o.join(e,r)},t.stringify=function(...e){try{return JSON.stringify.apply(null,e)}catch(e){return"[Cannot display object: "+e.message+"]"}},t.wait=function(e){return new Promise(t=>setTimeout(t,e))},t.block=function(){return new Promise(t.ignore)}},function(e,t,r){"use strict";const n={arrayType:Symbol("array"),bufferType:Symbol("buffer"),dateType:Symbol("date"),errorType:Symbol("error"),genericType:Symbol("generic"),mapType:Symbol("map"),regexType:Symbol("regex"),setType:Symbol("set"),weakMapType:Symbol("weak-map"),weakSetType:Symbol("weak-set"),mismatched:Symbol("mismatched")};n.typeMap={"[object Array]":n.arrayType,"[object Date]":n.dateType,"[object Error]":n.errorType,"[object Map]":n.mapType,"[object RegExp]":n.regexType,"[object Set]":n.setType,"[object WeakMap]":n.weakMapType,"[object WeakSet]":n.weakSetType},n.SeenEntry=class{constructor(e,t){this.obj=e,this.ref=t}isSame(e,t){return this.obj===e&&this.ref===t}},n.getInternalType=function(e){const{typeMap:t,bufferType:r,genericType:s}=n;return e instanceof Buffer?r:t[Object.prototype.toString.call(e)]||s},n.getSharedType=function(e,t,r){if(r)return Object.getPrototypeOf(e)!==Object.getPrototypeOf(t)?n.mismatched:n.getInternalType(e);const s=n.getInternalType(e);return s!==n.getInternalType(t)?n.mismatched:s},n.valueOf=function(e){const t=e.valueOf;if(void 0===t)return e;try{return t.call(e)}catch(e){return e}},n.hasOwnEnumerableProperty=function(e,t){return Object.prototype.propertyIsEnumerable.call(e,t)},n.isSetSimpleEqual=function(e,t){for(const r of e)if(!t.has(r))return!1;return!0},n.isDeepEqualObj=function(e,t,r,s,o){const{isDeepEqual:i,valueOf:a,hasOwnEnumerableProperty:c}=n,{keys:l,getOwnPropertySymbols:u}=Object;if(e===n.arrayType){if(!s.part){if(t.length!==r.length)return!1;for(let e=0;e<t.length;++e)if(!i(t[e],r[e],s,o))return!1;return!0}for(let e=0;e<t.length;++e){const n=t[e];for(let e=0;e<r.length;++e)if(i(n,r[e],s,o))return!0}}else if(e===n.setType){if(t.size!==r.size)return!1;if(!n.isSetSimpleEqual(t,r)){const e=new Set(r);for(const r of t){if(e.delete(r))continue;let t=!1;for(const n of e)if(i(r,n,s,o)){e.delete(n),t=!0;break}if(!t)return!1}}}else if(e===n.mapType){if(t.size!==r.size)return!1;for(const[e,n]of t){if(void 0===n&&!r.has(e))return!1;if(!i(n,r.get(e),s,o))return!1}}else if(e===n.errorType&&(t.name!==r.name||t.message!==r.message))return!1;const f=a(t),p=a(r);if((t!==f||r!==p)&&!i(f,p,s,o))return!1;const h=l(t);if(!s.part&&h.length!==l(r).length)return!1;for(let e=0;e<h.length;++e){const n=h[e];if(!c(r,n))return!1;if(!i(t[n],r[n],s,o))return!1}if(s.symbols){const e=u(t),n=new Set(u(r));for(let a=0;a<e.length;++a){const l=e[a];if(c(t,l)){if(!c(r,l))return!1;if(!i(t[l],r[l],s,o))return!1}else if(c(r,l))return!1;n.delete(l)}for(const e of n)if(c(r,e))return!1}return!0},n.isDeepEqual=function(e,t,r,s){if(e===t)return 0!==e||1/e==1/t;const o=typeof e;if(o!==typeof t)return!1;if("object"!==o||null===e||null===t)return e!=e&&t!=t;const i=n.getSharedType(e,t,!!r.prototype);switch(i){case n.bufferType:return Buffer.prototype.equals.call(e,t);case n.regexType:return e.toString()===t.toString();case n.mismatched:return!1}for(let r=s.length-1;r>=0;--r)if(s[r].isSame(e,t))return!0;s.push(new n.SeenEntry(e,t));try{return!!n.isDeepEqualObj(i,e,t,r,s)}finally{s.pop()}},e.exports=function(e,t,r){return r=r||{prototype:!0},!!n.isDeepEqual(e,t,r,[])}},function(e,t,r){"use strict";const n={};t.escapeHtml=function(e){if(!e)return"";let t="";for(let r=0;r<e.length;++r){const s=e.charCodeAt(r);n.isSafe(s)?t+=e[r]:t+=n.escapeHtmlChar(s)}return t},t.escapeJson=function(e){if(!e)return"";let t;return e.replace(/[<>&\u2028\u2029]/g,e=>60===(t=e.charCodeAt(0))?"\\u003c":62===t?"\\u003e":38===t?"\\u0026":8232===t?"\\u2028":"\\u2029")},n.escapeHtmlChar=function(e){const t=n.namedHtml[e];return void 0!==t?t:e>=256?"&#"+e+";":`&#x${Buffer.from(String.fromCharCode(e),"ascii").toString("hex")};`},n.isSafe=function(e){return void 0!==n.safeCharCodes[e]},n.namedHtml={38:"&amp;",60:"&lt;",62:"&gt;",34:"&quot;",160:"&nbsp;",162:"&cent;",163:"&pound;",164:"&curren;",169:"&copy;",174:"&reg;"},n.safeCharCodes=function(){const e={};for(let t=32;t<123;++t)(t>=97||t>=65&&t<=90||t>=48&&t<=57||32===t||46===t||44===t||45===t||58===t||95===t)&&(e[t]=null);return e}()},function(e,t,r){"use strict";const n=r(9),s=r(21);e.exports={}.Recorder=class extends n.Writable{constructor(e){super(),this.settings=e,this.buffers=[],this.length=0}_write(e,t,r){if(this.settings.maxBytes&&this.length+e.length>this.settings.maxBytes)return this.emit("error",s.entityTooLarge("Payload content length greater than maximum allowed: "+this.settings.maxBytes));this.length=this.length+e.length,this.buffers.push(e),r()}collect(){return 0===this.buffers.length?Buffer.alloc(0):1===this.buffers.length?this.buffers[0]:Buffer.concat(this.buffers,this.length)}}},function(e,t,r){"use strict";const n=r(9),s=r(22);e.exports={}.Tap=class extends n.Transform{constructor(){super(),this.buffers=[]}_transform(e,t,r){this.buffers.push(e),r(null,e)}collect(){return new s(this.buffers)}}},function(e,t,r){"use strict";function n(e){return(n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}t.log=function(){var e;return"object"===("undefined"==typeof console?"undefined":n(console))&&console.log&&(e=console).log.apply(e,arguments)},t.formatArgs=function(t){if(t[0]=(this.useColors?"%c":"")+this.namespace+(this.useColors?" %c":" ")+t[0]+(this.useColors?"%c ":" ")+"+"+e.exports.humanize(this.diff),!this.useColors)return;var r="color: "+this.color;t.splice(1,0,r,"color: inherit");var n=0,s=0;t[0].replace(/%[a-zA-Z%]/g,function(e){"%%"!==e&&(n++,"%c"===e&&(s=n))}),t.splice(s,0,r)},t.save=function(e){try{e?t.storage.setItem("debug",e):t.storage.removeItem("debug")}catch(e){}},t.load=function(){var e;try{e=t.storage.getItem("debug")}catch(e){}!e&&"undefined"!=typeof process&&"env"in process&&(e=process.env.DEBUG);return e},t.useColors=function(){if("undefined"!=typeof window&&window.process&&("renderer"===window.process.type||window.process.__nwjs))return!0;if("undefined"!=typeof navigator&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/(edge|trident)\/(\d+)/))return!1;return"undefined"!=typeof document&&document.documentElement&&document.documentElement.style&&document.documentElement.style.WebkitAppearance||"undefined"!=typeof window&&window.console&&(window.console.firebug||window.console.exception&&window.console.table)||"undefined"!=typeof navigator&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/firefox\/(\d+)/)&&parseInt(RegExp.$1,10)>=31||"undefined"!=typeof navigator&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/applewebkit\/(\d+)/)},t.storage=function(){try{return localStorage}catch(e){}}(),t.colors=["#0000CC","#0000FF","#0033CC","#0033FF","#0066CC","#0066FF","#0099CC","#0099FF","#00CC00","#00CC33","#00CC66","#00CC99","#00CCCC","#00CCFF","#3300CC","#3300FF","#3333CC","#3333FF","#3366CC","#3366FF","#3399CC","#3399FF","#33CC00","#33CC33","#33CC66","#33CC99","#33CCCC","#33CCFF","#6600CC","#6600FF","#6633CC","#6633FF","#66CC00","#66CC33","#9900CC","#9900FF","#9933CC","#9933FF","#99CC00","#99CC33","#CC0000","#CC0033","#CC0066","#CC0099","#CC00CC","#CC00FF","#CC3300","#CC3333","#CC3366","#CC3399","#CC33CC","#CC33FF","#CC6600","#CC6633","#CC9900","#CC9933","#CCCC00","#CCCC33","#FF0000","#FF0033","#FF0066","#FF0099","#FF00CC","#FF00FF","#FF3300","#FF3333","#FF3366","#FF3399","#FF33CC","#FF33FF","#FF6600","#FF6633","#FF9900","#FF9933","#FFCC00","#FFCC33"],e.exports=r(24)(t),e.exports.formatters.j=function(e){try{return JSON.stringify(e)}catch(e){return"[UnexpectedJSONParseError]: "+e.message}}},function(e,t){var r=1e3,n=60*r,s=60*n,o=24*s,i=7*o,a=365.25*o;function c(e,t,r,n){var s=t>=1.5*r;return Math.round(e/r)+" "+n+(s?"s":"")}e.exports=function(e,t){t=t||{};var l=typeof e;if("string"===l&&e.length>0)return function(e){if((e=String(e)).length>100)return;var t=/^((?:\d+)?\-?\d?\.?\d+) *(milliseconds?|msecs?|ms|seconds?|secs?|s|minutes?|mins?|m|hours?|hrs?|h|days?|d|weeks?|w|years?|yrs?|y)?$/i.exec(e);if(!t)return;var c=parseFloat(t[1]);switch((t[2]||"ms").toLowerCase()){case"years":case"year":case"yrs":case"yr":case"y":return c*a;case"weeks":case"week":case"w":return c*i;case"days":case"day":case"d":return c*o;case"hours":case"hour":case"hrs":case"hr":case"h":return c*s;case"minutes":case"minute":case"mins":case"min":case"m":return c*n;case"seconds":case"second":case"secs":case"sec":case"s":return c*r;case"milliseconds":case"millisecond":case"msecs":case"msec":case"ms":return c;default:return}}(e);if("number"===l&&!1===isNaN(e))return t.long?function(e){var t=Math.abs(e);if(t>=o)return c(e,t,o,"day");if(t>=s)return c(e,t,s,"hour");if(t>=n)return c(e,t,n,"minute");if(t>=r)return c(e,t,r,"second");return e+" ms"}(e):function(e){var t=Math.abs(e);if(t>=o)return Math.round(e/o)+"d";if(t>=s)return Math.round(e/s)+"h";if(t>=n)return Math.round(e/n)+"m";if(t>=r)return Math.round(e/r)+"s";return e+"ms"}(e);throw new Error("val is not a non-empty string or a valid number. val="+JSON.stringify(e))}},function(e,t,r){"use strict";var n=r(67),s=r(7);t.init=function(e){e.inspectOpts={};for(var r=Object.keys(t.inspectOpts),n=0;n<r.length;n++)e.inspectOpts[r[n]]=t.inspectOpts[r[n]]},t.log=function(){return process.stderr.write(s.format.apply(s,arguments)+"\n")},t.formatArgs=function(r){var n=this.namespace;if(this.useColors){var s=this.color,o="[3"+(s<8?s:"8;5;"+s),i="  ".concat(o,";1m").concat(n," [0m");r[0]=i+r[0].split("\n").join("\n"+i),r.push(o+"m+"+e.exports.humanize(this.diff)+"[0m")}else r[0]=function(){if(t.inspectOpts.hideDate)return"";return(new Date).toISOString()+" "}()+n+" "+r[0]},t.save=function(e){e?process.env.DEBUG=e:delete process.env.DEBUG},t.load=function(){return process.env.DEBUG},t.useColors=function(){return"colors"in t.inspectOpts?Boolean(t.inspectOpts.colors):n.isatty(process.stderr.fd)},t.colors=[6,2,3,4,5,1];try{var o=r(68);o&&(o.stderr||o).level>=2&&(t.colors=[20,21,26,27,32,33,38,39,40,41,42,43,44,45,56,57,62,63,68,69,74,75,76,77,78,79,80,81,92,93,98,99,112,113,128,129,134,135,148,149,160,161,162,163,164,165,166,167,168,169,170,171,172,173,178,179,184,185,196,197,198,199,200,201,202,203,204,205,206,207,208,209,214,215,220,221])}catch(e){}t.inspectOpts=Object.keys(process.env).filter(function(e){return/^debug_/i.test(e)}).reduce(function(e,t){var r=t.substring(6).toLowerCase().replace(/_([a-z])/g,function(e,t){return t.toUpperCase()}),n=process.env[t];return n=!!/^(yes|on|true|enabled)$/i.test(n)||!/^(no|off|false|disabled)$/i.test(n)&&("null"===n?null:Number(n)),e[r]=n,e},{}),e.exports=r(24)(t);var i=e.exports.formatters;i.o=function(e){return this.inspectOpts.colors=this.useColors,s.inspect(e,this.inspectOpts).replace(/\s*\n\s*/g," ")},i.O=function(e){return this.inspectOpts.colors=this.useColors,s.inspect(e,this.inspectOpts)}},function(e,t){e.exports=require("tty")},function(e,t,r){"use strict";const n=r(69),s=r(70),o=process.env;let i;function a(e){return function(e){return 0!==e&&{level:e,hasBasic:!0,has256:e>=2,has16m:e>=3}}(function(e){if(!1===i)return 0;if(s("color=16m")||s("color=full")||s("color=truecolor"))return 3;if(s("color=256"))return 2;if(e&&!e.isTTY&&!0!==i)return 0;const t=i?1:0;if("win32"===process.platform){const e=n.release().split(".");return Number(process.versions.node.split(".")[0])>=8&&Number(e[0])>=10&&Number(e[2])>=10586?Number(e[2])>=14931?3:2:1}if("CI"in o)return["TRAVIS","CIRCLECI","APPVEYOR","GITLAB_CI"].some(e=>e in o)||"codeship"===o.CI_NAME?1:t;if("TEAMCITY_VERSION"in o)return/^(9\.(0*[1-9]\d*)\.|\d{2,}\.)/.test(o.TEAMCITY_VERSION)?1:0;if("truecolor"===o.COLORTERM)return 3;if("TERM_PROGRAM"in o){const e=parseInt((o.TERM_PROGRAM_VERSION||"").split(".")[0],10);switch(o.TERM_PROGRAM){case"iTerm.app":return e>=3?3:2;case"Apple_Terminal":return 2}}return/-256(color)?$/i.test(o.TERM)?2:/^screen|^xterm|^vt100|^vt220|^rxvt|color|ansi|cygwin|linux/i.test(o.TERM)?1:"COLORTERM"in o?1:(o.TERM,t)}(e))}s("no-color")||s("no-colors")||s("color=false")?i=!1:(s("color")||s("colors")||s("color=true")||s("color=always"))&&(i=!0),"FORCE_COLOR"in o&&(i=0===o.FORCE_COLOR.length||0!==parseInt(o.FORCE_COLOR,10)),e.exports={supportsColor:a,stdout:a(process.stdout),stderr:a(process.stderr)}},function(e,t){e.exports=require("os")},function(e,t,r){"use strict";e.exports=((e,t)=>{t=t||process.argv;const r=e.startsWith("-")?"":1===e.length?"-":"--",n=t.indexOf(r+e),s=t.indexOf("--");return-1!==n&&(-1===s||n<s)})},function(e,t,r){"use strict";e.exports={useFormURLEncode:e=>encodeURIComponent(e).replace(/%20/g,"+"),getAuthorizationHeaderToken(e,t){const r=`${this.useFormURLEncode(e)}:${this.useFormURLEncode(t)}`;return Buffer.from(r).toString("base64")}}},function(e,t,r){"use strict";const n=r(8);e.exports=(e=>{const t=n(e);return{getToken:async function(r){const n=Object.assign({},r,{grant_type:"password"});return t.request(e.auth.tokenPath,n)}}})},function(e,t,r){"use strict";const n=r(74),s=r(76),o=r(8);e.exports=(e=>{const t=o(e);class r{constructor(e){this.token=s(e)}expired(){return n(new Date,this.token.expires_at)}async refresh(n){const s=Object.assign({},n,{grant_type:"refresh_token",refresh_token:this.token.refresh_token}),o=await t.request(e.auth.tokenPath,s);return new r(o)}async revoke(r){const n={token:"access_token"===r?this.token.access_token:this.token.refresh_token,token_type_hint:r};return t.request(e.auth.revokePath,n)}async revokeAll(){await this.revoke("access_token"),await this.revoke("refresh_token")}}return{create:function(e){return new r(e)}}})},function(e,t,r){var n=r(11);e.exports=function(e,t){var r=n(e),s=n(t);return r.getTime()>s.getTime()}},function(e,t){e.exports=function(e){var t=new Date(e.getTime()),r=t.getTimezoneOffset();return t.setSeconds(0,0),6e4*r+t.getTime()%6e4}},function(e,t,r){"use strict";const n=r(23)("access-token"),s=r(25),o=r(11),i=r(77);e.exports=(e=>{const t={};return"expires_at"in e?s(e.expires_at)||(t.expires_at=o(e.expires_at)):"expires_in"in e?t.expires_at=i(new Date,Number.parseInt(e.expires_in,10)):n("No token expiration property was found. Ignoring date parsing"),Object.assign({},e,t)})},function(e,t,r){var n=r(78);e.exports=function(e,t){var r=Number(t);return n(e,1e3*r)}},function(e,t,r){var n=r(11);e.exports=function(e,t){var r=n(e).getTime(),s=Number(t);return new Date(r+s)}},function(e,t,r){"use strict";const n=r(8);e.exports=(e=>{const t=n(e);return{getToken:async function(r){const n=Object.assign({},r,{grant_type:"client_credentials"});return t.request(e.auth.tokenPath,n)}}})}]);